"use strict";var he=Object.create;var L=Object.defineProperty;var Ee=Object.getOwnPropertyDescriptor;var we=Object.getOwnPropertyNames;var Ie=Object.getPrototypeOf,$e=Object.prototype.hasOwnProperty;var Se=(t,o)=>{for(var i in o)L(t,i,{get:o[i],enumerable:!0})},ie=(t,o,i,r)=>{if(o&&typeof o=="object"||typeof o=="function")for(let e of we(o))!$e.call(t,e)&&e!==i&&L(t,e,{get:()=>o[e],enumerable:!(r=Ee(o,e))||r.enumerable});return t};var S=(t,o,i)=>(i=t!=null?he(Ie(t)):{},ie(o||!t||!t.__esModule?L(i,"default",{value:t,enumerable:!0}):i,t)),Ae=t=>ie(L({},"__esModule",{value:!0}),t);var Fe={};Se(Fe,{confirmation:()=>Oe,default:()=>be});module.exports=Ae(Fe);var y=S(require("path")),w=S(require("fs")),j=S(require("os"));var U=S(require("fs")),A=S(require("os")),M=require("@raycast/api");var ae=S(require("util")),re=require("child_process"),E=ae.default.promisify(re.exec);async function Y(t){try{let{stdout:o}=await E(`"${t}" -version`),i=o.match(/ffmpeg version (\d+)\.(\d+)/);if(i){let r=parseInt(i[1],10),e=parseInt(i[2],10);return r+e/10}return null}catch(o){return console.error("Error checking FFmpeg version:",o),null}}async function C(t=6){try{let i=(0,M.getPreferenceValues)().ffmpeg_path;if(i&&i.trim()&&U.default.existsSync(i)){let a=await Y(i);if(a&&a>=t)return await M.LocalStorage.setItem("ffmpeg-path",i),console.log(`Found custom FFmpeg at: ${i} with version: ${a}`),{path:i,version:a}}let r=await M.LocalStorage.getItem("ffmpeg-path");if(r&&typeof r=="string"&&U.default.existsSync(r)){let a=await Y(r);if(a&&a>=t)return{path:r,version:a}}let e=A.default.platform(),b=[];if(e==="darwin")b.push("/usr/local/bin/ffmpeg","/opt/homebrew/bin/ffmpeg","/usr/bin/ffmpeg","/opt/local/bin/ffmpeg","/nix/store/*/bin/ffmpeg",`${A.default.homedir()}/.nix-profile/bin/ffmpeg`,"/run/current-system/sw/bin/ffmpeg",`${A.default.homedir()}/miniconda3/bin/ffmpeg`,`${A.default.homedir()}/anaconda3/bin/ffmpeg`,`${A.default.homedir()}/mambaforge/bin/ffmpeg`,"/usr/local/miniconda3/bin/ffmpeg","/usr/local/anaconda3/bin/ffmpeg","/sw/bin/ffmpeg","/Applications/ffmpeg","/Applications/FFmpeg/ffmpeg",`${A.default.homedir()}/bin/ffmpeg`,`${A.default.homedir()}/.local/bin/ffmpeg`,"/usr/pkg/bin/ffmpeg");else if(e==="win32"){let a=process.env.ProgramFiles||"C:\\Program Files",p=process.env["ProgramFiles(x86)"]||"C:\\Program Files (x86)",u=process.env.USERPROFILE||"C:\\Users\\%USERNAME%",n=process.env.LOCALAPPDATA||`${u}\\AppData\\Local`;b.push(`${a}\\ffmpeg\\bin\\ffmpeg.exe`,`${p}\\ffmpeg\\bin\\ffmpeg.exe`,"C:\\ffmpeg\\bin\\ffmpeg.exe",`${a}\\ffmpeg\\ffmpeg.exe`,"C:\\ProgramData\\chocolatey\\lib\\ffmpeg\\tools\\ffmpeg\\bin\\ffmpeg.exe","C:\\tools\\ffmpeg\\bin\\ffmpeg.exe",`${u}\\scoop\\apps\\ffmpeg\\current\\bin\\ffmpeg.exe`,`${u}\\scoop\\shims\\ffmpeg.exe`,`${n}\\Microsoft\\WinGet\\Packages\\Gyan.FFmpeg_Microsoft.Winget.Source_*\\ffmpeg-*\\bin\\ffmpeg.exe`,`${u}\\miniconda3\\Scripts\\ffmpeg.exe`,`${u}\\anaconda3\\Scripts\\ffmpeg.exe`,`${u}\\mambaforge\\Scripts\\ffmpeg.exe`,"C:\\ProgramData\\Miniconda3\\Scripts\\ffmpeg.exe","C:\\ProgramData\\Anaconda3\\Scripts\\ffmpeg.exe","C:\\msys64\\usr\\bin\\ffmpeg.exe","C:\\msys64\\mingw64\\bin\\ffmpeg.exe","C:\\msys64\\mingw32\\bin\\ffmpeg.exe",`${u}\\bin\\ffmpeg.exe`,`${u}\\Tools\\ffmpeg\\bin\\ffmpeg.exe`,`${n}\\Programs\\ffmpeg\\bin\\ffmpeg.exe`)}else{let a=A.default.homedir();b.push("/usr/bin/ffmpeg","/usr/local/bin/ffmpeg","/bin/ffmpeg","/snap/bin/ffmpeg","/var/lib/snapd/snap/bin/ffmpeg","/var/lib/flatpak/exports/bin/org.ffmpeg.FFmpeg",`${a}/.local/share/flatpak/exports/bin/org.ffmpeg.FFmpeg`,`${a}/Applications/ffmpeg.AppImage`,`${a}/.local/bin/ffmpeg.AppImage`,"/nix/store/*/bin/ffmpeg",`${a}/.nix-profile/bin/ffmpeg`,"/run/current-system/sw/bin/ffmpeg",`${a}/miniconda3/bin/ffmpeg`,`${a}/anaconda3/bin/ffmpeg`,`${a}/mambaforge/bin/ffmpeg`,"/opt/miniconda3/bin/ffmpeg","/opt/anaconda3/bin/ffmpeg",`${a}/bin/ffmpeg`,`${a}/.local/bin/ffmpeg`,"/opt/ffmpeg/bin/ffmpeg","/usr/local/ffmpeg/bin/ffmpeg",`${a}/ffmpeg/ffmpeg`,`${a}/src/ffmpeg/ffmpeg`,"/opt/local/bin/ffmpeg")}for(let a of b)if(U.default.existsSync(a)){let p=await Y(a);if(p&&p>=t)return await M.LocalStorage.setItem("ffmpeg-path",a),console.log(`Found FFmpeg at: ${a} with version: ${p}`),{path:a,version:p}}return null}catch(o){return console.error("Error finding valid FFmpeg:",o),null}}var ne=[".mov",".mp4",".avi",".mkv",".mpg",".webm",".ts",".mpeg",".vob",".m2ts",".mts",".m4v",".flv",".3gp",".asf",".wmv",".rmvb",".ogv",".mxf",".nut",".dv",".gxf",".rm",".cdxl",".wtv",".m3u8",".mpd",".seg",".txd"],se=[".jpg",".jpeg",".png",".webp",".heic",".tiff",".tif",".avif",".bmp",".pcx",".tga",".ras",".sgi",".ppm",".pgm",".pbm",".pnm",".xbm",".xpm",".ico",".jp2",".j2k",".pcd",".cin",".wbmp",".xface"],pe=[".mp3",".aac",".wav",".m4a",".flac",".aif",".aiff",".ogg",".oga",".alac",".wma",".opus",".amr",".caf",".au",".snd",".ape",".dsf",".dff",".mpc",".wv",".spx",".xa",".ra"],Qe=[".mp4",".avi",".mov",".mkv",".mpg",".webm"],Pe=[".mp3",".aac",".wav",".flac",".m4a"],Me=[".jpg",".png",".webp",".heic",".tiff",".avif"],Je=[...ne,...se,...pe],Ke=[...Qe,...Pe,...Me],W=["64","96","128","160","192","224","256","320"],J=["22050","44100","48000","96000"],ce=["16","24","32"],le=["aac_low","aac_he","aac_he_v2"],ue=["0","1","2","3","4","5","6","7","8"],q=["crf","vbr","vbr-2-pass"],O=["50000","40000","30000","25000","20000","15000","10000","8000","5000","4000","3000","2000","1500","1000","750","500"],G=["",...O],K=["veryslow","slower","slow","medium","fast","faster","veryfast","superfast","ultrafast"],fe=["4444xq","4444","hq","standard","lt","proxy"],Z=["best","good","realtime"],ee={".mp3":{lowest:{bitrate:"96",vbr:!1},low:{bitrate:"128",vbr:!1},medium:{bitrate:"192",vbr:!0},high:{bitrate:"256",vbr:!0},highest:{bitrate:"320",vbr:!0}},".aac":{lowest:{bitrate:"96",profile:"aac_low"},low:{bitrate:"128",profile:"aac_low"},medium:{bitrate:"192",profile:"aac_low"},high:{bitrate:"256",profile:"aac_low"},highest:{bitrate:"320",profile:"aac_low"}},".m4a":{lowest:{bitrate:"96",profile:"aac_low"},low:{bitrate:"128",profile:"aac_low"},medium:{bitrate:"192",profile:"aac_low"},high:{bitrate:"256",profile:"aac_low"},highest:{bitrate:"320",profile:"aac_low"}},".wav":{lowest:{sampleRate:"22050",bitDepth:"16"},low:{sampleRate:"44100",bitDepth:"16"},medium:{sampleRate:"44100",bitDepth:"16"},high:{sampleRate:"48000",bitDepth:"24"},highest:{sampleRate:"96000",bitDepth:"24"}},".flac":{lowest:{compressionLevel:"8",sampleRate:"44100",bitDepth:"16"},low:{compressionLevel:"5",sampleRate:"44100",bitDepth:"16"},medium:{compressionLevel:"5",sampleRate:"44100",bitDepth:"16"},high:{compressionLevel:"3",sampleRate:"48000",bitDepth:"24"},highest:{compressionLevel:"0",sampleRate:"96000",bitDepth:"24"}},".mp4":{lowest:{encodingMode:"crf",crf:30,preset:"fast"},low:{encodingMode:"crf",crf:50,preset:"medium"},medium:{encodingMode:"crf",crf:75,preset:"medium"},high:{encodingMode:"crf",crf:85,preset:"slow"},highest:{encodingMode:"crf",crf:95,preset:"slower"}},".avi":{lowest:{encodingMode:"crf",crf:30},low:{encodingMode:"crf",crf:50},medium:{encodingMode:"crf",crf:75},high:{encodingMode:"crf",crf:85},highest:{encodingMode:"crf",crf:95}},".mov":{lowest:{variant:"proxy"},low:{variant:"lt"},medium:{variant:"standard"},high:{variant:"hq"},highest:{variant:"4444"}},".mkv":{lowest:{encodingMode:"crf",crf:30,preset:"fast"},low:{encodingMode:"crf",crf:50,preset:"medium"},medium:{encodingMode:"crf",crf:75,preset:"medium"},high:{encodingMode:"crf",crf:85,preset:"slow"},highest:{encodingMode:"crf",crf:95,preset:"slower"}},".mpg":{lowest:{encodingMode:"crf",crf:30},low:{encodingMode:"crf",crf:50},medium:{encodingMode:"crf",crf:75},high:{encodingMode:"crf",crf:85},highest:{encodingMode:"crf",crf:95}},".webm":{lowest:{encodingMode:"crf",crf:30,quality:"realtime"},low:{encodingMode:"crf",crf:50,quality:"good"},medium:{encodingMode:"crf",crf:60,quality:"good"},high:{encodingMode:"crf",crf:75,quality:"good"},highest:{encodingMode:"crf",crf:90,quality:"best"}}};var me={".jpg":80,".png":"png-24",".webp":80,".heic":80,".tiff":"deflate",".avif":80,".mp3":{bitrate:"192",vbr:!0},".aac":{bitrate:"192",profile:"aac_low"},".m4a":{bitrate:"192",profile:"aac_low"},".wav":{sampleRate:"44100",bitDepth:"16"},".flac":{compressionLevel:"5",sampleRate:"44100",bitDepth:"16"},".mp4":{encodingMode:"crf",crf:75,preset:"medium"},".avi":{encodingMode:"crf",crf:75},".mov":{variant:"standard"},".mkv":{encodingMode:"crf",crf:75,preset:"medium"},".mpg":{encodingMode:"crf",crf:75},".webm":{encodingMode:"crf",crf:60,quality:"good"}};function T(t){return t=t.toLowerCase(),se.includes(t)?"image":pe.includes(t)?"audio":ne.includes(t)?"video":null}function Ve(t){return Math.round(51-t/100*51)}function te(t,o){let i=t.replace(y.default.extname(t),o),r=i,e=1;for(;w.default.existsSync(r);){let b=y.default.basename(i,o),a=y.default.dirname(i);r=y.default.join(a,`${b}(${e})${o}`),e++}return r}async function X(t,o,i){let r=await C();if(!r)throw new Error("FFmpeg is not installed or configured. Please install FFmpeg to use this converter.");let e=`"${r.path}" -i`;switch(T(y.default.extname(t))){case"image":{let a=o,p=i,u=te(t,a),n=null,c=null,v=y.default.extname(t).toLowerCase(),g=t;try{if(a===".heic")try{await E(`sips --setProperty format heic --setProperty formatOptions ${p[".heic"]} "${t}" --out "${u}"`)}catch(d){let _=String(d);throw _.includes("command not found")||_.includes("not recognized")?new Error("HEIC conversion failed: 'sips' command not found. Converting to HEIC format is theoretically only available on macOS, as it requires the built-in SIPS utility with proper HEIC support (libheif, libde265, and x265 dependencies)."):new Error("HEIC conversion failed: SIPS command found but conversion unsuccessful. This may indicate that your SIPS installation lacks proper HEIC support. Converting to HEIC format typically requires macOS with built-in SIPS that includes libheif, libde265, and x265 dependencies. Error details: "+String(d))}else{if(v===".heic")try{let d=`${y.default.basename(t,".heic")}_temp_${Date.now()}.png`;n=y.default.join(j.default.tmpdir(),d),await E(`sips --setProperty format png "${t}" --out "${n}"`),g=n}catch(d){throw console.error(`Error pre-processing HEIC file: ${t}`,d),n&&w.default.existsSync(n)&&w.default.unlinkSync(n),new Error(`Failed to preprocess HEIC file: ${String(d)}`)}switch(e+=` "${g}"`,a){case".jpg":e+=` -q:v ${Math.round(31-p[".jpg"]/100*29)}`;break;case".png":if(p[".png"]==="png-8"){let d=`${y.default.basename(t,y.default.extname(t))}_palette_${Date.now()}.png`;c=y.default.join(j.default.tmpdir(),d),await E(`"${r.path}" -i "${g}" -vf "palettegen=max_colors=256" -y "${c}"`),e=`"${r.path}" -i "${g}" -i "${c}" -lavfi "paletteuse=dither=bayer:bayer_scale=5"`}e+=` -compression_level 100 "${u}"`;break;case".webp":e+=" -c:v libwebp",p[".webp"]==="lossless"?e+=" -lossless 1":e+=` -quality ${p[".webp"]}`;break;case".tiff":e+=` -compression_algo ${p[".tiff"]}`;break;case".avif":e+=` -c:v libaom-av1 -crf ${Math.round(63-Number(p[".avif"])/100*63)} -still-picture 1`;break}(a!==".png"||p[".png"]!=="png-8")&&(e+=` -y "${u}"`),console.log(`Executing FFmpeg image command: ${e}`),await E(e)}return u}catch(d){throw console.error(`Error converting ${g} to ${a}:`,d),d}finally{n&&w.default.existsSync(n)&&w.default.unlinkSync(n),c&&w.default.existsSync(c)&&w.default.unlinkSync(c)}}case"audio":{let a=o,p=i,u=te(t,a);switch(e+=` "${t}"`,a){case".mp3":{let n=p[".mp3"];e+=" -c:a libmp3lame",n.vbr?e+=` -q:a ${Math.round((320-Number(n.bitrate))/40)}`:e+=` -b:a ${n.bitrate}k`;break}case".aac":{let n=p[".aac"];e+=` -c:a aac -b:a ${n.bitrate}k`,n.profile&&(e+=` -profile:a ${n.profile}`);break}case".m4a":{let n=p[".m4a"];e+=` -c:a aac -b:a ${n.bitrate}k`,n.profile&&(e+=` -profile:a ${n.profile}`);break}case".wav":{let n=p[".wav"];e+=` -c:a pcm_s${n.bitDepth}le -ar ${n.sampleRate}`;break}case".flac":{let n=p[".flac"];e+=` -c:a flac -compression_level ${n.compressionLevel} -ar ${n.sampleRate}`,n.bitDepth==="24"&&(e+=" -sample_fmt s32");break}default:throw new Error(`Unknown audio output format: ${a}`)}return e+=` -y "${u}"`,console.log(`Executing FFmpeg audio command: ${e}`),await E(e),u}case"video":{let a=o,p=i;switch(e+=` "${t}"`,a){case".mp4":{let c=p[".mp4"];e+=` -vcodec h264 -acodec aac -preset ${c.preset}`;break}case".avi":{e+=" -vcodec libxvid -acodec mp3";break}case".mov":{let c=p[".mov"];e+=` -vcodec prores -profile:v ${{proxy:"0",lt:"1",standard:"2",hq:"3",4444:"4","4444xq":"5"}[c.variant]} -acodec pcm_s16le`;break}case".mkv":{let c=p[".mkv"];e+=` -vcodec libx265 -acodec aac -preset ${c.preset}`;break}case".mpg":{e+=" -vcodec mpeg2video -acodec mp3";break}case".webm":{let c=p[".webm"];e+=` -vcodec libvpx-vp9 -acodec libopus -quality ${c.quality}`;break}default:throw new Error(`Unknown video output format: ${a}`)}let u=te(t,a),n=null;if(a!==".mov"){let c=p[a];if("encodingMode"in c){if(c.encodingMode==="crf")e+=` -crf ${Ve(c.crf)}`;else if(e+=` -b:v ${c.bitrate}k`,"maxBitrate"in c&&c.maxBitrate&&(e+=` -maxrate ${c.maxBitrate}k -bufsize ${Number(c.maxBitrate)*2}k`),c.encodingMode==="vbr-2-pass"){n=y.default.join(j.default.tmpdir(),`ffmpeg2pass_${Date.now()}`);let v=process.platform==="win32"?"NUL":"/dev/null",g=e+` -pass 1 -passlogfile "${n}" -f null ${v}`;try{await E(g)}catch(d){throw new Error(`First pass encoding failed: ${d}`)}e+=` -pass 2 -passlogfile "${n}"`}}}try{return e+=` -y "${u}"`,console.log(`Executing FFmpeg video command: ${e}`),await E(e),u}finally{if(n)try{let c=[`${n}-0.log`,`${n}-0.log.mbtree`,`${n}-0.log.temp`,`${n}-1.log`,`${n}-1.log.mbtree`,`${n}-1.log.temp`];for(let v of c)if(w.default.existsSync(v))try{w.default.unlinkSync(v)}catch(g){console.warn(`Failed to clean up log file ${v}:`,g)}}catch(c){console.warn("Failed to clean up FFmpeg log files:",c)}}}default:throw new Error(`Unsupported media type for file: ${t}`)}}var R=S(require("path")),de=S(require("os")),ge=S(require("fs"));async function ye(t){if(!t)throw new Error("Input path is required but was not provided.");let o=R.default.resolve(R.default.normalize(t.replace(/^~/,de.default.homedir())));if(!ge.default.existsSync(o))throw new Error(`The file does not exist at ${o}`);return o}async function be(t){let{inputPath:o,outputFileType:i,quality:r,imageQualityPercent:e,webpLossless:b,pngVariant:a,tiffCompression:p,audioBitrate:u,audioVbr:n,audioProfile:c,audioSampleRate:v,audioBitDepth:g,flacCompressionLevel:d,videoEncodingMode:_,videoCrf:F,videoBitrate:D,videoMaxBitrate:k,videoPreset:H,proresVariant:oe,vp9Quality:z}=t;if(!await C())return{type:"error",message:"FFmpeg is not installed. Please install FFmpeg to use this tool."};let Q,x;try{if(Q=await ye(o),x=T(R.default.extname(Q)),!x)return{type:"error",message:`Unsupported input file type for path: ${Q}`}}catch(I){return{type:"error",message:String(I)}}try{let I,B=(()=>{let P=me[i];if(x==="image"){let $=P,l=$;switch(i){case".jpg":{let s=V(e);l=typeof s=="number"?s:$;break}case".png":{l=a&&["png-24","png-8"].includes(a)?a:$;break}case".webp":{if(b)l="lossless";else{let s=V(e);l=typeof s=="number"?s:$}break}case".heic":{if(process.platform!=="darwin")throw new Error("HEIC output is only supported on macOS.");let s=V(e);l=typeof s=="number"?s:$;break}case".tiff":{l=p&&["deflate","lzw"].includes(p)?p:$;break}case".avif":{let s=V(e);l=typeof s=="number"?s:$;break}}return{[i]:l}}if(x==="audio"){let l=u||typeof n=="boolean"||c||v||g||d?P:r?ee[i]?.[r]??P:P;switch(i){case".mp3":{let s=l;l={bitrate:f(u,W,s.bitrate),vbr:typeof n=="boolean"?n:s.vbr};break}case".aac":case".m4a":{let s=l,m=s.profile??"aac_low";l={bitrate:f(u,W,s.bitrate),profile:f(c,le,m)};break}case".wav":{let s=l;l={sampleRate:f(v,J,s.sampleRate),bitDepth:f(g,ce,s.bitDepth)};break}case".flac":{let s=l,m=f(g??s.bitDepth,["16","24"],s.bitDepth);g==="32"&&(m="24"),l={compressionLevel:f(d,ue,s.compressionLevel),sampleRate:f(v,J,s.sampleRate),bitDepth:m};break}}return{[i]:l}}if(x==="video"){let l=_||typeof F=="number"||D||typeof k=="string"||H||oe||z?P:r?ee[i]?.[r]??P:P;switch(i){case".mov":{l={variant:f(oe,fe,l.variant)};break}case".webm":{let s=l,m=f(_,q,s.encodingMode??"crf");if(m==="crf"){let h=s.crf;l={encodingMode:"crf",crf:V(F)??h,quality:f(z,Z,s.quality??"good")}}else l={encodingMode:m,bitrate:f(D,O,"2000"),maxBitrate:f(k,G,""),quality:f(z,Z,"good")};break}case".mp4":case".mkv":{let s=l,m=f(_,q,s.encodingMode??"crf");if(m==="crf"){let h=s.crf,N=s.preset??"medium";l={encodingMode:"crf",crf:V(F)??h,preset:f(H,K,N)}}else l={encodingMode:m,bitrate:f(D,O,"2000"),maxBitrate:f(k,G,""),preset:f(H,K,"medium")};break}case".avi":case".mpg":{let s=l,m=f(_,q,s.encodingMode??"crf");if(m==="crf"){let h=s.crf;l={encodingMode:"crf",crf:V(F)??h}}else l={encodingMode:m,bitrate:f(D,O,"2000"),maxBitrate:f(k,G,"")};break}}return{[i]:l}}throw new Error("Unsupported media type for quality building")})();if(x==="image")I=await X(Q,i,B);else if(x==="audio")I=await X(Q,i,B);else if(x==="video")I=await X(Q,i,B);else return{type:"error",message:`Cannot convert ${x} to ${i}. Invalid conversion pair.`};let ve=Te(x,i,B);return{type:"success",message:`\u2705 Converted ${x} to ${i}
- Input: ${Q}
- Output: ${I}
- Settings: ${ve}`}}catch(I){return console.error(I),{type:"error",message:`\u274C The ${x} could not be converted. Error: ${I}`}}}var Oe=async t=>{try{let o=await ye(t.inputPath),i=T(R.default.extname(o)),r="This will create a new file in the same directory.",e=[{name:"Input Path",value:o},{name:"Input Media Type",value:i||"Unknown"},{name:"Output File Type",value:t.outputFileType}];t.quality&&e.push({name:"Quality (simple)",value:String(t.quality)});let b=Re(t);return b&&e.push({name:"Advanced",value:b}),{message:r,info:e}}catch(o){return{message:String(o),info:[]}}};function V(t){if(!(typeof t!="number"||Number.isNaN(t)))return Math.min(100,Math.max(0,Math.round(t)))}function f(t,o,i){return t!==void 0&&o.includes(t)?t:i}function Te(t,o,i){if(t==="image"){let r=i;switch(o){case".jpg":return`quality ${r[".jpg"]}%`;case".heic":return`quality ${r[".heic"]}%`;case".avif":return`quality ${r[".avif"]}%`;case".webp":{let e=r[".webp"];return typeof e=="string"?"lossless":`quality ${e}%`}case".png":return`variant ${r[".png"]}`;case".tiff":return`compression ${r[".tiff"]}`}}if(t==="audio"){let r=i;switch(o){case".mp3":{let e=r[".mp3"];return`bitrate ${e.bitrate} kbps${e.vbr?", VBR":""}`}case".aac":{let e=r[".aac"];return`bitrate ${e.bitrate} kbps${e.profile?`, profile ${e.profile}`:""}`}case".m4a":{let e=r[".m4a"];return`bitrate ${e.bitrate} kbps${e.profile?`, profile ${e.profile}`:""}`}case".wav":{let e=r[".wav"];return`${e.sampleRate} Hz, ${e.bitDepth}-bit`}case".flac":{let e=r[".flac"];return`level ${e.compressionLevel}, ${e.sampleRate} Hz, ${e.bitDepth}-bit`}}}if(t==="video"){let r=i;switch(o){case".mov":return`ProRes ${r[".mov"].variant}`;case".webm":{let e=r[".webm"];return e.encodingMode==="crf"?`CRF ${e.crf}, VP9 ${e.quality}`:`${e.encodingMode.toUpperCase()} ${e.bitrate} kbps${e.maxBitrate?` max ${e.maxBitrate}`:""}, VP9 ${e.quality}`}case".mp4":{let e=r[".mp4"];return e.encodingMode==="crf"?`CRF ${e.crf}, preset ${e.preset}`:`${e.encodingMode.toUpperCase()} ${e.bitrate} kbps${e.maxBitrate?` max ${e.maxBitrate}`:""}, preset ${e.preset}`}case".mkv":{let e=r[".mkv"];return e.encodingMode==="crf"?`CRF ${e.crf}, preset ${e.preset}`:`${e.encodingMode.toUpperCase()} ${e.bitrate} kbps${e.maxBitrate?` max ${e.maxBitrate}`:""}, preset ${e.preset}`}case".avi":{let e=r[".avi"];return e.encodingMode==="crf"?`CRF ${e.crf}`:`${e.encodingMode.toUpperCase()} ${e.bitrate} kbps${e.maxBitrate?` max ${e.maxBitrate}`:""}`}case".mpg":{let e=r[".mpg"];return e.encodingMode==="crf"?`CRF ${e.crf}`:`${e.encodingMode.toUpperCase()} ${e.bitrate} kbps${e.maxBitrate?` max ${e.maxBitrate}`:""}`}}}return"default"}function Re(t){let o=[];return typeof t.imageQualityPercent=="number"&&o.push(`imageQuality ${t.imageQualityPercent}%`),t.webpLossless&&o.push("webp lossless"),t.pngVariant&&o.push(`png ${t.pngVariant}`),t.tiffCompression&&o.push(`tiff ${t.tiffCompression}`),t.audioBitrate&&o.push(`audio bitrate ${t.audioBitrate}`),typeof t.audioVbr=="boolean"&&o.push(`audio vbr ${t.audioVbr?"on":"off"}`),t.audioProfile&&o.push(`audio profile ${t.audioProfile}`),t.audioSampleRate&&o.push(`audio sample ${t.audioSampleRate}`),t.audioBitDepth&&o.push(`audio bitDepth ${t.audioBitDepth}`),t.flacCompressionLevel&&o.push(`flac level ${t.flacCompressionLevel}`),t.videoEncodingMode&&o.push(`video mode ${t.videoEncodingMode}`),typeof t.videoCrf=="number"&&o.push(`video crf ${t.videoCrf}`),t.videoBitrate&&o.push(`video bitrate ${t.videoBitrate}`),typeof t.videoMaxBitrate=="string"&&o.push(`video maxBitrate ${t.videoMaxBitrate||"none"}`),t.videoPreset&&o.push(`video preset ${t.videoPreset}`),t.proresVariant&&o.push(`prores ${t.proresVariant}`),t.vp9Quality&&o.push(`vp9 ${t.vp9Quality}`),o.join(", ")}0&&(module.exports={confirmation});
