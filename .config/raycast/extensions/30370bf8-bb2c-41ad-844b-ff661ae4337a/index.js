"use strict";var Bf=Object.create;var pt=Object.defineProperty;var Nf=Object.getOwnPropertyDescriptor;var jf=Object.getOwnPropertyNames;var zf=Object.getPrototypeOf,Vf=Object.prototype.hasOwnProperty;var B=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Wf=(e,t)=>{for(var r in t)pt(e,r,{get:t[r],enumerable:!0})},Co=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of jf(t))!Vf.call(e,o)&&o!==r&&pt(e,o,{get:()=>t[o],enumerable:!(n=Nf(t,o))||n.enumerable});return e};var C=(e,t,r)=>(r=e!=null?Bf(zf(e)):{},Co(t||!e||!e.__esModule?pt(r,"default",{value:e,enumerable:!0}):r,e)),Gf=e=>Co(pt({},"__esModule",{value:!0}),e);var Si=B((Yb,wi)=>{wi.exports=bi;bi.sync=ju;var gi=require("fs");function Nu(e,t){var r=t.pathExt!==void 0?t.pathExt:process.env.PATHEXT;if(!r||(r=r.split(";"),r.indexOf("")!==-1))return!0;for(var n=0;n<r.length;n++){var o=r[n].toLowerCase();if(o&&e.substr(-o.length).toLowerCase()===o)return!0}return!1}function yi(e,t,r){return!e.isSymbolicLink()&&!e.isFile()?!1:Nu(t,r)}function bi(e,t,r){gi.stat(e,function(n,o){r(n,n?!1:yi(o,e,t))})}function ju(e,t){return yi(gi.statSync(e),e,t)}});var Ai=B((qb,Ti)=>{Ti.exports=$i;$i.sync=zu;var xi=require("fs");function $i(e,t,r){xi.stat(e,function(n,o){r(n,n?!1:Ei(o,t))})}function zu(e,t){return Ei(xi.statSync(e),t)}function Ei(e,t){return e.isFile()&&Vu(e,t)}function Vu(e,t){var r=e.mode,n=e.uid,o=e.gid,i=t.uid!==void 0?t.uid:process.getuid&&process.getuid(),s=t.gid!==void 0?t.gid:process.getgid&&process.getgid(),a=parseInt("100",8),c=parseInt("010",8),l=parseInt("001",8),f=a|c,u=r&l||r&c&&o===s||r&a&&n===i||r&f&&i===0;return u}});var Oi=B((Jb,ki)=>{var Kb=require("fs"),vt;process.platform==="win32"||global.TESTING_WINDOWS?vt=Si():vt=Ai();ki.exports=Gr;Gr.sync=Wu;function Gr(e,t,r){if(typeof t=="function"&&(r=t,t={}),!r){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(n,o){Gr(e,t||{},function(i,s){i?o(i):n(s)})})}vt(e,t||{},function(n,o){n&&(n.code==="EACCES"||t&&t.ignoreErrors)&&(n=null,o=!1),r(n,o)})}function Wu(e,t){try{return vt.sync(e,t||{})}catch(r){if(t&&t.ignoreErrors||r.code==="EACCES")return!1;throw r}}});var Mi=B((Zb,Pi)=>{var Re=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",Ii=require("path"),Gu=Re?";":":",vi=Oi(),Ri=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"}),Ci=(e,t)=>{let r=t.colon||Gu,n=e.match(/\//)||Re&&e.match(/\\/)?[""]:[...Re?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(r)],o=Re?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",i=Re?o.split(r):[""];return Re&&e.indexOf(".")!==-1&&i[0]!==""&&i.unshift(""),{pathEnv:n,pathExt:i,pathExtExe:o}},Di=(e,t,r)=>{typeof t=="function"&&(r=t,t={}),t||(t={});let{pathEnv:n,pathExt:o,pathExtExe:i}=Ci(e,t),s=[],a=l=>new Promise((f,u)=>{if(l===n.length)return t.all&&s.length?f(s):u(Ri(e));let d=n[l],p=/^".*"$/.test(d)?d.slice(1,-1):d,h=Ii.join(p,e),b=!p&&/^\.[\\\/]/.test(e)?e.slice(0,2)+h:h;f(c(b,l,0))}),c=(l,f,u)=>new Promise((d,p)=>{if(u===o.length)return d(a(f+1));let h=o[u];vi(l+h,{pathExt:i},(b,m)=>{if(!b&&m)if(t.all)s.push(l+h);else return d(l+h);return d(c(l,f,u+1))})});return r?a(0).then(l=>r(null,l),r):a(0)},Hu=(e,t)=>{t=t||{};let{pathEnv:r,pathExt:n,pathExtExe:o}=Ci(e,t),i=[];for(let s=0;s<r.length;s++){let a=r[s],c=/^".*"$/.test(a)?a.slice(1,-1):a,l=Ii.join(c,e),f=!c&&/^\.[\\\/]/.test(e)?e.slice(0,2)+l:l;for(let u=0;u<n.length;u++){let d=f+n[u];try{if(vi.sync(d,{pathExt:o}))if(t.all)i.push(d);else return d}catch{}}}if(t.all&&i.length)return i;if(t.nothrow)return null;throw Ri(e)};Pi.exports=Di;Di.sync=Hu});var _i=B((Xb,Hr)=>{"use strict";var Ui=(e={})=>{let t=e.env||process.env;return(e.platform||process.platform)!=="win32"?"PATH":Object.keys(t).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"};Hr.exports=Ui;Hr.exports.default=Ui});var Ni=B((Qb,Bi)=>{"use strict";var Li=require("path"),Yu=Mi(),qu=_i();function Fi(e,t){let r=e.options.env||process.env,n=process.cwd(),o=e.options.cwd!=null,i=o&&process.chdir!==void 0&&!process.chdir.disabled;if(i)try{process.chdir(e.options.cwd)}catch{}let s;try{s=Yu.sync(e.command,{path:r[qu({env:r})],pathExt:t?Li.delimiter:void 0})}catch{}finally{i&&process.chdir(n)}return s&&(s=Li.resolve(o?e.options.cwd:"",s)),s}function Ku(e){return Fi(e)||Fi(e,!0)}Bi.exports=Ku});var ji=B((e0,qr)=>{"use strict";var Yr=/([()\][%!^"`<>&|;, *?])/g;function Ju(e){return e=e.replace(Yr,"^$1"),e}function Zu(e,t){return e=`${e}`,e=e.replace(/(?=(\\+?)?)\1"/g,'$1$1\\"'),e=e.replace(/(?=(\\+?)?)\1$/,"$1$1"),e=`"${e}"`,e=e.replace(Yr,"^$1"),t&&(e=e.replace(Yr,"^$1")),e}qr.exports.command=Ju;qr.exports.argument=Zu});var Vi=B((t0,zi)=>{"use strict";zi.exports=/^#!(.*)/});var Gi=B((r0,Wi)=>{"use strict";var Xu=Vi();Wi.exports=(e="")=>{let t=e.match(Xu);if(!t)return null;let[r,n]=t[0].replace(/#! ?/,"").split(" "),o=r.split("/").pop();return o==="env"?n:n?`${o} ${n}`:o}});var Yi=B((n0,Hi)=>{"use strict";var Kr=require("fs"),Qu=Gi();function ed(e){let r=Buffer.alloc(150),n;try{n=Kr.openSync(e,"r"),Kr.readSync(n,r,0,150,0),Kr.closeSync(n)}catch{}return Qu(r.toString())}Hi.exports=ed});var Zi=B((o0,Ji)=>{"use strict";var td=require("path"),qi=Ni(),Ki=ji(),rd=Yi(),nd=process.platform==="win32",od=/\.(?:com|exe)$/i,id=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function sd(e){e.file=qi(e);let t=e.file&&rd(e.file);return t?(e.args.unshift(e.file),e.command=t,qi(e)):e.file}function ad(e){if(!nd)return e;let t=sd(e),r=!od.test(t);if(e.options.forceShell||r){let n=id.test(t);e.command=td.normalize(e.command),e.command=Ki.command(e.command),e.args=e.args.map(i=>Ki.argument(i,n));let o=[e.command].concat(e.args).join(" ");e.args=["/d","/s","/c",`"${o}"`],e.command=process.env.comspec||"cmd.exe",e.options.windowsVerbatimArguments=!0}return e}function cd(e,t,r){t&&!Array.isArray(t)&&(r=t,t=null),t=t?t.slice(0):[],r=Object.assign({},r);let n={command:e,args:t,options:r,file:void 0,original:{command:e,args:t}};return r.shell?n:ad(n)}Ji.exports=cd});var es=B((i0,Qi)=>{"use strict";var Jr=process.platform==="win32";function Zr(e,t){return Object.assign(new Error(`${t} ${e.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${e.command}`,path:e.command,spawnargs:e.args})}function ld(e,t){if(!Jr)return;let r=e.emit;e.emit=function(n,o){if(n==="exit"){let i=Xi(o,t);if(i)return r.call(e,"error",i)}return r.apply(e,arguments)}}function Xi(e,t){return Jr&&e===1&&!t.file?Zr(t.original,"spawn"):null}function fd(e,t){return Jr&&e===1&&!t.file?Zr(t.original,"spawnSync"):null}Qi.exports={hookChildProcess:ld,verifyENOENT:Xi,verifyENOENTSync:fd,notFoundError:Zr}});var ns=B((s0,Ce)=>{"use strict";var ts=require("child_process"),Xr=Zi(),Qr=es();function rs(e,t,r){let n=Xr(e,t,r),o=ts.spawn(n.command,n.args,n.options);return Qr.hookChildProcess(o,n),o}function ud(e,t,r){let n=Xr(e,t,r),o=ts.spawnSync(n.command,n.args,n.options);return o.error=o.error||Qr.verifyENOENTSync(o.status,n),o}Ce.exports=rs;Ce.exports.spawn=rs;Ce.exports.sync=ud;Ce.exports._parse=Xr;Ce.exports._enoent=Qr});var yy={};Wf(yy,{default:()=>_f});module.exports=Gf(yy);var Uf=require("node:child_process"),Dr=C(require("node:fs"),1),Ro=C(require("node:path"),1),w=require("@raycast/api"),V=require("react");var E=C(require("react")),O=require("@raycast/api");var Do=Object.prototype.hasOwnProperty;function mt(e,t){var r,n;if(e===t)return!0;if(e&&t&&(r=e.constructor)===t.constructor){if(r===Date)return e.getTime()===t.getTime();if(r===RegExp)return e.toString()===t.toString();if(r===Array){if((n=e.length)===t.length)for(;n--&&mt(e[n],t[n]););return n===-1}if(!r||typeof e=="object"){n=0;for(r in e)if(Do.call(e,r)&&++n&&!Do.call(t,r)||!(r in t)||!mt(e[r],t[r]))return!1;return Object.keys(t).length===n}}return e!==e&&t!==t}var ge=C(require("node:fs")),ht=C(require("node:path"));var Mo=require("react/jsx-runtime");function Hf(e){let t=(0,E.useRef)(e),r=(0,E.useRef)(0);return mt(e,t.current)||(t.current=e,r.current+=1),(0,E.useMemo)(()=>t.current,[r.current])}function K(e){let t=(0,E.useRef)(e);return t.current=e,t}function Yf(e,t){let r=e instanceof Error?e.message:String(e);return(0,O.showToast)({style:O.Toast.Style.Failure,title:t?.title??"Something went wrong",message:t?.message??r,primaryAction:t?.primaryAction??Po(e),secondaryAction:t?.primaryAction?Po(e):void 0})}var Po=e=>{let t=!0,r="[Extension Name]...",n="";try{let s=JSON.parse((0,ge.readFileSync)((0,ht.join)(O.environment.assetsPath,"..","package.json"),"utf8"));r=`[${s.title}]...`,n=`https://raycast.com/${s.owner||s.author}/${s.name}`,(!s.owner||s.access==="public")&&(t=!1)}catch{}let o=O.environment.isDevelopment||t,i=e instanceof Error?e?.stack||e?.message||"":String(e);return{title:o?"Copy Logs":"Report Error",onAction(s){s.hide(),o?O.Clipboard.copy(i):(0,O.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(r)}&extension-url=${encodeURI(n)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${i}
\`\`\`
`)}`)}}};function Uo(e,t,r){let n=(0,E.useRef)(0),[o,i]=(0,E.useState)({isLoading:!0}),s=K(e),a=K(r?.abortable),c=K(t||[]),l=K(r?.onError),f=K(r?.onData),u=K(r?.onWillExecute),d=K(r?.failureToastOptions),p=K(o.data),h=(0,E.useRef)(null),b=(0,E.useRef)({page:0}),m=(0,E.useRef)(!1),g=(0,E.useRef)(!0),y=(0,E.useRef)(50),x=(0,E.useCallback)(()=>(a.current&&(a.current.current?.abort(),a.current.current=new AbortController),++n.current),[a]),$=(0,E.useCallback)((..._)=>{let F=x();u.current?.(_),i(A=>({...A,isLoading:!0}));let Ae=qf(s.current)(..._);function ke(A){return A.name=="AbortError"||F===n.current&&(l.current?l.current(A):O.environment.launchType!==O.LaunchType.Background&&Yf(A,{title:"Failed to fetch latest data",primaryAction:{title:"Retry",onAction(he){he.hide(),h.current?.(...c.current||[])}},...d.current}),i({error:A,isLoading:!1})),A}return typeof Ae=="function"?(m.current=!0,Ae(b.current).then(({data:A,hasMore:he,cursor:Lf})=>(F===n.current&&(b.current&&(b.current.cursor=Lf,b.current.lastItem=A?.[A.length-1]),f.current&&f.current(A,b.current),he&&(y.current=A.length),g.current=he,i(Ff=>b.current.page===0?{data:A,isLoading:!1}:{data:(Ff.data||[])?.concat(A),isLoading:!1})),A),A=>(g.current=!1,ke(A)))):(m.current=!1,Ae.then(A=>(F===n.current&&(f.current&&f.current(A),i({data:A,isLoading:!1})),A),ke))},[f,l,c,s,i,h,u,b,d,x]);h.current=$;let k=(0,E.useCallback)(()=>{b.current={page:0};let _=c.current||[];return $(..._)},[$,c]),v=(0,E.useCallback)(async(_,F)=>{let Ae;try{if(F?.optimisticUpdate){x(),typeof F?.rollbackOnError!="function"&&F?.rollbackOnError!==!1&&(Ae=structuredClone(p.current?.value));let ke=F.optimisticUpdate;i(A=>({...A,data:ke(A.data)}))}return await _}catch(ke){if(typeof F?.rollbackOnError=="function"){let A=F.rollbackOnError;i(he=>({...he,data:A(he.data)}))}else F?.optimisticUpdate&&F?.rollbackOnError!==!1&&i(A=>({...A,data:Ae}));throw ke}finally{F?.shouldRevalidateAfter!==!1&&(O.environment.launchType===O.LaunchType.Background||O.environment.commandMode==="menu-bar"?await k():k())}},[k,p,i,x]),L=(0,E.useCallback)(()=>{b.current.page+=1;let _=c.current||[];$(..._)},[b,c,$]);(0,E.useEffect)(()=>{b.current={page:0},r?.execute!==!1?$(...t||[]):x()},[Hf([t,r?.execute,$]),a,b]),(0,E.useEffect)(()=>()=>{x()},[x]);let P=r?.execute!==!1?o.isLoading:!1,U={...o,isLoading:P},me=m.current?{pageSize:y.current,hasMore:g.current,onLoadMore:L}:void 0;return{...U,revalidate:k,mutate:v,pagination:me}}function qf(e){return e===Promise.all||e===Promise.race||e===Promise.resolve||e===Promise.reject?e.bind(Promise):e}function Pr(e,t){if(e){if(typeof e=="function")return e(t);if(e==="required"){let r=typeof t<"u"&&t!==null;if(r)switch(typeof t){case"string":r=t.length>0;break;case"object":Array.isArray(t)?r=t.length>0:t instanceof Date&&(r=t.getTime()>0);break;default:break}if(!r)return"The item is required"}}}function _o(e){let{onSubmit:t,validation:r,initialValues:n={}}=e,[o,i]=(0,E.useState)(n),[s,a]=(0,E.useState)({}),c=(0,E.useRef)({}),l=K(r||{}),f=K(t),u=(0,E.useCallback)(g=>{c.current[g]?.focus()},[c]),d=(0,E.useCallback)(async g=>{let y=!1;for(let[$,k]of Object.entries(l.current)){let v=Pr(k,g[$]);v&&(y||(y={},u($)),y[$]=v)}if(y)return a(y),!1;let x=await f.current(g);return typeof x=="boolean"?x:!0},[l,f,u]),p=(0,E.useCallback)((g,y)=>{a(x=>({...x,[g]:y}))},[a]),h=(0,E.useCallback)(function(g,y){i(x=>({...x,[g]:typeof y=="function"?y(x[g]):y}))},[i]),b=(0,E.useMemo)(()=>new Proxy({},{get(g,y){let x=l.current[y],$=o[y];return{onChange(k){s[y]&&(Pr(x,k)||p(y,void 0)),h(y,k)},onBlur(k){let v=Pr(x,k.target.value);v&&p(y,v)},error:s[y],id:y,value:typeof $>"u"?null:$,ref:k=>{c.current[y]=k}}}}),[s,l,p,o,c,h]),m=(0,E.useCallback)(g=>{a({}),Object.entries(c.current).forEach(([y,x])=>{g?.[y]||x?.reset()}),g&&i(g)},[i,a,c]);return{handleSubmit:d,setValidationError:p,setValue:h,values:o,itemProps:b,focus:u,reset:m}}function R(e){if(typeof e!="object"||e===null)return!1;let t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}var Lo=require("node:url"),Oe=(e,t)=>{let r=Ur(Kf(e));if(typeof r!="string")throw new TypeError(`${t} must be a string or a file URL: ${r}.`);return r},Kf=e=>Mr(e)?e.toString():e,Mr=e=>typeof e!="string"&&e&&Object.getPrototypeOf(e)===String.prototype,Ur=e=>e instanceof URL?(0,Lo.fileURLToPath)(e):e;var gt=(e,t=[],r={})=>{let n=Oe(e,"First argument"),[o,i]=R(t)?[[],t]:[t,r];if(!Array.isArray(o))throw new TypeError(`Second argument must be either an array of arguments or an options object: ${o}`);if(o.some(c=>typeof c=="object"&&c!==null))throw new TypeError(`Second argument must be an array of strings: ${o}`);let s=o.map(String),a=s.find(c=>c.includes("\0"));if(a!==void 0)throw new TypeError(`Arguments cannot contain null bytes ("\\0"): ${a}`);if(!R(i))throw new TypeError(`Last argument must be an options object: ${i}`);return[n,s,i]};var Ho=require("node:child_process");var Fo=require("node:string_decoder"),{toString:Bo}=Object.prototype,No=e=>Bo.call(e)==="[object ArrayBuffer]",D=e=>Bo.call(e)==="[object Uint8Array]",re=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),Jf=new TextEncoder,jo=e=>Jf.encode(e),Zf=new TextDecoder,yt=e=>Zf.decode(e),zo=(e,t)=>Xf(e,t).join(""),Xf=(e,t)=>{if(t==="utf8"&&e.every(i=>typeof i=="string"))return e;let r=new Fo.StringDecoder(t),n=e.map(i=>typeof i=="string"?jo(i):i).map(i=>r.write(i)),o=r.end();return o===""?n:[...n,o]},Je=e=>e.length===1&&D(e[0])?e[0]:_r(Qf(e)),Qf=e=>e.map(t=>typeof t=="string"?jo(t):t),_r=e=>{let t=new Uint8Array(eu(e)),r=0;for(let n of e)t.set(n,r),r+=n.length;return t},eu=e=>{let t=0;for(let r of e)t+=r.length;return t};var Yo=e=>Array.isArray(e)&&Array.isArray(e.raw),qo=(e,t)=>{let r=[];for(let[i,s]of e.entries())r=tu({templates:e,expressions:t,tokens:r,index:i,template:s});if(r.length===0)throw new TypeError("Template script must not be empty");let[n,...o]=r;return[n,o,{}]},tu=({templates:e,expressions:t,tokens:r,index:n,template:o})=>{if(o===void 0)throw new TypeError(`Invalid backslash sequence: ${e.raw[n]}`);let{nextTokens:i,leadingWhitespaces:s,trailingWhitespaces:a}=ru(o,e.raw[n]),c=Wo(r,i,s);if(n===t.length)return c;let l=t[n],f=Array.isArray(l)?l.map(u=>Go(u)):[Go(l)];return Wo(c,f,a)},ru=(e,t)=>{if(t.length===0)return{nextTokens:[],leadingWhitespaces:!1,trailingWhitespaces:!1};let r=[],n=0,o=Vo.has(t[0]);for(let s=0,a=0;s<e.length;s+=1,a+=1){let c=t[a];if(Vo.has(c))n!==s&&r.push(e.slice(n,s)),n=s+1;else if(c==="\\"){let l=t[a+1];l===`
`?(s-=1,a+=1):l==="u"&&t[a+2]==="{"?a=t.indexOf("}",a+3):a+=nu[l]??1}}let i=n===e.length;return i||r.push(e.slice(n)),{nextTokens:r,leadingWhitespaces:o,trailingWhitespaces:i}},Vo=new Set([" ","	","\r",`
`]),nu={x:3,u:5},Wo=(e,t,r)=>r||e.length===0||t.length===0?[...e,...t]:[...e.slice(0,-1),`${e.at(-1)}${t[0]}`,...t.slice(1)],Go=e=>{let t=typeof e;if(t==="string")return e;if(t==="number")return String(e);if(R(e)&&("stdout"in e||"isMaxBuffer"in e))return ou(e);throw e instanceof Ho.ChildProcess||Object.prototype.toString.call(e)==="[object Promise]"?new TypeError("Unexpected subprocess in template expression. Please use ${await subprocess} instead of ${subprocess}."):new TypeError(`Unexpected "${t}" in template expression`)},ou=({stdout:e})=>{if(typeof e=="string")return e;if(D(e))return yt(e);throw e===void 0?new TypeError(`Missing result.stdout in template expression. This is probably due to the previous subprocess' "stdout" option.`):new TypeError(`Unexpected "${typeof e}" stdout in template expression`)};var ol=require("node:child_process");var Jo=require("node:util");var bt=C(require("node:process"),1),W=e=>wt.includes(e),wt=[bt.default.stdin,bt.default.stdout,bt.default.stderr],j=["stdin","stdout","stderr"],St=e=>j[e]??`stdio[${e}]`;var Zo=e=>{let t={...e};for(let r of Br)t[r]=Lr(e,r);return t},Lr=(e,t)=>{let r=Array.from({length:iu(e)+1}),n=su(e[t],r,t);return uu(n,t)},iu=({stdio:e})=>Array.isArray(e)?Math.max(e.length,j.length):j.length,su=(e,t,r)=>R(e)?au(e,t,r):t.fill(e),au=(e,t,r)=>{for(let n of Object.keys(e).sort(cu))for(let o of lu(n,r,t))t[o]=e[n];return t},cu=(e,t)=>Ko(e)<Ko(t)?1:-1,Ko=e=>e==="stdout"||e==="stderr"?0:e==="all"?2:1,lu=(e,t,r)=>{if(e==="ipc")return[r.length-1];let n=Fr(e);if(n===void 0||n===0)throw new TypeError(`"${t}.${e}" is invalid.
It must be "${t}.stdout", "${t}.stderr", "${t}.all", "${t}.ipc", or "${t}.fd3", "${t}.fd4" (and so on).`);if(n>=r.length)throw new TypeError(`"${t}.${e}" is invalid: that file descriptor does not exist.
Please set the "stdio" option to ensure that file descriptor exists.`);return n==="all"?[1,2]:[n]},Fr=e=>{if(e==="all")return e;if(j.includes(e))return j.indexOf(e);let t=fu.exec(e);if(t!==null)return Number(t[1])},fu=/^fd(\d+)$/,uu=(e,t)=>e.map(r=>r===void 0?pu[t]:r),du=(0,Jo.debuglog)("execa").enabled?"full":"none",pu={lines:!1,buffer:!0,maxBuffer:1e3*1e3*100,verbose:du,stripFinalNewline:!0},Br=["lines","buffer","maxBuffer","verbose","stripFinalNewline"],ne=(e,t)=>t==="ipc"?e.at(-1):e[t];var Ie=({verbose:e},t)=>Nr(e,t)!=="none",ve=({verbose:e},t)=>!["none","short"].includes(Nr(e,t)),Xo=({verbose:e},t)=>{let r=Nr(e,t);return xt(r)?r:void 0},Nr=(e,t)=>t===void 0?mu(e):ne(e,t),mu=e=>e.find(t=>xt(t))??$t.findLast(t=>e.includes(t)),xt=e=>typeof e=="function",$t=["none","short","full"];var pi=require("node:util");var Qo=require("node:process"),ei=require("node:util"),ti=(e,t)=>{let r=[e,...t],n=r.join(" "),o=r.map(i=>Su(ri(i))).join(" ");return{command:n,escapedCommand:o}},Ze=e=>(0,ei.stripVTControlCharacters)(e).split(`
`).map(t=>ri(t)).join(`
`),ri=e=>e.replaceAll(yu,t=>hu(t)),hu=e=>{let t=bu[e];if(t!==void 0)return t;let r=e.codePointAt(0),n=r.toString(16);return r<=wu?`\\u${n.padStart(4,"0")}`:`\\U${n}`},gu=()=>{try{return new RegExp("\\p{Separator}|\\p{Other}","gu")}catch{return/[\s\u0000-\u001F\u007F-\u009F\u00AD]/g}},yu=gu(),bu={" ":" ","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},wu=65535,Su=e=>xu.test(e)?e:Qo.platform==="win32"?`"${e.replaceAll('"','""')}"`:`'${e.replaceAll("'","'\\''")}'`,xu=/^[\w./-]+$/;var jr=C(require("node:process"),1);function zr(){let{env:e}=jr.default,{TERM:t,TERM_PROGRAM:r}=e;return jr.default.platform!=="win32"?t!=="linux":!!e.WT_SESSION||!!e.TERMINUS_SUBLIME||e.ConEmuTask==="{cmd::Cmder}"||r==="Terminus-Sublime"||r==="vscode"||t==="xterm-256color"||t==="alacritty"||t==="rxvt-unicode"||t==="rxvt-unicode-256color"||e.TERMINAL_EMULATOR==="JetBrains-JediTerm"}var ni={circleQuestionMark:"(?)",questionMarkPrefix:"(?)",square:"\u2588",squareDarkShade:"\u2593",squareMediumShade:"\u2592",squareLightShade:"\u2591",squareTop:"\u2580",squareBottom:"\u2584",squareLeft:"\u258C",squareRight:"\u2590",squareCenter:"\u25A0",bullet:"\u25CF",dot:"\u2024",ellipsis:"\u2026",pointerSmall:"\u203A",triangleUp:"\u25B2",triangleUpSmall:"\u25B4",triangleDown:"\u25BC",triangleDownSmall:"\u25BE",triangleLeftSmall:"\u25C2",triangleRightSmall:"\u25B8",home:"\u2302",heart:"\u2665",musicNote:"\u266A",musicNoteBeamed:"\u266B",arrowUp:"\u2191",arrowDown:"\u2193",arrowLeft:"\u2190",arrowRight:"\u2192",arrowLeftRight:"\u2194",arrowUpDown:"\u2195",almostEqual:"\u2248",notEqual:"\u2260",lessOrEqual:"\u2264",greaterOrEqual:"\u2265",identical:"\u2261",infinity:"\u221E",subscriptZero:"\u2080",subscriptOne:"\u2081",subscriptTwo:"\u2082",subscriptThree:"\u2083",subscriptFour:"\u2084",subscriptFive:"\u2085",subscriptSix:"\u2086",subscriptSeven:"\u2087",subscriptEight:"\u2088",subscriptNine:"\u2089",oneHalf:"\xBD",oneThird:"\u2153",oneQuarter:"\xBC",oneFifth:"\u2155",oneSixth:"\u2159",oneEighth:"\u215B",twoThirds:"\u2154",twoFifths:"\u2156",threeQuarters:"\xBE",threeFifths:"\u2157",threeEighths:"\u215C",fourFifths:"\u2158",fiveSixths:"\u215A",fiveEighths:"\u215D",sevenEighths:"\u215E",line:"\u2500",lineBold:"\u2501",lineDouble:"\u2550",lineDashed0:"\u2504",lineDashed1:"\u2505",lineDashed2:"\u2508",lineDashed3:"\u2509",lineDashed4:"\u254C",lineDashed5:"\u254D",lineDashed6:"\u2574",lineDashed7:"\u2576",lineDashed8:"\u2578",lineDashed9:"\u257A",lineDashed10:"\u257C",lineDashed11:"\u257E",lineDashed12:"\u2212",lineDashed13:"\u2013",lineDashed14:"\u2010",lineDashed15:"\u2043",lineVertical:"\u2502",lineVerticalBold:"\u2503",lineVerticalDouble:"\u2551",lineVerticalDashed0:"\u2506",lineVerticalDashed1:"\u2507",lineVerticalDashed2:"\u250A",lineVerticalDashed3:"\u250B",lineVerticalDashed4:"\u254E",lineVerticalDashed5:"\u254F",lineVerticalDashed6:"\u2575",lineVerticalDashed7:"\u2577",lineVerticalDashed8:"\u2579",lineVerticalDashed9:"\u257B",lineVerticalDashed10:"\u257D",lineVerticalDashed11:"\u257F",lineDownLeft:"\u2510",lineDownLeftArc:"\u256E",lineDownBoldLeftBold:"\u2513",lineDownBoldLeft:"\u2512",lineDownLeftBold:"\u2511",lineDownDoubleLeftDouble:"\u2557",lineDownDoubleLeft:"\u2556",lineDownLeftDouble:"\u2555",lineDownRight:"\u250C",lineDownRightArc:"\u256D",lineDownBoldRightBold:"\u250F",lineDownBoldRight:"\u250E",lineDownRightBold:"\u250D",lineDownDoubleRightDouble:"\u2554",lineDownDoubleRight:"\u2553",lineDownRightDouble:"\u2552",lineUpLeft:"\u2518",lineUpLeftArc:"\u256F",lineUpBoldLeftBold:"\u251B",lineUpBoldLeft:"\u251A",lineUpLeftBold:"\u2519",lineUpDoubleLeftDouble:"\u255D",lineUpDoubleLeft:"\u255C",lineUpLeftDouble:"\u255B",lineUpRight:"\u2514",lineUpRightArc:"\u2570",lineUpBoldRightBold:"\u2517",lineUpBoldRight:"\u2516",lineUpRightBold:"\u2515",lineUpDoubleRightDouble:"\u255A",lineUpDoubleRight:"\u2559",lineUpRightDouble:"\u2558",lineUpDownLeft:"\u2524",lineUpBoldDownBoldLeftBold:"\u252B",lineUpBoldDownBoldLeft:"\u2528",lineUpDownLeftBold:"\u2525",lineUpBoldDownLeftBold:"\u2529",lineUpDownBoldLeftBold:"\u252A",lineUpDownBoldLeft:"\u2527",lineUpBoldDownLeft:"\u2526",lineUpDoubleDownDoubleLeftDouble:"\u2563",lineUpDoubleDownDoubleLeft:"\u2562",lineUpDownLeftDouble:"\u2561",lineUpDownRight:"\u251C",lineUpBoldDownBoldRightBold:"\u2523",lineUpBoldDownBoldRight:"\u2520",lineUpDownRightBold:"\u251D",lineUpBoldDownRightBold:"\u2521",lineUpDownBoldRightBold:"\u2522",lineUpDownBoldRight:"\u251F",lineUpBoldDownRight:"\u251E",lineUpDoubleDownDoubleRightDouble:"\u2560",lineUpDoubleDownDoubleRight:"\u255F",lineUpDownRightDouble:"\u255E",lineDownLeftRight:"\u252C",lineDownBoldLeftBoldRightBold:"\u2533",lineDownLeftBoldRightBold:"\u252F",lineDownBoldLeftRight:"\u2530",lineDownBoldLeftBoldRight:"\u2531",lineDownBoldLeftRightBold:"\u2532",lineDownLeftRightBold:"\u252E",lineDownLeftBoldRight:"\u252D",lineDownDoubleLeftDoubleRightDouble:"\u2566",lineDownDoubleLeftRight:"\u2565",lineDownLeftDoubleRightDouble:"\u2564",lineUpLeftRight:"\u2534",lineUpBoldLeftBoldRightBold:"\u253B",lineUpLeftBoldRightBold:"\u2537",lineUpBoldLeftRight:"\u2538",lineUpBoldLeftBoldRight:"\u2539",lineUpBoldLeftRightBold:"\u253A",lineUpLeftRightBold:"\u2536",lineUpLeftBoldRight:"\u2535",lineUpDoubleLeftDoubleRightDouble:"\u2569",lineUpDoubleLeftRight:"\u2568",lineUpLeftDoubleRightDouble:"\u2567",lineUpDownLeftRight:"\u253C",lineUpBoldDownBoldLeftBoldRightBold:"\u254B",lineUpDownBoldLeftBoldRightBold:"\u2548",lineUpBoldDownLeftBoldRightBold:"\u2547",lineUpBoldDownBoldLeftRightBold:"\u254A",lineUpBoldDownBoldLeftBoldRight:"\u2549",lineUpBoldDownLeftRight:"\u2540",lineUpDownBoldLeftRight:"\u2541",lineUpDownLeftBoldRight:"\u253D",lineUpDownLeftRightBold:"\u253E",lineUpBoldDownBoldLeftRight:"\u2542",lineUpDownLeftBoldRightBold:"\u253F",lineUpBoldDownLeftBoldRight:"\u2543",lineUpBoldDownLeftRightBold:"\u2544",lineUpDownBoldLeftBoldRight:"\u2545",lineUpDownBoldLeftRightBold:"\u2546",lineUpDoubleDownDoubleLeftDoubleRightDouble:"\u256C",lineUpDoubleDownDoubleLeftRight:"\u256B",lineUpDownLeftDoubleRightDouble:"\u256A",lineCross:"\u2573",lineBackslash:"\u2572",lineSlash:"\u2571"},oi={tick:"\u2714",info:"\u2139",warning:"\u26A0",cross:"\u2718",squareSmall:"\u25FB",squareSmallFilled:"\u25FC",circle:"\u25EF",circleFilled:"\u25C9",circleDotted:"\u25CC",circleDouble:"\u25CE",circleCircle:"\u24DE",circleCross:"\u24E7",circlePipe:"\u24BE",radioOn:"\u25C9",radioOff:"\u25EF",checkboxOn:"\u2612",checkboxOff:"\u2610",checkboxCircleOn:"\u24E7",checkboxCircleOff:"\u24BE",pointer:"\u276F",triangleUpOutline:"\u25B3",triangleLeft:"\u25C0",triangleRight:"\u25B6",lozenge:"\u25C6",lozengeOutline:"\u25C7",hamburger:"\u2630",smiley:"\u32E1",mustache:"\u0DF4",star:"\u2605",play:"\u25B6",nodejs:"\u2B22",oneSeventh:"\u2150",oneNinth:"\u2151",oneTenth:"\u2152"},$u={tick:"\u221A",info:"i",warning:"\u203C",cross:"\xD7",squareSmall:"\u25A1",squareSmallFilled:"\u25A0",circle:"( )",circleFilled:"(*)",circleDotted:"( )",circleDouble:"( )",circleCircle:"(\u25CB)",circleCross:"(\xD7)",circlePipe:"(\u2502)",radioOn:"(*)",radioOff:"( )",checkboxOn:"[\xD7]",checkboxOff:"[ ]",checkboxCircleOn:"(\xD7)",checkboxCircleOff:"( )",pointer:">",triangleUpOutline:"\u2206",triangleLeft:"\u25C4",triangleRight:"\u25BA",lozenge:"\u2666",lozengeOutline:"\u25CA",hamburger:"\u2261",smiley:"\u263A",mustache:"\u250C\u2500\u2510",star:"\u2736",play:"\u25BA",nodejs:"\u2666",oneSeventh:"1/7",oneNinth:"1/9",oneTenth:"1/10"},Eu={...ni,...oi},Tu={...ni,...$u},Au=zr(),ku=Au?Eu:Tu,Et=ku,Ny=Object.entries(oi);var ii=C(require("node:tty"),1),Ou=ii.default?.WriteStream?.prototype?.hasColors?.()??!1,S=(e,t)=>{if(!Ou)return o=>o;let r=`\x1B[${e}m`,n=`\x1B[${t}m`;return o=>{let i=o+"",s=i.indexOf(n);if(s===-1)return r+i+n;let a=r,c=0;for(;s!==-1;)a+=i.slice(c,s)+r,c=s+n.length,s=i.indexOf(n,c);return a+=i.slice(c)+n,a}},zy=S(0,0),si=S(1,22),Vy=S(2,22),Wy=S(3,23),Gy=S(4,24),Hy=S(53,55),Yy=S(7,27),qy=S(8,28),Ky=S(9,29),Jy=S(30,39),Zy=S(31,39),Xy=S(32,39),Qy=S(33,39),eb=S(34,39),tb=S(35,39),rb=S(36,39),nb=S(37,39),Tt=S(90,39),ob=S(40,49),ib=S(41,49),sb=S(42,49),ab=S(43,49),cb=S(44,49),lb=S(45,49),fb=S(46,49),ub=S(47,49),db=S(100,49),ai=S(91,39),pb=S(92,39),ci=S(93,39),mb=S(94,39),hb=S(95,39),gb=S(96,39),yb=S(97,39),bb=S(101,49),wb=S(102,49),Sb=S(103,49),xb=S(104,49),$b=S(105,49),Eb=S(106,49),Tb=S(107,49);var ui=({type:e,message:t,timestamp:r,piped:n,commandId:o,result:{failed:i=!1}={},options:{reject:s=!0}})=>{let a=Iu(r),c=vu[e]({failed:i,reject:s,piped:n}),l=Ru[e]({reject:s});return`${Tt(`[${a}]`)} ${Tt(`[${o}]`)} ${l(c)} ${l(t)}`},Iu=e=>`${At(e.getHours(),2)}:${At(e.getMinutes(),2)}:${At(e.getSeconds(),2)}.${At(e.getMilliseconds(),3)}`,At=(e,t)=>String(e).padStart(t,"0"),li=({failed:e,reject:t})=>e?t?Et.cross:Et.warning:Et.tick,vu={command:({piped:e})=>e?"|":"$",output:()=>" ",ipc:()=>"*",error:li,duration:li},fi=e=>e,Ru={command:()=>si,output:()=>fi,ipc:()=>fi,error:({reject:e})=>e?ai:ci,duration:()=>Tt};var di=(e,t,r)=>{let n=Xo(t,r);return e.map(({verboseLine:o,verboseObject:i})=>Cu(o,i,n)).filter(o=>o!==void 0).map(o=>Du(o)).join("")},Cu=(e,t,r)=>{if(r===void 0)return e;let n=r(e,t);if(typeof n=="string")return n},Du=e=>e.endsWith(`
`)?e:`${e}
`;var J=({type:e,verboseMessage:t,fdNumber:r,verboseInfo:n,result:o})=>{let i=Pu({type:e,result:o,verboseInfo:n}),s=Mu(t,i),a=di(s,n,r);a!==""&&console.warn(a.slice(0,-1))},Pu=({type:e,result:t,verboseInfo:{escapedCommand:r,commandId:n,rawOptions:{piped:o=!1,...i}}})=>({type:e,escapedCommand:r,commandId:`${n}`,timestamp:new Date,piped:o,result:t,options:i}),Mu=(e,t)=>e.split(`
`).map(r=>Uu({...t,message:r})),Uu=e=>({verboseLine:ui(e),verboseObject:e}),kt=e=>{let t=typeof e=="string"?e:(0,pi.inspect)(e);return Ze(t).replaceAll("	"," ".repeat(_u))},_u=2;var mi=(e,t)=>{Ie(t)&&J({type:"command",verboseMessage:e,verboseInfo:t})};var hi=(e,t,r)=>{Bu(e);let n=Lu(e);return{verbose:e,escapedCommand:t,commandId:n,rawOptions:r}},Lu=e=>Ie({verbose:e})?Fu++:void 0,Fu=0n,Bu=e=>{for(let t of e){if(t===!1)throw new TypeError(`The "verbose: false" option was renamed to "verbose: 'none'".`);if(t===!0)throw new TypeError(`The "verbose: true" option was renamed to "verbose: 'short'".`);if(!$t.includes(t)&&!xt(t)){let r=$t.map(n=>`'${n}'`).join(", ");throw new TypeError(`The "verbose" option must not be ${t}. Allowed values are: ${r} or a function.`)}}};var Vr=require("node:process"),Ot=()=>Vr.hrtime.bigint(),Wr=e=>Number(Vr.hrtime.bigint()-e)/1e6;var It=(e,t,r)=>{let n=Ot(),{command:o,escapedCommand:i}=ti(e,t),s=Lr(r,"verbose"),a=hi(s,i,{...r});return mi(i,a),{command:o,escapedCommand:i,startTime:n,verboseInfo:a}};var va=C(require("node:path"),1),hn=C(require("node:process"),1),Ra=C(ns(),1);var Xe=C(require("node:process"),1),ce=C(require("node:path"),1);function Rt(e={}){let{env:t=process.env,platform:r=process.platform}=e;return r!=="win32"?"PATH":Object.keys(t).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"}var os=require("node:util"),tn=require("node:child_process"),en=C(require("node:path"),1),is=require("node:url"),c0=(0,os.promisify)(tn.execFile);function Ct(e){return e instanceof URL?(0,is.fileURLToPath)(e):e}function ss(e){return{*[Symbol.iterator](){let t=en.default.resolve(Ct(e)),r;for(;r!==t;)yield t,r=t,t=en.default.resolve(t,"..")}}}var l0=10*1024*1024;var dd=({cwd:e=Xe.default.cwd(),path:t=Xe.default.env[Rt()],preferLocal:r=!0,execPath:n=Xe.default.execPath,addExecPath:o=!0}={})=>{let i=ce.default.resolve(Ct(e)),s=[],a=t.split(ce.default.delimiter);return r&&pd(s,a,i),o&&md(s,a,n,i),t===""||t===ce.default.delimiter?`${s.join(ce.default.delimiter)}${t}`:[...s,t].join(ce.default.delimiter)},pd=(e,t,r)=>{for(let n of ss(r)){let o=ce.default.join(n,"node_modules/.bin");t.includes(o)||e.push(o)}},md=(e,t,r,n)=>{let o=ce.default.resolve(n,Ct(r),"..");t.includes(o)||e.push(o)},as=({env:e=Xe.default.env,...t}={})=>{e={...e};let r=Rt({env:e});return t.path=e[r],e[r]=dd(t),e};var Es=require("node:timers/promises");var cs=(e,t,r)=>{let n=r?De:oe,o=e instanceof G?{}:{cause:e};return new n(t,o)},G=class extends Error{},ls=(e,t)=>{Object.defineProperty(e.prototype,"name",{value:t,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,us,{value:!0,writable:!1,enumerable:!1,configurable:!1})},fs=e=>Dt(e)&&us in e,us=Symbol("isExecaError"),Dt=e=>Object.prototype.toString.call(e)==="[object Error]",oe=class extends Error{};ls(oe,oe.name);var De=class extends Error{};ls(De,De.name);var Pe=require("node:os");var ys=require("node:os");var ds=()=>{let e=ms-ps+1;return Array.from({length:e},hd)},hd=(e,t)=>({name:`SIGRT${t+1}`,number:ps+t,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}),ps=34,ms=64;var gs=require("node:os");var hs=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];var rn=()=>{let e=ds();return[...hs,...e].map(gd)},gd=({name:e,number:t,description:r,action:n,forced:o=!1,standard:i})=>{let{signals:{[e]:s}}=gs.constants,a=s!==void 0;return{name:e,number:a?s:t,description:r,supported:a,action:n,forced:o,standard:i}};var yd=()=>{let e=rn();return Object.fromEntries(e.map(bd))},bd=({name:e,number:t,description:r,supported:n,action:o,forced:i,standard:s})=>[e,{name:e,number:t,description:r,supported:n,action:o,forced:i,standard:s}],bs=yd(),wd=()=>{let e=rn(),t=65,r=Array.from({length:t},(n,o)=>Sd(o,e));return Object.assign({},...r)},Sd=(e,t)=>{let r=xd(e,t);if(r===void 0)return{};let{name:n,description:o,supported:i,action:s,forced:a,standard:c}=r;return{[e]:{name:n,number:e,description:o,supported:i,action:s,forced:a,standard:c}}},xd=(e,t)=>{let r=t.find(({name:n})=>ys.constants.signals[n]===e);return r!==void 0?r:t.find(n=>n.number===e)},$0=wd();var Ss=e=>{let t="option `killSignal`";if(e===0)throw new TypeError(`Invalid ${t}: 0 cannot be used.`);return $s(e,t)},xs=e=>e===0?e:$s(e,"`subprocess.kill()`'s argument"),$s=(e,t)=>{if(Number.isInteger(e))return $d(e,t);if(typeof e=="string")return Td(e,t);throw new TypeError(`Invalid ${t} ${String(e)}: it must be a string or an integer.
${nn()}`)},$d=(e,t)=>{if(ws.has(e))return ws.get(e);throw new TypeError(`Invalid ${t} ${e}: this signal integer does not exist.
${nn()}`)},Ed=()=>new Map(Object.entries(Pe.constants.signals).reverse().map(([e,t])=>[t,e])),ws=Ed(),Td=(e,t)=>{if(e in Pe.constants.signals)return e;throw e.toUpperCase()in Pe.constants.signals?new TypeError(`Invalid ${t} '${e}': please rename it to '${e.toUpperCase()}'.`):new TypeError(`Invalid ${t} '${e}': this signal name does not exist.
${nn()}`)},nn=()=>`Available signal names: ${Ad()}.
Available signal numbers: ${kd()}.`,Ad=()=>Object.keys(Pe.constants.signals).sort().map(e=>`'${e}'`).join(", "),kd=()=>[...new Set(Object.values(Pe.constants.signals).sort((e,t)=>e-t))].join(", "),Pt=e=>bs[e].description;var Ts=e=>{if(e===!1)return e;if(e===!0)return Od;if(!Number.isFinite(e)||e<0)throw new TypeError(`Expected the \`forceKillAfterDelay\` option to be a non-negative integer, got \`${e}\` (${typeof e})`);return e},Od=1e3*5,As=({kill:e,options:{forceKillAfterDelay:t,killSignal:r},onInternalError:n,context:o,controller:i},s,a)=>{let{signal:c,error:l}=Id(s,a,r);vd(l,n);let f=e(c);return Rd({kill:e,signal:c,forceKillAfterDelay:t,killSignal:r,killResult:f,context:o,controller:i}),f},Id=(e,t,r)=>{let[n=r,o]=Dt(e)?[void 0,e]:[e,t];if(typeof n!="string"&&!Number.isInteger(n))throw new TypeError(`The first argument must be an error instance or a signal name string/integer: ${String(n)}`);if(o!==void 0&&!Dt(o))throw new TypeError(`The second argument is optional. If specified, it must be an error instance: ${o}`);return{signal:xs(n),error:o}},vd=(e,t)=>{e!==void 0&&t.reject(e)},Rd=async({kill:e,signal:t,forceKillAfterDelay:r,killSignal:n,killResult:o,context:i,controller:s})=>{t===n&&o&&on({kill:e,forceKillAfterDelay:r,context:i,controllerSignal:s.signal})},on=async({kill:e,forceKillAfterDelay:t,context:r,controllerSignal:n})=>{if(t!==!1)try{await(0,Es.setTimeout)(t,void 0,{signal:n}),e("SIGKILL")&&(r.isForcefullyTerminated??=!0)}catch{}};var ks=require("node:events"),Mt=async(e,t)=>{e.aborted||await(0,ks.once)(e,"abort",{signal:t})};var Os=({cancelSignal:e})=>{if(e!==void 0&&Object.prototype.toString.call(e)!=="[object AbortSignal]")throw new Error(`The \`cancelSignal\` option must be an AbortSignal: ${String(e)}`)},Is=({subprocess:e,cancelSignal:t,gracefulCancel:r,context:n,controller:o})=>t===void 0||r?[]:[Cd(e,t,n,o)],Cd=async(e,t,r,{signal:n})=>{throw await Mt(t,n),r.terminationReason??="cancel",e.kill(),t.reason};var aa=require("node:timers/promises");var ia=require("node:util");var Me=({methodName:e,isSubprocess:t,ipc:r,isConnected:n})=>{Dd(e,t,r),sn(e,t,n)},Dd=(e,t,r)=>{if(!r)throw new Error(`${H(e,t)} can only be used if the \`ipc\` option is \`true\`.`)},sn=(e,t,r)=>{if(!r)throw new Error(`${H(e,t)} cannot be used: the ${le(t)} has already exited or disconnected.`)},vs=e=>{throw new Error(`${H("getOneMessage",e)} could not complete: the ${le(e)} exited or disconnected.`)},Rs=e=>{throw new Error(`${H("sendMessage",e)} failed: the ${le(e)} is sending a message too, instead of listening to incoming messages.
This can be fixed by both sending a message and listening to incoming messages at the same time:

const [receivedMessage] = await Promise.all([
	${H("getOneMessage",e)},
	${H("sendMessage",e,"message, {strict: true}")},
]);`)},Ut=(e,t)=>new Error(`${H("sendMessage",t)} failed when sending an acknowledgment response to the ${le(t)}.`,{cause:e}),Cs=e=>{throw new Error(`${H("sendMessage",e)} failed: the ${le(e)} is not listening to incoming messages.`)},Ds=e=>{throw new Error(`${H("sendMessage",e)} failed: the ${le(e)} exited without listening to incoming messages.`)},Ps=()=>new Error(`\`cancelSignal\` aborted: the ${le(!0)} disconnected.`),Ms=()=>{throw new Error("`getCancelSignal()` cannot be used without setting the `cancelSignal` subprocess option.")},Us=({error:e,methodName:t,isSubprocess:r})=>{if(e.code==="EPIPE")throw new Error(`${H(t,r)} cannot be used: the ${le(r)} is disconnecting.`,{cause:e})},_s=({error:e,methodName:t,isSubprocess:r,message:n})=>{if(Pd(e))throw new Error(`${H(t,r)}'s argument type is invalid: the message cannot be serialized: ${String(n)}.`,{cause:e})},Pd=({code:e,message:t})=>Md.has(e)||Ud.some(r=>t.includes(r)),Md=new Set(["ERR_MISSING_ARGS","ERR_INVALID_ARG_TYPE"]),Ud=["could not be cloned","circular structure","call stack size exceeded"],H=(e,t,r="")=>e==="cancelSignal"?"`cancelSignal`'s `controller.abort()`":`${_d(t)}${e}(${r})`,_d=e=>e?"":"subprocess.",le=e=>e?"parent process":"subprocess",Ue=e=>{e.connected&&e.disconnect()};var Z=()=>{let e={},t=new Promise((r,n)=>{Object.assign(e,{resolve:r,reject:n})});return Object.assign(t,e)};var Lt=(e,t="stdin")=>{let{options:n,fileDescriptors:o}=X.get(e),i=Ls(o,t,!0),s=e.stdio[i];if(s===null)throw new TypeError(Fs(i,t,n,!0));return s},_e=(e,t="stdout")=>{let{options:n,fileDescriptors:o}=X.get(e),i=Ls(o,t,!1),s=i==="all"?e.all:e.stdio[i];if(s==null)throw new TypeError(Fs(i,t,n,!1));return s},X=new WeakMap,Ls=(e,t,r)=>{let n=Ld(t,r);return Fd(n,t,r,e),n},Ld=(e,t)=>{let r=Fr(e);if(r!==void 0)return r;let{validOptions:n,defaultValue:o}=t?{validOptions:'"stdin"',defaultValue:"stdin"}:{validOptions:'"stdout", "stderr", "all"',defaultValue:"stdout"};throw new TypeError(`"${Qe(t)}" must not be "${e}".
It must be ${n} or "fd3", "fd4" (and so on).
It is optional and defaults to "${o}".`)},Fd=(e,t,r,n)=>{let o=n[Bs(e)];if(o===void 0)throw new TypeError(`"${Qe(r)}" must not be ${t}. That file descriptor does not exist.
Please set the "stdio" option to ensure that file descriptor exists.`);if(o.direction==="input"&&!r)throw new TypeError(`"${Qe(r)}" must not be ${t}. It must be a readable stream, not writable.`);if(o.direction!=="input"&&r)throw new TypeError(`"${Qe(r)}" must not be ${t}. It must be a writable stream, not readable.`)},Fs=(e,t,r,n)=>{if(e==="all"&&!r.all)return`The "all" option must be true to use "from: 'all'".`;let{optionName:o,optionValue:i}=Bd(e,r);return`The "${o}: ${_t(i)}" option is incompatible with using "${Qe(n)}: ${_t(t)}".
Please set this option with "pipe" instead.`},Bd=(e,{stdin:t,stdout:r,stderr:n,stdio:o})=>{let i=Bs(e);return i===0&&t!==void 0?{optionName:"stdin",optionValue:t}:i===1&&r!==void 0?{optionName:"stdout",optionValue:r}:i===2&&n!==void 0?{optionName:"stderr",optionValue:n}:{optionName:`stdio[${i}]`,optionValue:o[i]}},Bs=e=>e==="all"?1:e,Qe=e=>e?"to":"from",_t=e=>typeof e=="string"?`'${e}'`:typeof e=="number"?`${e}`:"Stream";var Xs=require("node:events");var Ns=require("node:events"),ye=(e,t,r)=>{let n=e.getMaxListeners();n===0||n===Number.POSITIVE_INFINITY||(e.setMaxListeners(n+t),(0,Ns.addAbortListener)(r,()=>{e.setMaxListeners(e.getMaxListeners()-t)}))};var Zs=require("node:events");var Vs=require("node:events"),Ws=require("node:timers/promises");var Ft=(e,t)=>{t&&an(e)},an=e=>{e.refCounted()},Bt=(e,t)=>{t&&cn(e)},cn=e=>{e.unrefCounted()},js=(e,t)=>{t&&(cn(e),cn(e))},zs=(e,t)=>{t&&(an(e),an(e))};var Gs=async({anyProcess:e,channel:t,isSubprocess:r,ipcEmitter:n},o)=>{if(qs(o)||Js(o))return;Nt.has(e)||Nt.set(e,[]);let i=Nt.get(e);if(i.push(o),!(i.length>1))for(;i.length>0;){await Ks(e,n,o),await Ws.scheduler.yield();let s=await Ys({wrappedMessage:i[0],anyProcess:e,channel:t,isSubprocess:r,ipcEmitter:n});i.shift(),n.emit("message",s),n.emit("message:done")}},Hs=async({anyProcess:e,channel:t,isSubprocess:r,ipcEmitter:n,boundOnMessage:o})=>{ln();let i=Nt.get(e);for(;i?.length>0;)await(0,Vs.once)(n,"message:done");e.removeListener("message",o),zs(t,r),n.connected=!1,n.emit("disconnect")},Nt=new WeakMap;var fe=(e,t,r)=>{if(jt.has(e))return jt.get(e);let n=new Zs.EventEmitter;return n.connected=!0,jt.set(e,n),Nd({ipcEmitter:n,anyProcess:e,channel:t,isSubprocess:r}),n},jt=new WeakMap,Nd=({ipcEmitter:e,anyProcess:t,channel:r,isSubprocess:n})=>{let o=Gs.bind(void 0,{anyProcess:t,channel:r,isSubprocess:n,ipcEmitter:e});t.on("message",o),t.once("disconnect",Hs.bind(void 0,{anyProcess:t,channel:r,isSubprocess:n,ipcEmitter:e,boundOnMessage:o})),js(r,n)},zt=e=>{let t=jt.get(e);return t===void 0?e.channel!==null:t.connected};var Qs=({anyProcess:e,channel:t,isSubprocess:r,message:n,strict:o})=>{if(!o)return n;let i=fe(e,t,r),s=Gt(e,i);return{id:jd++,type:Wt,message:n,hasListeners:s}},jd=0n,ea=(e,t)=>{if(!(t?.type!==Wt||t.hasListeners))for(let{id:r}of e)r!==void 0&&Vt[r].resolve({isDeadlock:!0,hasListeners:!1})},Ys=async({wrappedMessage:e,anyProcess:t,channel:r,isSubprocess:n,ipcEmitter:o})=>{if(e?.type!==Wt||!t.connected)return e;let{id:i,message:s}=e,a={id:i,type:ra,message:Gt(t,o)};try{await Ht({anyProcess:t,channel:r,isSubprocess:n,ipc:!0},a)}catch(c){o.emit("strict:error",c)}return s},qs=e=>{if(e?.type!==ra)return!1;let{id:t,message:r}=e;return Vt[t]?.resolve({isDeadlock:!1,hasListeners:r}),!0},ta=async(e,t,r)=>{if(e?.type!==Wt)return;let n=Z();Vt[e.id]=n;let o=new AbortController;try{let{isDeadlock:i,hasListeners:s}=await Promise.race([n,zd(t,r,o)]);i&&Rs(r),s||Cs(r)}finally{o.abort(),delete Vt[e.id]}},Vt={},zd=async(e,t,{signal:r})=>{ye(e,1,r),await(0,Xs.once)(e,"disconnect",{signal:r}),Ds(t)},Wt="execa:ipc:request",ra="execa:ipc:response";var na=(e,t,r)=>{et.has(e)||et.set(e,new Set);let n=et.get(e),o=Z(),i=r?t.id:void 0,s={onMessageSent:o,id:i};return n.add(s),{outgoingMessages:n,outgoingMessage:s}},oa=({outgoingMessages:e,outgoingMessage:t})=>{e.delete(t),t.onMessageSent.resolve()},Ks=async(e,t,r)=>{for(;!Gt(e,t)&&et.get(e)?.size>0;){let n=[...et.get(e)];ea(n,r),await Promise.all(n.map(({onMessageSent:o})=>o))}},et=new WeakMap,Gt=(e,t)=>t.listenerCount("message")>Vd(e),Vd=e=>X.has(e)&&!ne(X.get(e).options.buffer,"ipc")?1:0;var Ht=({anyProcess:e,channel:t,isSubprocess:r,ipc:n},o,{strict:i=!1}={})=>{let s="sendMessage";return Me({methodName:s,isSubprocess:r,ipc:n,isConnected:e.connected}),Wd({anyProcess:e,channel:t,methodName:s,isSubprocess:r,message:o,strict:i})},Wd=async({anyProcess:e,channel:t,methodName:r,isSubprocess:n,message:o,strict:i})=>{let s=Qs({anyProcess:e,channel:t,isSubprocess:n,message:o,strict:i}),a=na(e,s,i);try{await un({anyProcess:e,methodName:r,isSubprocess:n,wrappedMessage:s,message:o})}catch(c){throw Ue(e),c}finally{oa(a)}},un=async({anyProcess:e,methodName:t,isSubprocess:r,wrappedMessage:n,message:o})=>{let i=Gd(e);try{await Promise.all([ta(n,e,r),i(n)])}catch(s){throw Us({error:s,methodName:t,isSubprocess:r}),_s({error:s,methodName:t,isSubprocess:r,message:o}),s}},Gd=e=>{if(fn.has(e))return fn.get(e);let t=(0,ia.promisify)(e.send.bind(e));return fn.set(e,t),t},fn=new WeakMap;var ca=(e,t)=>{let r="cancelSignal";return sn(r,!1,e.connected),un({anyProcess:e,methodName:r,isSubprocess:!1,wrappedMessage:{type:fa,message:t},message:t})},la=async({anyProcess:e,channel:t,isSubprocess:r,ipc:n})=>(await Hd({anyProcess:e,channel:t,isSubprocess:r,ipc:n}),dn.signal),Hd=async({anyProcess:e,channel:t,isSubprocess:r,ipc:n})=>{if(!sa){if(sa=!0,!n){Ms();return}if(t===null){ln();return}fe(e,t,r),await aa.scheduler.yield()}},sa=!1,Js=e=>e?.type!==fa?!1:(dn.abort(e.message),!0),fa="execa:ipc:cancel",ln=()=>{dn.abort(Ps())},dn=new AbortController;var ua=({gracefulCancel:e,cancelSignal:t,ipc:r,serialization:n})=>{if(e){if(t===void 0)throw new Error("The `cancelSignal` option must be defined when setting the `gracefulCancel` option.");if(!r)throw new Error("The `ipc` option cannot be false when setting the `gracefulCancel` option.");if(n==="json")throw new Error("The `serialization` option cannot be 'json' when setting the `gracefulCancel` option.")}},da=({subprocess:e,cancelSignal:t,gracefulCancel:r,forceKillAfterDelay:n,context:o,controller:i})=>r?[Yd({subprocess:e,cancelSignal:t,forceKillAfterDelay:n,context:o,controller:i})]:[],Yd=async({subprocess:e,cancelSignal:t,forceKillAfterDelay:r,context:n,controller:{signal:o}})=>{await Mt(t,o);let i=qd(t);throw await ca(e,i),on({kill:e.kill,forceKillAfterDelay:r,context:n,controllerSignal:o}),n.terminationReason??="gracefulCancel",t.reason},qd=({reason:e})=>{if(!(e instanceof DOMException))return e;let t=new Error(e.message);return Object.defineProperty(t,"stack",{value:e.stack,enumerable:!1,configurable:!0,writable:!0}),t};var pa=require("node:timers/promises");var ma=({timeout:e})=>{if(e!==void 0&&(!Number.isFinite(e)||e<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`)},ha=(e,t,r,n)=>t===0||t===void 0?[]:[Kd(e,t,r,n)],Kd=async(e,t,r,{signal:n})=>{throw await(0,pa.setTimeout)(t,void 0,{signal:n}),r.terminationReason??="timeout",e.kill(),new G};var Yt=require("node:process"),pn=C(require("node:path"),1);var ga=({options:e})=>{if(e.node===!1)throw new TypeError('The "node" option cannot be false with `execaNode()`.');return{options:{...e,node:!0}}},ya=(e,t,{node:r=!1,nodePath:n=Yt.execPath,nodeOptions:o=Yt.execArgv.filter(c=>!c.startsWith("--inspect")),cwd:i,execPath:s,...a})=>{if(s!==void 0)throw new TypeError('The "execPath" option has been removed. Please use the "nodePath" option instead.');let c=Oe(n,'The "nodePath" option'),l=pn.default.resolve(i,c),f={...a,nodePath:l,node:r,cwd:i};if(!r)return[e,t,f];if(pn.default.basename(e,".exe")==="node")throw new TypeError('When the "node" option is true, the first argument does not need to be "node".');return[l,[...o,e,...t],{ipc:!0,...f,shell:!1}]};var ba=require("node:v8"),wa=({ipcInput:e,ipc:t,serialization:r})=>{if(e!==void 0){if(!t)throw new Error("The `ipcInput` option cannot be set unless the `ipc` option is `true`.");Xd[r](e)}},Jd=e=>{try{(0,ba.serialize)(e)}catch(t){throw new Error("The `ipcInput` option is not serializable with a structured clone.",{cause:t})}},Zd=e=>{try{JSON.stringify(e)}catch(t){throw new Error("The `ipcInput` option is not serializable with JSON.",{cause:t})}},Xd={advanced:Jd,json:Zd},Sa=async(e,t)=>{t!==void 0&&await e.sendMessage(t)};var $a=({encoding:e})=>{if(mn.has(e))return;let t=ep(e);if(t!==void 0)throw new TypeError(`Invalid option \`encoding: ${qt(e)}\`.
Please rename it to ${qt(t)}.`);let r=[...mn].map(n=>qt(n)).join(", ");throw new TypeError(`Invalid option \`encoding: ${qt(e)}\`.
Please rename it to one of: ${r}.`)},Qd=new Set(["utf8","utf16le"]),N=new Set(["buffer","hex","base64","base64url","latin1","ascii"]),mn=new Set([...Qd,...N]),ep=e=>{if(e===null)return"buffer";if(typeof e!="string")return;let t=e.toLowerCase();if(t in xa)return xa[t];if(mn.has(t))return t},xa={"utf-8":"utf8","utf-16le":"utf16le","ucs-2":"utf16le",ucs2:"utf16le",binary:"latin1"},qt=e=>typeof e=="string"?`"${e}"`:String(e);var Ea=require("node:fs"),Ta=C(require("node:path"),1),Aa=C(require("node:process"),1);var ka=(e=Oa())=>{let t=Oe(e,'The "cwd" option');return Ta.default.resolve(t)},Oa=()=>{try{return Aa.default.cwd()}catch(e){throw e.message=`The current directory does not exist.
${e.message}`,e}},Ia=(e,t)=>{if(t===Oa())return e;let r;try{r=(0,Ea.statSync)(t)}catch(n){return`The "cwd" option is invalid: ${t}.
${n.message}
${e}`}return r.isDirectory()?e:`The "cwd" option is not a directory: ${t}.
${e}`};var Kt=(e,t,r)=>{r.cwd=ka(r.cwd);let[n,o,i]=ya(e,t,r),{command:s,args:a,options:c}=Ra.default._parse(n,o,i),l=Zo(c),f=tp(l);return ma(f),$a(f),wa(f),Os(f),ua(f),f.shell=Ur(f.shell),f.env=rp(f),f.killSignal=Ss(f.killSignal),f.forceKillAfterDelay=Ts(f.forceKillAfterDelay),f.lines=f.lines.map((u,d)=>u&&!N.has(f.encoding)&&f.buffer[d]),hn.default.platform==="win32"&&va.default.basename(s,".exe")==="cmd"&&a.unshift("/q"),{file:s,commandArguments:a,options:f}},tp=({extendEnv:e=!0,preferLocal:t=!1,cwd:r,localDir:n=r,encoding:o="utf8",reject:i=!0,cleanup:s=!0,all:a=!1,windowsHide:c=!0,killSignal:l="SIGTERM",forceKillAfterDelay:f=!0,gracefulCancel:u=!1,ipcInput:d,ipc:p=d!==void 0||u,serialization:h="advanced",...b})=>({...b,extendEnv:e,preferLocal:t,cwd:r,localDirectory:n,encoding:o,reject:i,cleanup:s,all:a,windowsHide:c,killSignal:l,forceKillAfterDelay:f,gracefulCancel:u,ipcInput:d,ipc:p,serialization:h}),rp=({env:e,extendEnv:t,preferLocal:r,node:n,localDirectory:o,nodePath:i})=>{let s=t?{...hn.default.env,...e}:e;return r||n?as({env:s,cwd:o,execPath:i,preferLocal:r,addExecPath:n}):s};var Jt=(e,t,r)=>r.shell&&t.length>0?[[e,...t].join(" "),[],r]:[e,t,r];var Xa=require("node:util");function Le(e){if(typeof e=="string")return np(e);if(!(ArrayBuffer.isView(e)&&e.BYTES_PER_ELEMENT===1))throw new Error("Input must be a string or a Uint8Array");return op(e)}var np=e=>e.at(-1)===Ca?e.slice(0,e.at(-2)===Da?-2:-1):e,op=e=>e.at(-1)===ip?e.subarray(0,e.at(-2)===sp?-2:-1):e,Ca=`
`,ip=Ca.codePointAt(0),Da="\r",sp=Da.codePointAt(0);var Wa=require("node:events"),Ga=require("node:stream/promises");function Y(e,{checkOpen:t=!0}={}){return e!==null&&typeof e=="object"&&(e.writable||e.readable||!t||e.writable===void 0&&e.readable===void 0)&&typeof e.pipe=="function"}function gn(e,{checkOpen:t=!0}={}){return Y(e,{checkOpen:t})&&(e.writable||!t)&&typeof e.write=="function"&&typeof e.end=="function"&&typeof e.writable=="boolean"&&typeof e.writableObjectMode=="boolean"&&typeof e.destroy=="function"&&typeof e.destroyed=="boolean"}function be(e,{checkOpen:t=!0}={}){return Y(e,{checkOpen:t})&&(e.readable||!t)&&typeof e.read=="function"&&typeof e.readable=="boolean"&&typeof e.readableObjectMode=="boolean"&&typeof e.destroy=="function"&&typeof e.destroyed=="boolean"}function yn(e,t){return gn(e,t)&&be(e,t)}var ap=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype),bn=class{#t;#r;#e=!1;#n=void 0;constructor(t,r){this.#t=t,this.#r=r}next(){let t=()=>this.#i();return this.#n=this.#n?this.#n.then(t,t):t(),this.#n}return(t){let r=()=>this.#o(t);return this.#n?this.#n.then(r,r):r()}async#i(){if(this.#e)return{done:!0,value:void 0};let t;try{t=await this.#t.read()}catch(r){throw this.#n=void 0,this.#e=!0,this.#t.releaseLock(),r}return t.done&&(this.#n=void 0,this.#e=!0,this.#t.releaseLock()),t}async#o(t){if(this.#e)return{done:!0,value:t};if(this.#e=!0,!this.#r){let r=this.#t.cancel(t);return this.#t.releaseLock(),await r,{done:!0,value:t}}return this.#t.releaseLock(),{done:!0,value:t}}},wn=Symbol();function Pa(){return this[wn].next()}Object.defineProperty(Pa,"name",{value:"next"});function Ma(e){return this[wn].return(e)}Object.defineProperty(Ma,"name",{value:"return"});var cp=Object.create(ap,{next:{enumerable:!0,configurable:!0,writable:!0,value:Pa},return:{enumerable:!0,configurable:!0,writable:!0,value:Ma}});function Sn({preventCancel:e=!1}={}){let t=this.getReader(),r=new bn(t,e),n=Object.create(cp);return n[wn]=r,n}var Ua=e=>{if(be(e,{checkOpen:!1})&&tt.on!==void 0)return fp(e);if(typeof e?.[Symbol.asyncIterator]=="function")return e;if(lp.call(e)==="[object ReadableStream]")return Sn.call(e);throw new TypeError("The first argument must be a Readable, a ReadableStream, or an async iterable.")},{toString:lp}=Object.prototype,fp=async function*(e){let t=new AbortController,r={};up(e,t,r);try{for await(let[n]of tt.on(e,"data",{signal:t.signal}))yield n}catch(n){if(r.error!==void 0)throw r.error;if(!t.signal.aborted)throw n}finally{e.destroy()}},up=async(e,t,r)=>{try{await tt.finished(e,{cleanup:!0,readable:!0,writable:!1,error:!1})}catch(n){r.error=n}finally{t.abort()}},tt={};var Fe=async(e,{init:t,convertChunk:r,getSize:n,truncateChunk:o,addChunk:i,getFinalChunk:s,finalize:a},{maxBuffer:c=Number.POSITIVE_INFINITY}={})=>{let l=Ua(e),f=t();f.length=0;try{for await(let u of l){let d=pp(u),p=r[d](u,f);Fa({convertedChunk:p,state:f,getSize:n,truncateChunk:o,addChunk:i,maxBuffer:c})}return dp({state:f,convertChunk:r,getSize:n,truncateChunk:o,addChunk:i,getFinalChunk:s,maxBuffer:c}),a(f)}catch(u){let d=typeof u=="object"&&u!==null?u:new Error(u);throw d.bufferedData=a(f),d}},dp=({state:e,getSize:t,truncateChunk:r,addChunk:n,getFinalChunk:o,maxBuffer:i})=>{let s=o(e);s!==void 0&&Fa({convertedChunk:s,state:e,getSize:t,truncateChunk:r,addChunk:n,maxBuffer:i})},Fa=({convertedChunk:e,state:t,getSize:r,truncateChunk:n,addChunk:o,maxBuffer:i})=>{let s=r(e),a=t.length+s;if(a<=i){_a(e,t,o,a);return}let c=n(e,i-t.length);throw c!==void 0&&_a(c,t,o,i),new Q},_a=(e,t,r,n)=>{t.contents=r(e,t,n),t.length=n},pp=e=>{let t=typeof e;if(t==="string")return"string";if(t!=="object"||e===null)return"others";if(globalThis.Buffer?.isBuffer(e))return"buffer";let r=La.call(e);return r==="[object ArrayBuffer]"?"arrayBuffer":r==="[object DataView]"?"dataView":Number.isInteger(e.byteLength)&&Number.isInteger(e.byteOffset)&&La.call(e.buffer)==="[object ArrayBuffer]"?"typedArray":"others"},{toString:La}=Object.prototype,Q=class extends Error{name="MaxBufferError";constructor(){super("maxBuffer exceeded")}};var ie=e=>e,rt=()=>{},Zt=({contents:e})=>e,Xt=e=>{throw new Error(`Streams in object mode are not supported: ${String(e)}`)},Qt=e=>e.length;async function er(e,t){return Fe(e,yp,t)}var mp=()=>({contents:[]}),hp=()=>1,gp=(e,{contents:t})=>(t.push(e),t),yp={init:mp,convertChunk:{string:ie,buffer:ie,arrayBuffer:ie,dataView:ie,typedArray:ie,others:ie},getSize:hp,truncateChunk:rt,addChunk:gp,getFinalChunk:rt,finalize:Zt};async function tr(e,t){return Fe(e,kp,t)}var bp=()=>({contents:new ArrayBuffer(0)}),wp=e=>Sp.encode(e),Sp=new TextEncoder,Ba=e=>new Uint8Array(e),Na=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),xp=(e,t)=>e.slice(0,t),$p=(e,{contents:t,length:r},n)=>{let o=Va()?Tp(t,n):Ep(t,n);return new Uint8Array(o).set(e,r),o},Ep=(e,t)=>{if(t<=e.byteLength)return e;let r=new ArrayBuffer(za(t));return new Uint8Array(r).set(new Uint8Array(e),0),r},Tp=(e,t)=>{if(t<=e.maxByteLength)return e.resize(t),e;let r=new ArrayBuffer(t,{maxByteLength:za(t)});return new Uint8Array(r).set(new Uint8Array(e),0),r},za=e=>ja**Math.ceil(Math.log(e)/Math.log(ja)),ja=2,Ap=({contents:e,length:t})=>Va()?e:e.slice(0,t),Va=()=>"resize"in ArrayBuffer.prototype,kp={init:bp,convertChunk:{string:wp,buffer:Ba,arrayBuffer:Ba,dataView:Na,typedArray:Na,others:Xt},getSize:Qt,truncateChunk:xp,addChunk:$p,getFinalChunk:rt,finalize:Ap};async function nr(e,t){return Fe(e,Cp,t)}var Op=()=>({contents:"",textDecoder:new TextDecoder}),rr=(e,{textDecoder:t})=>t.decode(e,{stream:!0}),Ip=(e,{contents:t})=>t+e,vp=(e,t)=>e.slice(0,t),Rp=({textDecoder:e})=>{let t=e.decode();return t===""?void 0:t},Cp={init:Op,convertChunk:{string:ie,buffer:rr,arrayBuffer:rr,dataView:rr,typedArray:rr,others:Xt},getSize:Qt,truncateChunk:vp,addChunk:Ip,getFinalChunk:Rp,finalize:Zt};Object.assign(tt,{on:Wa.on,finished:Ga.finished});var Ha=({error:e,stream:t,readableObjectMode:r,lines:n,encoding:o,fdNumber:i})=>{if(!(e instanceof Q))throw e;if(i==="all")return e;let s=Dp(r,n,o);throw e.maxBufferInfo={fdNumber:i,unit:s},t.destroy(),e},Dp=(e,t,r)=>e?"objects":t?"lines":r==="buffer"?"bytes":"characters",Ya=(e,t,r)=>{if(t.length!==r)return;let n=new Q;throw n.maxBufferInfo={fdNumber:"ipc"},n},qa=(e,t)=>{let{streamName:r,threshold:n,unit:o}=Pp(e,t);return`Command's ${r} was larger than ${n} ${o}`},Pp=(e,t)=>{if(e?.maxBufferInfo===void 0)return{streamName:"output",threshold:t[1],unit:"bytes"};let{maxBufferInfo:{fdNumber:r,unit:n}}=e;delete e.maxBufferInfo;let o=ne(t,r);return r==="ipc"?{streamName:"IPC output",threshold:o,unit:"messages"}:{streamName:St(r),threshold:o,unit:n}},Ka=(e,t,r)=>e?.code==="ENOBUFS"&&t!==null&&t.some(n=>n!==null&&n.length>or(r)),Ja=(e,t,r)=>{if(!t)return e;let n=or(r);return e.length>n?e.slice(0,n):e},or=([,e])=>e;var Qa=({stdio:e,all:t,ipcOutput:r,originalError:n,signal:o,signalDescription:i,exitCode:s,escapedCommand:a,timedOut:c,isCanceled:l,isGracefullyCanceled:f,isMaxBuffer:u,isForcefullyTerminated:d,forceKillAfterDelay:p,killSignal:h,maxBuffer:b,timeout:m,cwd:g})=>{let y=n?.code,x=Mp({originalError:n,timedOut:c,timeout:m,isMaxBuffer:u,maxBuffer:b,errorCode:y,signal:o,signalDescription:i,exitCode:s,isCanceled:l,isGracefullyCanceled:f,isForcefullyTerminated:d,forceKillAfterDelay:p,killSignal:h}),$=_p(n,g),k=$===void 0?"":`
${$}`,v=`${x}: ${a}${k}`,L=t===void 0?[e[2],e[1]]:[t],P=[v,...L,...e.slice(3),r.map(U=>Lp(U)).join(`
`)].map(U=>Ze(Le(Fp(U)))).filter(Boolean).join(`

`);return{originalMessage:$,shortMessage:v,message:P}},Mp=({originalError:e,timedOut:t,timeout:r,isMaxBuffer:n,maxBuffer:o,errorCode:i,signal:s,signalDescription:a,exitCode:c,isCanceled:l,isGracefullyCanceled:f,isForcefullyTerminated:u,forceKillAfterDelay:d,killSignal:p})=>{let h=Up(u,d);return t?`Command timed out after ${r} milliseconds${h}`:f?s===void 0?`Command was gracefully canceled with exit code ${c}`:u?`Command was gracefully canceled${h}`:`Command was gracefully canceled with ${s} (${a})`:l?`Command was canceled${h}`:n?`${qa(e,o)}${h}`:i!==void 0?`Command failed with ${i}${h}`:u?`Command was killed with ${p} (${Pt(p)})${h}`:s!==void 0?`Command was killed with ${s} (${a})`:c!==void 0?`Command failed with exit code ${c}`:"Command failed"},Up=(e,t)=>e?` and was forcefully terminated after ${t} milliseconds`:"",_p=(e,t)=>{if(e instanceof G)return;let r=fs(e)?e.originalMessage:String(e?.message??e),n=Ze(Ia(r,t));return n===""?void 0:n},Lp=e=>typeof e=="string"?e:(0,Xa.inspect)(e),Fp=e=>Array.isArray(e)?e.map(t=>Le(Za(t))).filter(Boolean).join(`
`):Za(e),Za=e=>typeof e=="string"?e:D(e)?yt(e):"";var ir=({command:e,escapedCommand:t,stdio:r,all:n,ipcOutput:o,options:{cwd:i},startTime:s})=>ec({command:e,escapedCommand:t,cwd:i,durationMs:Wr(s),failed:!1,timedOut:!1,isCanceled:!1,isGracefullyCanceled:!1,isTerminated:!1,isMaxBuffer:!1,isForcefullyTerminated:!1,exitCode:0,stdout:r[1],stderr:r[2],all:n,stdio:r,ipcOutput:o,pipedFrom:[]}),Be=({error:e,command:t,escapedCommand:r,fileDescriptors:n,options:o,startTime:i,isSync:s})=>nt({error:e,command:t,escapedCommand:r,startTime:i,timedOut:!1,isCanceled:!1,isGracefullyCanceled:!1,isMaxBuffer:!1,isForcefullyTerminated:!1,stdio:Array.from({length:n.length}),ipcOutput:[],options:o,isSync:s}),nt=({error:e,command:t,escapedCommand:r,startTime:n,timedOut:o,isCanceled:i,isGracefullyCanceled:s,isMaxBuffer:a,isForcefullyTerminated:c,exitCode:l,signal:f,stdio:u,all:d,ipcOutput:p,options:{timeoutDuration:h,timeout:b=h,forceKillAfterDelay:m,killSignal:g,cwd:y,maxBuffer:x},isSync:$})=>{let{exitCode:k,signal:v,signalDescription:L}=Np(l,f),{originalMessage:P,shortMessage:U,message:me}=Qa({stdio:u,all:d,ipcOutput:p,originalError:e,signal:v,signalDescription:L,exitCode:k,escapedCommand:r,timedOut:o,isCanceled:i,isGracefullyCanceled:s,isMaxBuffer:a,isForcefullyTerminated:c,forceKillAfterDelay:m,killSignal:g,maxBuffer:x,timeout:b,cwd:y}),_=cs(e,me,$);return Object.assign(_,Bp({error:_,command:t,escapedCommand:r,startTime:n,timedOut:o,isCanceled:i,isGracefullyCanceled:s,isMaxBuffer:a,isForcefullyTerminated:c,exitCode:k,signal:v,signalDescription:L,stdio:u,all:d,ipcOutput:p,cwd:y,originalMessage:P,shortMessage:U})),_},Bp=({error:e,command:t,escapedCommand:r,startTime:n,timedOut:o,isCanceled:i,isGracefullyCanceled:s,isMaxBuffer:a,isForcefullyTerminated:c,exitCode:l,signal:f,signalDescription:u,stdio:d,all:p,ipcOutput:h,cwd:b,originalMessage:m,shortMessage:g})=>ec({shortMessage:g,originalMessage:m,command:t,escapedCommand:r,cwd:b,durationMs:Wr(n),failed:!0,timedOut:o,isCanceled:i,isGracefullyCanceled:s,isTerminated:f!==void 0,isMaxBuffer:a,isForcefullyTerminated:c,exitCode:l,signal:f,signalDescription:u,code:e.cause?.code,stdout:d[1],stderr:d[2],all:p,stdio:d,ipcOutput:h,pipedFrom:[]}),ec=e=>Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0)),Np=(e,t)=>{let r=e===null?void 0:e,n=t===null?void 0:t,o=n===void 0?void 0:Pt(t);return{exitCode:r,signal:n,signalDescription:o}};var tc=e=>Number.isFinite(e)?e:0;function jp(e){return{days:Math.trunc(e/864e5),hours:Math.trunc(e/36e5%24),minutes:Math.trunc(e/6e4%60),seconds:Math.trunc(e/1e3%60),milliseconds:Math.trunc(e%1e3),microseconds:Math.trunc(tc(e*1e3)%1e3),nanoseconds:Math.trunc(tc(e*1e6)%1e3)}}function zp(e){return{days:e/86400000n,hours:e/3600000n%24n,minutes:e/60000n%60n,seconds:e/1000n%60n,milliseconds:e%1000n,microseconds:0n,nanoseconds:0n}}function xn(e){switch(typeof e){case"number":{if(Number.isFinite(e))return jp(e);break}case"bigint":return zp(e)}throw new TypeError("Expected a finite number or bigint")}var Vp=e=>e===0||e===0n,Wp=(e,t)=>t===1||t===1n?e:`${e}s`,Gp=1e-7,Hp=24n*60n*60n*1000n;function $n(e,t){let r=typeof e=="bigint";if(!r&&!Number.isFinite(e))throw new TypeError("Expected a finite number or bigint");t={...t};let n=e<0?"-":"";e=e<0?-e:e,t.colonNotation&&(t.compact=!1,t.formatSubMilliseconds=!1,t.separateMilliseconds=!1,t.verbose=!1),t.compact&&(t.unitCount=1,t.secondsDecimalDigits=0,t.millisecondsDecimalDigits=0);let o=[],i=(f,u)=>{let d=Math.floor(f*10**u+Gp);return(Math.round(d)/10**u).toFixed(u)},s=(f,u,d,p)=>{if(!((o.length===0||!t.colonNotation)&&Vp(f)&&!(t.colonNotation&&d==="m"))){if(p??=String(f),t.colonNotation){let h=p.includes(".")?p.split(".")[0].length:p.length,b=o.length>0?2:1;p="0".repeat(Math.max(0,b-h))+p}else p+=t.verbose?" "+Wp(u,f):d;o.push(p)}},a=xn(e),c=BigInt(a.days);if(t.hideYearAndDays?s(BigInt(c)*24n+BigInt(a.hours),"hour","h"):(t.hideYear?s(c,"day","d"):(s(c/365n,"year","y"),s(c%365n,"day","d")),s(Number(a.hours),"hour","h")),s(Number(a.minutes),"minute","m"),!t.hideSeconds)if(t.separateMilliseconds||t.formatSubMilliseconds||!t.colonNotation&&e<1e3){let f=Number(a.seconds),u=Number(a.milliseconds),d=Number(a.microseconds),p=Number(a.nanoseconds);if(s(f,"second","s"),t.formatSubMilliseconds)s(u,"millisecond","ms"),s(d,"microsecond","\xB5s"),s(p,"nanosecond","ns");else{let h=u+d/1e3+p/1e6,b=typeof t.millisecondsDecimalDigits=="number"?t.millisecondsDecimalDigits:0,m=h>=1?Math.round(h):Math.ceil(h),g=b?h.toFixed(b):m;s(Number.parseFloat(g),"millisecond","ms",g)}}else{let f=(r?Number(e%Hp):e)/1e3%60,u=typeof t.secondsDecimalDigits=="number"?t.secondsDecimalDigits:1,d=i(f,u),p=t.keepDecimalsOnWholeSeconds?d:d.replace(/\.0+$/,"");s(Number.parseFloat(p),"second","s",p)}if(o.length===0)return n+"0"+(t.verbose?" milliseconds":"ms");let l=t.colonNotation?":":" ";return typeof t.unitCount=="number"&&(o=o.slice(0,Math.max(t.unitCount,1))),n+o.join(l)}var rc=(e,t)=>{e.failed&&J({type:"error",verboseMessage:e.shortMessage,verboseInfo:t,result:e})};var nc=(e,t)=>{Ie(t)&&(rc(e,t),Yp(e,t))},Yp=(e,t)=>{let r=`(done in ${$n(e.durationMs)})`;J({type:"duration",verboseMessage:r,verboseInfo:t,result:e})};var Ne=(e,t,{reject:r})=>{if(nc(e,t),e.failed&&r)throw e;return e};var Rn=require("node:fs");var sc=(e,t)=>we(e)?"asyncGenerator":lc(e)?"generator":sr(e)?"fileUrl":Xp(e)?"filePath":tm(e)?"webStream":Y(e,{checkOpen:!1})?"native":D(e)?"uint8Array":rm(e)?"asyncIterable":nm(e)?"iterable":An(e)?ac({transform:e},t):Zp(e)?qp(e,t):"native",qp=(e,t)=>yn(e.transform,{checkOpen:!1})?Kp(e,t):An(e.transform)?ac(e,t):Jp(e,t),Kp=(e,t)=>(cc(e,t,"Duplex stream"),"duplex"),ac=(e,t)=>(cc(e,t,"web TransformStream"),"webTransform"),cc=({final:e,binary:t,objectMode:r},n,o)=>{oc(e,`${n}.final`,o),oc(t,`${n}.binary`,o),En(r,`${n}.objectMode`)},oc=(e,t,r)=>{if(e!==void 0)throw new TypeError(`The \`${t}\` option can only be defined when using a generator, not a ${r}.`)},Jp=({transform:e,final:t,binary:r,objectMode:n},o)=>{if(e!==void 0&&!ic(e))throw new TypeError(`The \`${o}.transform\` option must be a generator, a Duplex stream or a web TransformStream.`);if(yn(t,{checkOpen:!1}))throw new TypeError(`The \`${o}.final\` option must not be a Duplex stream.`);if(An(t))throw new TypeError(`The \`${o}.final\` option must not be a web TransformStream.`);if(t!==void 0&&!ic(t))throw new TypeError(`The \`${o}.final\` option must be a generator.`);return En(r,`${o}.binary`),En(n,`${o}.objectMode`),we(e)||we(t)?"asyncGenerator":"generator"},En=(e,t)=>{if(e!==void 0&&typeof e!="boolean")throw new TypeError(`The \`${t}\` option must use a boolean.`)},ic=e=>we(e)||lc(e),we=e=>Object.prototype.toString.call(e)==="[object AsyncGeneratorFunction]",lc=e=>Object.prototype.toString.call(e)==="[object GeneratorFunction]",Zp=e=>R(e)&&(e.transform!==void 0||e.final!==void 0),sr=e=>Object.prototype.toString.call(e)==="[object URL]",fc=e=>sr(e)&&e.protocol!=="file:",Xp=e=>R(e)&&Object.keys(e).length>0&&Object.keys(e).every(t=>Qp.has(t))&&Tn(e.file),Qp=new Set(["file","append"]),Tn=e=>typeof e=="string",uc=(e,t)=>e==="native"&&typeof t=="string"&&!em.has(t),em=new Set(["ipc","ignore","inherit","overlapped","pipe"]),dc=e=>Object.prototype.toString.call(e)==="[object ReadableStream]",ar=e=>Object.prototype.toString.call(e)==="[object WritableStream]",tm=e=>dc(e)||ar(e),An=e=>dc(e?.readable)&&ar(e?.writable),rm=e=>pc(e)&&typeof e[Symbol.asyncIterator]=="function",nm=e=>pc(e)&&typeof e[Symbol.iterator]=="function",pc=e=>typeof e=="object"&&e!==null,z=new Set(["generator","asyncGenerator","duplex","webTransform"]),cr=new Set(["fileUrl","filePath","fileNumber"]),kn=new Set(["fileUrl","filePath"]),mc=new Set([...kn,"webStream","nodeStream"]),hc=new Set(["webTransform","duplex"]),ue={generator:"a generator",asyncGenerator:"an async generator",fileUrl:"a file URL",filePath:"a file path string",fileNumber:"a file descriptor number",webStream:"a web stream",nodeStream:"a Node.js stream",webTransform:"a web TransformStream",duplex:"a Duplex stream",native:"any value",iterable:"an iterable",asyncIterable:"an async iterable",string:"a string",uint8Array:"a Uint8Array"};var On=(e,t,r,n)=>n==="output"?om(e,t,r):im(e,t,r),om=(e,t,r)=>{let n=t!==0&&r[t-1].value.readableObjectMode;return{writableObjectMode:n,readableObjectMode:e??n}},im=(e,t,r)=>{let n=t===0?e===!0:r[t-1].value.readableObjectMode,o=t!==r.length-1&&(e??n);return{writableObjectMode:n,readableObjectMode:o}},gc=(e,t)=>{let r=e.findLast(({type:n})=>z.has(n));return r===void 0?!1:t==="input"?r.value.writableObjectMode:r.value.readableObjectMode};var yc=(e,t,r,n)=>[...e.filter(({type:o})=>!z.has(o)),...sm(e,t,r,n)],sm=(e,t,r,{encoding:n})=>{let o=e.filter(({type:s})=>z.has(s)),i=Array.from({length:o.length});for(let[s,a]of Object.entries(o))i[s]=am({stdioItem:a,index:Number(s),newTransforms:i,optionName:t,direction:r,encoding:n});return um(i,r)},am=({stdioItem:e,stdioItem:{type:t},index:r,newTransforms:n,optionName:o,direction:i,encoding:s})=>t==="duplex"?cm({stdioItem:e,optionName:o}):t==="webTransform"?lm({stdioItem:e,index:r,newTransforms:n,direction:i}):fm({stdioItem:e,index:r,newTransforms:n,direction:i,encoding:s}),cm=({stdioItem:e,stdioItem:{value:{transform:t,transform:{writableObjectMode:r,readableObjectMode:n},objectMode:o=n}},optionName:i})=>{if(o&&!n)throw new TypeError(`The \`${i}.objectMode\` option can only be \`true\` if \`new Duplex({objectMode: true})\` is used.`);if(!o&&n)throw new TypeError(`The \`${i}.objectMode\` option cannot be \`false\` if \`new Duplex({objectMode: true})\` is used.`);return{...e,value:{transform:t,writableObjectMode:r,readableObjectMode:n}}},lm=({stdioItem:e,stdioItem:{value:t},index:r,newTransforms:n,direction:o})=>{let{transform:i,objectMode:s}=R(t)?t:{transform:t},{writableObjectMode:a,readableObjectMode:c}=On(s,r,n,o);return{...e,value:{transform:i,writableObjectMode:a,readableObjectMode:c}}},fm=({stdioItem:e,stdioItem:{value:t},index:r,newTransforms:n,direction:o,encoding:i})=>{let{transform:s,final:a,binary:c=!1,preserveNewlines:l=!1,objectMode:f}=R(t)?t:{transform:t},u=c||N.has(i),{writableObjectMode:d,readableObjectMode:p}=On(f,r,n,o);return{...e,value:{transform:s,final:a,binary:u,preserveNewlines:l,writableObjectMode:d,readableObjectMode:p}}},um=(e,t)=>t==="input"?e.reverse():e;var lr=C(require("node:process"),1);var bc=(e,t,r)=>{let n=e.map(o=>dm(o,t));if(n.includes("input")&&n.includes("output"))throw new TypeError(`The \`${r}\` option must not be an array of both readable and writable values.`);return n.find(Boolean)??hm},dm=({type:e,value:t},r)=>pm[r]??wc[e](t),pm=["input","output","output"],je=()=>{},In=()=>"input",wc={generator:je,asyncGenerator:je,fileUrl:je,filePath:je,iterable:In,asyncIterable:In,uint8Array:In,webStream:e=>ar(e)?"output":"input",nodeStream(e){return be(e,{checkOpen:!1})?gn(e,{checkOpen:!1})?void 0:"input":"output"},webTransform:je,duplex:je,native(e){let t=mm(e);if(t!==void 0)return t;if(Y(e,{checkOpen:!1}))return wc.nodeStream(e)}},mm=e=>{if([0,lr.default.stdin].includes(e))return"input";if([1,2,lr.default.stdout,lr.default.stderr].includes(e))return"output"},hm="output";var Sc=(e,t)=>t&&!e.includes("ipc")?[...e,"ipc"]:e;var xc=({stdio:e,ipc:t,buffer:r,...n},o,i)=>{let s=gm(e,n).map((a,c)=>$c(a,c));return i?bm(s,r,o):Sc(s,t)},gm=(e,t)=>{if(e===void 0)return j.map(n=>t[n]);if(ym(t))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${j.map(n=>`\`${n}\``).join(", ")}`);if(typeof e=="string")return[e,e,e];if(!Array.isArray(e))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof e}\``);let r=Math.max(e.length,j.length);return Array.from({length:r},(n,o)=>e[o])},ym=e=>j.some(t=>e[t]!==void 0),$c=(e,t)=>Array.isArray(e)?e.map(r=>$c(r,t)):e??(t>=j.length?"ignore":"pipe"),bm=(e,t,r)=>e.map((n,o)=>!t[o]&&o!==0&&!ve(r,o)&&wm(n)?"ignore":n),wm=e=>e==="pipe"||Array.isArray(e)&&e.every(t=>t==="pipe");var Tc=require("node:fs"),Ac=C(require("node:tty"),1);var kc=({stdioItem:e,stdioItem:{type:t},isStdioArray:r,fdNumber:n,direction:o,isSync:i})=>!r||t!=="native"?e:i?Sm({stdioItem:e,fdNumber:n,direction:o}):Em({stdioItem:e,fdNumber:n}),Sm=({stdioItem:e,stdioItem:{value:t,optionName:r},fdNumber:n,direction:o})=>{let i=xm({value:t,optionName:r,fdNumber:n,direction:o});if(i!==void 0)return i;if(Y(t,{checkOpen:!1}))throw new TypeError(`The \`${r}: Stream\` option cannot both be an array and include a stream with synchronous methods.`);return e},xm=({value:e,optionName:t,fdNumber:r,direction:n})=>{let o=$m(e,r);if(o!==void 0){if(n==="output")return{type:"fileNumber",value:o,optionName:t};if(Ac.default.isatty(o))throw new TypeError(`The \`${t}: ${_t(e)}\` option is invalid: it cannot be a TTY with synchronous methods.`);return{type:"uint8Array",value:re((0,Tc.readFileSync)(o)),optionName:t}}},$m=(e,t)=>{if(e==="inherit")return t;if(typeof e=="number")return e;let r=wt.indexOf(e);if(r!==-1)return r},Em=({stdioItem:e,stdioItem:{value:t,optionName:r},fdNumber:n})=>t==="inherit"?{type:"nodeStream",value:Ec(n,t,r),optionName:r}:typeof t=="number"?{type:"nodeStream",value:Ec(t,t,r),optionName:r}:Y(t,{checkOpen:!1})?{type:"nodeStream",value:t,optionName:r}:e,Ec=(e,t,r)=>{let n=wt[e];if(n===void 0)throw new TypeError(`The \`${r}: ${t}\` option is invalid: no such standard stream.`);return n};var Oc=({input:e,inputFile:t},r)=>r===0?[...Tm(e),...km(t)]:[],Tm=e=>e===void 0?[]:[{type:Am(e),value:e,optionName:"input"}],Am=e=>{if(be(e,{checkOpen:!1}))return"nodeStream";if(typeof e=="string")return"string";if(D(e))return"uint8Array";throw new Error("The `input` option must be a string, a Uint8Array or a Node.js Readable stream.")},km=e=>e===void 0?[]:[{...Om(e),optionName:"inputFile"}],Om=e=>{if(sr(e))return{type:"fileUrl",value:e};if(Tn(e))return{type:"filePath",value:{file:e}};throw new Error("The `inputFile` option must be a file path string or a file URL.")};var Ic=e=>e.filter((t,r)=>e.every((n,o)=>t.value!==n.value||r>=o||t.type==="generator"||t.type==="asyncGenerator")),vc=({stdioItem:{type:e,value:t,optionName:r},direction:n,fileDescriptors:o,isSync:i})=>{let s=Im(o,e);if(s.length!==0){if(i){vm({otherStdioItems:s,type:e,value:t,optionName:r,direction:n});return}if(mc.has(e))return Rc({otherStdioItems:s,type:e,value:t,optionName:r,direction:n});hc.has(e)&&Cm({otherStdioItems:s,type:e,value:t,optionName:r})}},Im=(e,t)=>e.flatMap(({direction:r,stdioItems:n})=>n.filter(o=>o.type===t).map((o=>({...o,direction:r})))),vm=({otherStdioItems:e,type:t,value:r,optionName:n,direction:o})=>{kn.has(t)&&Rc({otherStdioItems:e,type:t,value:r,optionName:n,direction:o})},Rc=({otherStdioItems:e,type:t,value:r,optionName:n,direction:o})=>{let i=e.filter(a=>Rm(a,r));if(i.length===0)return;let s=i.find(a=>a.direction!==o);return Cc(s,n,t),o==="output"?i[0].stream:void 0},Rm=({type:e,value:t},r)=>e==="filePath"?t.file===r.file:e==="fileUrl"?t.href===r.href:t===r,Cm=({otherStdioItems:e,type:t,value:r,optionName:n})=>{let o=e.find(({value:{transform:i}})=>i===r.transform);Cc(o,n,t)},Cc=(e,t,r)=>{if(e!==void 0)throw new TypeError(`The \`${e.optionName}\` and \`${t}\` options must not target ${ue[r]} that is the same.`)};var fr=(e,t,r,n)=>{let i=xc(t,r,n).map((a,c)=>Dm({stdioOption:a,fdNumber:c,options:t,isSync:n})),s=Nm({initialFileDescriptors:i,addProperties:e,options:t,isSync:n});return t.stdio=s.map(({stdioItems:a})=>Vm(a)),s},Dm=({stdioOption:e,fdNumber:t,options:r,isSync:n})=>{let o=St(t),{stdioItems:i,isStdioArray:s}=Pm({stdioOption:e,fdNumber:t,options:r,optionName:o}),a=bc(i,t,o),c=i.map(u=>kc({stdioItem:u,isStdioArray:s,fdNumber:t,direction:a,isSync:n})),l=yc(c,o,a,r),f=gc(l,a);return Bm(l,f),{direction:a,objectMode:f,stdioItems:l}},Pm=({stdioOption:e,fdNumber:t,options:r,optionName:n})=>{let i=[...(Array.isArray(e)?e:[e]).map(c=>Mm(c,n)),...Oc(r,t)],s=Ic(i),a=s.length>1;return Um(s,a,n),Lm(s),{stdioItems:s,isStdioArray:a}},Mm=(e,t)=>({type:sc(e,t),value:e,optionName:t}),Um=(e,t,r)=>{if(e.length===0)throw new TypeError(`The \`${r}\` option must not be an empty array.`);if(t){for(let{value:n,optionName:o}of e)if(_m.has(n))throw new Error(`The \`${o}\` option must not include \`${n}\`.`)}},_m=new Set(["ignore","ipc"]),Lm=e=>{for(let t of e)Fm(t)},Fm=({type:e,value:t,optionName:r})=>{if(fc(t))throw new TypeError(`The \`${r}: URL\` option must use the \`file:\` scheme.
For example, you can use the \`pathToFileURL()\` method of the \`url\` core module.`);if(uc(e,t))throw new TypeError(`The \`${r}: { file: '...' }\` option must be used instead of \`${r}: '...'\`.`)},Bm=(e,t)=>{if(!t)return;let r=e.find(({type:n})=>cr.has(n));if(r!==void 0)throw new TypeError(`The \`${r.optionName}\` option cannot use both files and transforms in objectMode.`)},Nm=({initialFileDescriptors:e,addProperties:t,options:r,isSync:n})=>{let o=[];try{for(let i of e)o.push(jm({fileDescriptor:i,fileDescriptors:o,addProperties:t,options:r,isSync:n}));return o}catch(i){throw vn(o),i}},jm=({fileDescriptor:{direction:e,objectMode:t,stdioItems:r},fileDescriptors:n,addProperties:o,options:i,isSync:s})=>{let a=r.map(c=>zm({stdioItem:c,addProperties:o,direction:e,options:i,fileDescriptors:n,isSync:s}));return{direction:e,objectMode:t,stdioItems:a}},zm=({stdioItem:e,addProperties:t,direction:r,options:n,fileDescriptors:o,isSync:i})=>{let s=vc({stdioItem:e,direction:r,fileDescriptors:o,isSync:i});return s!==void 0?{...e,stream:s}:{...e,...t[r][e.type](e,n)}},vn=e=>{for(let{stdioItems:t}of e)for(let{stream:r}of t)r!==void 0&&!W(r)&&r.destroy()},Vm=e=>{if(e.length>1)return e.some(({value:n})=>n==="overlapped")?"overlapped":"pipe";let[{type:t,value:r}]=e;return t==="native"?r:"pipe"};var Pc=(e,t)=>fr(Gm,e,t,!0),ee=({type:e,optionName:t})=>{Mc(t,ue[e])},Wm=({optionName:e,value:t})=>((t==="ipc"||t==="overlapped")&&Mc(e,`"${t}"`),{}),Mc=(e,t)=>{throw new TypeError(`The \`${e}\` option cannot be ${t} with synchronous methods.`)},Dc={generator(){},asyncGenerator:ee,webStream:ee,nodeStream:ee,webTransform:ee,duplex:ee,asyncIterable:ee,native:Wm},Gm={input:{...Dc,fileUrl:({value:e})=>({contents:[re((0,Rn.readFileSync)(e))]}),filePath:({value:{file:e}})=>({contents:[re((0,Rn.readFileSync)(e))]}),fileNumber:ee,iterable:({value:e})=>({contents:[...e]}),string:({value:e})=>({contents:[e]}),uint8Array:({value:e})=>({contents:[e]})},output:{...Dc,fileUrl:({value:e})=>({path:e}),filePath:({value:{file:e,append:t}})=>({path:e,append:t}),fileNumber:({value:e})=>({path:e}),iterable:ee,string:ee,uint8Array:ee}};var se=(e,{stripFinalNewline:t},r)=>Cn(t,r)&&e!==void 0&&!Array.isArray(e)?Le(e):e,Cn=(e,t)=>t==="all"?e[1]||e[2]:e[t];var it=require("node:stream");var ur=(e,t,r,n)=>e||r?void 0:_c(t,n),Pn=(e,t,r)=>r?e.flatMap(n=>Uc(n,t)):Uc(e,t),Uc=(e,t)=>{let{transform:r,final:n}=_c(t,{});return[...r(e),...n()]},_c=(e,t)=>(t.previousChunks="",{transform:Hm.bind(void 0,t,e),final:qm.bind(void 0,t)}),Hm=function*(e,t,r){if(typeof r!="string"){yield r;return}let{previousChunks:n}=e,o=-1;for(let i=0;i<r.length;i+=1)if(r[i]===`
`){let s=Ym(r,i,t,e),a=r.slice(o+1,i+1-s);n.length>0&&(a=Dn(n,a),n=""),yield a,o=i}o!==r.length-1&&(n=Dn(n,r.slice(o+1))),e.previousChunks=n},Ym=(e,t,r,n)=>r?0:(n.isWindowsNewline=t!==0&&e[t-1]==="\r",n.isWindowsNewline?2:1),qm=function*({previousChunks:e}){e.length>0&&(yield e)},Lc=({binary:e,preserveNewlines:t,readableObjectMode:r,state:n})=>e||t||r?void 0:{transform:Km.bind(void 0,n)},Km=function*({isWindowsNewline:e=!1},t){let{unixNewline:r,windowsNewline:n,LF:o,concatBytes:i}=typeof t=="string"?Jm:Xm;if(t.at(-1)===o){yield t;return}yield i(t,e?n:r)},Dn=(e,t)=>`${e}${t}`,Jm={windowsNewline:`\r
`,unixNewline:`
`,LF:`
`,concatBytes:Dn},Zm=(e,t)=>{let r=new Uint8Array(e.length+t.length);return r.set(e,0),r.set(t,e.length),r},Xm={windowsNewline:new Uint8Array([13,10]),unixNewline:new Uint8Array([10]),LF:10,concatBytes:Zm};var Fc=require("node:buffer");var Bc=(e,t)=>e?void 0:Qm.bind(void 0,t),Qm=function*(e,t){if(typeof t!="string"&&!D(t)&&!Fc.Buffer.isBuffer(t))throw new TypeError(`The \`${e}\` option's transform must use "objectMode: true" to receive as input: ${typeof t}.`);yield t},Nc=(e,t)=>e?eh.bind(void 0,t):th.bind(void 0,t),eh=function*(e,t){jc(e,t),yield t},th=function*(e,t){if(jc(e,t),typeof t!="string"&&!D(t))throw new TypeError(`The \`${e}\` option's function must yield a string or an Uint8Array, not ${typeof t}.`);yield t},jc=(e,t)=>{if(t==null)throw new TypeError(`The \`${e}\` option's function must not call \`yield ${t}\`.
Instead, \`yield\` should either be called with a value, or not be called at all. For example:
  if (condition) { yield value; }`)};var zc=require("node:buffer"),Vc=require("node:string_decoder");var dr=(e,t,r)=>{if(r)return;if(e)return{transform:rh.bind(void 0,new TextEncoder)};let n=new Vc.StringDecoder(t);return{transform:nh.bind(void 0,n),final:oh.bind(void 0,n)}},rh=function*(e,t){zc.Buffer.isBuffer(t)?yield re(t):typeof t=="string"?yield e.encode(t):yield t},nh=function*(e,t){yield D(t)?e.write(t):t},oh=function*(e){let t=e.end();t!==""&&(yield t)};var Mn=require("node:util"),Un=(0,Mn.callbackify)(async(e,t,r,n)=>{t.currentIterable=e(...r);try{for await(let o of t.currentIterable)n.push(o)}finally{delete t.currentIterable}}),pr=async function*(e,t,r){if(r===t.length){yield e;return}let{transform:n=sh}=t[r];for await(let o of n(e))yield*pr(o,t,r+1)},Wc=async function*(e){for(let[t,{final:r}]of Object.entries(e))yield*ih(r,Number(t),e)},ih=async function*(e,t,r){if(e!==void 0)for await(let n of e())yield*pr(n,r,t+1)},Gc=(0,Mn.callbackify)(async({currentIterable:e},t)=>{if(e!==void 0){await(t?e.throw(t):e.return());return}if(t)throw t}),sh=function*(e){yield e};var _n=(e,t,r,n)=>{try{for(let o of e(...t))r.push(o);n()}catch(o){n(o)}},Hc=(e,t)=>[...t.flatMap(r=>[...Se(r,e,0)]),...ot(e)],Se=function*(e,t,r){if(r===t.length){yield e;return}let{transform:n=ch}=t[r];for(let o of n(e))yield*Se(o,t,r+1)},ot=function*(e){for(let[t,{final:r}]of Object.entries(e))yield*ah(r,Number(t),e)},ah=function*(e,t,r){if(e!==void 0)for(let n of e())yield*Se(n,r,t+1)},ch=function*(e){yield e};var Ln=({value:e,value:{transform:t,final:r,writableObjectMode:n,readableObjectMode:o},optionName:i},{encoding:s})=>{let a={},c=Yc(e,s,i),l=we(t),f=we(r),u=l?Un.bind(void 0,pr,a):_n.bind(void 0,Se),d=l||f?Un.bind(void 0,Wc,a):_n.bind(void 0,ot),p=l||f?Gc.bind(void 0,a):void 0;return{stream:new it.Transform({writableObjectMode:n,writableHighWaterMark:(0,it.getDefaultHighWaterMark)(n),readableObjectMode:o,readableHighWaterMark:(0,it.getDefaultHighWaterMark)(o),transform(b,m,g){u([b,c,0],this,g)},flush(b){d([c],this,b)},destroy:p})}},mr=(e,t,r,n)=>{let o=t.filter(({type:s})=>s==="generator"),i=n?o.reverse():o;for(let{value:s,optionName:a}of i){let c=Yc(s,r,a);e=Hc(c,e)}return e},Yc=({transform:e,final:t,binary:r,writableObjectMode:n,readableObjectMode:o,preserveNewlines:i},s,a)=>{let c={};return[{transform:Bc(n,a)},dr(r,s,n),ur(r,i,n,c),{transform:e,final:t},{transform:Nc(o,a)},Lc({binary:r,preserveNewlines:i,readableObjectMode:o,state:c})].filter(Boolean)};var qc=(e,t)=>{for(let r of lh(e))fh(e,r,t)},lh=e=>new Set(Object.entries(e).filter(([,{direction:t}])=>t==="input").map(([t])=>Number(t))),fh=(e,t,r)=>{let{stdioItems:n}=e[t],o=n.filter(({contents:a})=>a!==void 0);if(o.length===0)return;if(t!==0){let[{type:a,optionName:c}]=o;throw new TypeError(`Only the \`stdin\` option, not \`${c}\`, can be ${ue[a]} with synchronous methods.`)}let s=o.map(({contents:a})=>a).map(a=>uh(a,n));r.input=Je(s)},uh=(e,t)=>{let r=mr(e,t,"utf8",!0);return dh(r),Je(r)},dh=e=>{let t=e.find(r=>typeof r!="string"&&!D(r));if(t!==void 0)throw new TypeError(`The \`stdin\` option is invalid: when passing objects as input, a transform must be used to serialize them to strings or Uint8Arrays: ${t}.`)};var gr=require("node:fs");var hr=({stdioItems:e,encoding:t,verboseInfo:r,fdNumber:n})=>n!=="all"&&ve(r,n)&&!N.has(t)&&ph(n)&&(e.some(({type:o,value:i})=>o==="native"&&mh.has(i))||e.every(({type:o})=>z.has(o))),ph=e=>e===1||e===2,mh=new Set(["pipe","overlapped"]),Kc=async(e,t,r,n)=>{for await(let o of e)hh(t)||Zc(o,r,n)},Jc=(e,t,r)=>{for(let n of e)Zc(n,t,r)},hh=e=>e._readableState.pipes.length>0,Zc=(e,t,r)=>{let n=kt(e);J({type:"output",verboseMessage:n,fdNumber:t,verboseInfo:r})};var Xc=({fileDescriptors:e,syncResult:{output:t},options:r,isMaxBuffer:n,verboseInfo:o})=>{if(t===null)return{output:Array.from({length:3})};let i={},s=new Set([]);return{output:t.map((c,l)=>gh({result:c,fileDescriptors:e,fdNumber:l,state:i,outputFiles:s,isMaxBuffer:n,verboseInfo:o},r)),...i}},gh=({result:e,fileDescriptors:t,fdNumber:r,state:n,outputFiles:o,isMaxBuffer:i,verboseInfo:s},{buffer:a,encoding:c,lines:l,stripFinalNewline:f,maxBuffer:u})=>{if(e===null)return;let d=Ja(e,i,u),p=re(d),{stdioItems:h,objectMode:b}=t[r],m=yh([p],h,c,n),{serializedResult:g,finalResult:y=g}=bh({chunks:m,objectMode:b,encoding:c,lines:l,stripFinalNewline:f,fdNumber:r});wh({serializedResult:g,fdNumber:r,state:n,verboseInfo:s,encoding:c,stdioItems:h,objectMode:b});let x=a[r]?y:void 0;try{return n.error===void 0&&Sh(g,h,o),x}catch($){return n.error=$,x}},yh=(e,t,r,n)=>{try{return mr(e,t,r,!1)}catch(o){return n.error=o,e}},bh=({chunks:e,objectMode:t,encoding:r,lines:n,stripFinalNewline:o,fdNumber:i})=>{if(t)return{serializedResult:e};if(r==="buffer")return{serializedResult:Je(e)};let s=zo(e,r);return n[i]?{serializedResult:s,finalResult:Pn(s,!o[i],t)}:{serializedResult:s}},wh=({serializedResult:e,fdNumber:t,state:r,verboseInfo:n,encoding:o,stdioItems:i,objectMode:s})=>{if(!hr({stdioItems:i,encoding:o,verboseInfo:n,fdNumber:t}))return;let a=Pn(e,!1,s);try{Jc(a,t,n)}catch(c){r.error??=c}},Sh=(e,t,r)=>{for(let{path:n,append:o}of t.filter(({type:i})=>cr.has(i))){let i=typeof n=="string"?n:n.toString();o||r.has(i)?(0,gr.appendFileSync)(n,e):(r.add(i),(0,gr.writeFileSync)(n,e))}};var Qc=([,e,t],r)=>{if(r.all)return e===void 0?t:t===void 0?e:Array.isArray(e)?Array.isArray(t)?[...e,...t]:[...e,se(t,r,"all")]:Array.isArray(t)?[se(e,r,"all"),...t]:D(e)&&D(t)?_r([e,t]):`${e}${t}`};var yr=require("node:events");var el=async(e,t)=>{let[r,n]=await xh(e);return t.isForcefullyTerminated??=!1,[r,n]},xh=async e=>{let[t,r]=await Promise.allSettled([(0,yr.once)(e,"spawn"),(0,yr.once)(e,"exit")]);return t.status==="rejected"?[]:r.status==="rejected"?tl(e):r.value},tl=async e=>{try{return await(0,yr.once)(e,"exit")}catch{return tl(e)}},rl=async e=>{let[t,r]=await e;if(!$h(t,r)&&Fn(t,r))throw new G;return[t,r]},$h=(e,t)=>e===void 0&&t===void 0,Fn=(e,t)=>e!==0||t!==null;var nl=({error:e,status:t,signal:r,output:n},{maxBuffer:o})=>{let i=Eh(e,t,r),s=i?.code==="ETIMEDOUT",a=Ka(i,n,o);return{resultError:i,exitCode:t,signal:r,timedOut:s,isMaxBuffer:a}},Eh=(e,t,r)=>e!==void 0?e:Fn(t,r)?new G:void 0;var il=(e,t,r)=>{let{file:n,commandArguments:o,command:i,escapedCommand:s,startTime:a,verboseInfo:c,options:l,fileDescriptors:f}=Th(e,t,r),u=Oh({file:n,commandArguments:o,options:l,command:i,escapedCommand:s,verboseInfo:c,fileDescriptors:f,startTime:a});return Ne(u,c,l)},Th=(e,t,r)=>{let{command:n,escapedCommand:o,startTime:i,verboseInfo:s}=It(e,t,r),a=Ah(r),{file:c,commandArguments:l,options:f}=Kt(e,t,a);kh(f);let u=Pc(f,s);return{file:c,commandArguments:l,command:n,escapedCommand:o,startTime:i,verboseInfo:s,options:f,fileDescriptors:u}},Ah=e=>e.node&&!e.ipc?{...e,ipc:!1}:e,kh=({ipc:e,ipcInput:t,detached:r,cancelSignal:n})=>{t&&br("ipcInput"),e&&br("ipc: true"),r&&br("detached: true"),n&&br("cancelSignal")},br=e=>{throw new TypeError(`The "${e}" option cannot be used with synchronous methods.`)},Oh=({file:e,commandArguments:t,options:r,command:n,escapedCommand:o,verboseInfo:i,fileDescriptors:s,startTime:a})=>{let c=Ih({file:e,commandArguments:t,options:r,command:n,escapedCommand:o,fileDescriptors:s,startTime:a});if(c.failed)return c;let{resultError:l,exitCode:f,signal:u,timedOut:d,isMaxBuffer:p}=nl(c,r),{output:h,error:b=l}=Xc({fileDescriptors:s,syncResult:c,options:r,isMaxBuffer:p,verboseInfo:i}),m=h.map((y,x)=>se(y,r,x)),g=se(Qc(h,r),r,"all");return Rh({error:b,exitCode:f,signal:u,timedOut:d,isMaxBuffer:p,stdio:m,all:g,options:r,command:n,escapedCommand:o,startTime:a})},Ih=({file:e,commandArguments:t,options:r,command:n,escapedCommand:o,fileDescriptors:i,startTime:s})=>{try{qc(i,r);let a=vh(r);return(0,ol.spawnSync)(...Jt(e,t,a))}catch(a){return Be({error:a,command:n,escapedCommand:o,fileDescriptors:i,options:r,startTime:s,isSync:!0})}},vh=({encoding:e,maxBuffer:t,...r})=>({...r,encoding:"buffer",maxBuffer:or(t)}),Rh=({error:e,exitCode:t,signal:r,timedOut:n,isMaxBuffer:o,stdio:i,all:s,options:a,command:c,escapedCommand:l,startTime:f})=>e===void 0?ir({command:c,escapedCommand:l,stdio:i,all:s,ipcOutput:[],options:a,startTime:f}):nt({error:e,command:c,escapedCommand:l,timedOut:n,isCanceled:!1,isGracefullyCanceled:!1,isMaxBuffer:o,isForcefullyTerminated:!1,exitCode:t,signal:r,stdio:i,all:s,ipcOutput:[],options:a,startTime:f,isSync:!0});var mf=require("node:events"),hf=require("node:child_process");var Nn=C(require("node:process"),1);var ze=require("node:events");var sl=({anyProcess:e,channel:t,isSubprocess:r,ipc:n},{reference:o=!0,filter:i}={})=>(Me({methodName:"getOneMessage",isSubprocess:r,ipc:n,isConnected:zt(e)}),Ch({anyProcess:e,channel:t,isSubprocess:r,filter:i,reference:o})),Ch=async({anyProcess:e,channel:t,isSubprocess:r,filter:n,reference:o})=>{Ft(t,o);let i=fe(e,t,r),s=new AbortController;try{return await Promise.race([Dh(i,n,s),Ph(i,r,s),Mh(i,r,s)])}catch(a){throw Ue(e),a}finally{s.abort(),Bt(t,o)}},Dh=async(e,t,{signal:r})=>{if(t===void 0){let[n]=await(0,ze.once)(e,"message",{signal:r});return n}for await(let[n]of(0,ze.on)(e,"message",{signal:r}))if(t(n))return n},Ph=async(e,t,{signal:r})=>{await(0,ze.once)(e,"disconnect",{signal:r}),vs(t)},Mh=async(e,t,{signal:r})=>{let[n]=await(0,ze.once)(e,"strict:error",{signal:r});throw Ut(n,t)};var st=require("node:events");var cl=({anyProcess:e,channel:t,isSubprocess:r,ipc:n},{reference:o=!0}={})=>Bn({anyProcess:e,channel:t,isSubprocess:r,ipc:n,shouldAwait:!r,reference:o}),Bn=({anyProcess:e,channel:t,isSubprocess:r,ipc:n,shouldAwait:o,reference:i})=>{Me({methodName:"getEachMessage",isSubprocess:r,ipc:n,isConnected:zt(e)}),Ft(t,i);let s=fe(e,t,r),a=new AbortController,c={};return Uh(e,s,a),_h({ipcEmitter:s,isSubprocess:r,controller:a,state:c}),Lh({anyProcess:e,channel:t,ipcEmitter:s,isSubprocess:r,shouldAwait:o,controller:a,state:c,reference:i})},Uh=async(e,t,r)=>{try{await(0,st.once)(t,"disconnect",{signal:r.signal}),r.abort()}catch{}},_h=async({ipcEmitter:e,isSubprocess:t,controller:r,state:n})=>{try{let[o]=await(0,st.once)(e,"strict:error",{signal:r.signal});n.error=Ut(o,t),r.abort()}catch{}},Lh=async function*({anyProcess:e,channel:t,ipcEmitter:r,isSubprocess:n,shouldAwait:o,controller:i,state:s,reference:a}){try{for await(let[c]of(0,st.on)(r,"message",{signal:i.signal}))al(s),yield c}catch{al(s)}finally{i.abort(),Bt(t,a),n||Ue(e),o&&await e}},al=({error:e})=>{if(e)throw e};var ll=(e,{ipc:t})=>{Object.assign(e,ul(e,!1,t))},fl=()=>{let e=Nn.default,t=!0,r=Nn.default.channel!==void 0;return{...ul(e,t,r),getCancelSignal:la.bind(void 0,{anyProcess:e,channel:e.channel,isSubprocess:t,ipc:r})}},ul=(e,t,r)=>({sendMessage:Ht.bind(void 0,{anyProcess:e,channel:e.channel,isSubprocess:t,ipc:r}),getOneMessage:sl.bind(void 0,{anyProcess:e,channel:e.channel,isSubprocess:t,ipc:r}),getEachMessage:cl.bind(void 0,{anyProcess:e,channel:e.channel,isSubprocess:t,ipc:r})});var dl=require("node:child_process"),de=require("node:stream");var pl=({error:e,command:t,escapedCommand:r,fileDescriptors:n,options:o,startTime:i,verboseInfo:s})=>{vn(n);let a=new dl.ChildProcess;Fh(a,n),Object.assign(a,{readable:Bh,writable:Nh,duplex:jh});let c=Be({error:e,command:t,escapedCommand:r,fileDescriptors:n,options:o,startTime:i,isSync:!1}),l=zh(c,s,o);return{subprocess:a,promise:l}},Fh=(e,t)=>{let r=at(),n=at(),o=at(),i=Array.from({length:t.length-3},at),s=at(),a=[r,n,o,...i];Object.assign(e,{stdin:r,stdout:n,stderr:o,all:s,stdio:a})},at=()=>{let e=new de.PassThrough;return e.end(),e},Bh=()=>new de.Readable({read(){}}),Nh=()=>new de.Writable({write(){}}),jh=()=>new de.Duplex({read(){},write(){}}),zh=async(e,t,r)=>Ne(e,t,r);var Ve=require("node:fs"),hl=require("node:buffer"),te=require("node:stream");var gl=(e,t)=>fr(Vh,e,t,!1),ct=({type:e,optionName:t})=>{throw new TypeError(`The \`${t}\` option cannot be ${ue[e]}.`)},ml={fileNumber:ct,generator:Ln,asyncGenerator:Ln,nodeStream:({value:e})=>({stream:e}),webTransform({value:{transform:e,writableObjectMode:t,readableObjectMode:r}}){let n=t||r;return{stream:te.Duplex.fromWeb(e,{objectMode:n})}},duplex:({value:{transform:e}})=>({stream:e}),native(){}},Vh={input:{...ml,fileUrl:({value:e})=>({stream:(0,Ve.createReadStream)(e)}),filePath:({value:{file:e}})=>({stream:(0,Ve.createReadStream)(e)}),webStream:({value:e})=>({stream:te.Readable.fromWeb(e)}),iterable:({value:e})=>({stream:te.Readable.from(e)}),asyncIterable:({value:e})=>({stream:te.Readable.from(e)}),string:({value:e})=>({stream:te.Readable.from(e)}),uint8Array:({value:e})=>({stream:te.Readable.from(hl.Buffer.from(e))})},output:{...ml,fileUrl:({value:e})=>({stream:(0,Ve.createWriteStream)(e)}),filePath:({value:{file:e,append:t}})=>({stream:(0,Ve.createWriteStream)(e,t?{flags:"a"}:{})}),webStream:({value:e})=>({stream:te.Writable.fromWeb(e)}),iterable:ct,asyncIterable:ct,string:ct,uint8Array:ct}};var lt=require("node:events"),Sr=require("node:stream"),Vn=require("node:stream/promises");function xe(e){if(!Array.isArray(e))throw new TypeError(`Expected an array, got \`${typeof e}\`.`);for(let o of e)zn(o);let t=e.some(({readableObjectMode:o})=>o),r=Wh(e,t),n=new jn({objectMode:t,writableHighWaterMark:r,readableHighWaterMark:r});for(let o of e)n.add(o);return n}var Wh=(e,t)=>{if(e.length===0)return(0,Sr.getDefaultHighWaterMark)(t);let r=e.filter(({readableObjectMode:n})=>n===t).map(({readableHighWaterMark:n})=>n);return Math.max(...r)},jn=class extends Sr.PassThrough{#t=new Set([]);#r=new Set([]);#e=new Set([]);#n;#i=Symbol("unpipe");#o=new WeakMap;add(t){if(zn(t),this.#t.has(t))return;this.#t.add(t),this.#n??=Gh(this,this.#t,this.#i);let r=qh({passThroughStream:this,stream:t,streams:this.#t,ended:this.#r,aborted:this.#e,onFinished:this.#n,unpipeEvent:this.#i});this.#o.set(t,r),t.pipe(this,{end:!1})}async remove(t){if(zn(t),!this.#t.has(t))return!1;let r=this.#o.get(t);return r===void 0?!1:(this.#o.delete(t),t.unpipe(this),await r,!0)}},Gh=async(e,t,r)=>{wr(e,yl);let n=new AbortController;try{await Promise.race([Hh(e,n),Yh(e,t,r,n)])}finally{n.abort(),wr(e,-yl)}},Hh=async(e,{signal:t})=>{try{await(0,Vn.finished)(e,{signal:t,cleanup:!0})}catch(r){throw wl(e,r),r}},Yh=async(e,t,r,{signal:n})=>{for await(let[o]of(0,lt.on)(e,"unpipe",{signal:n}))t.has(o)&&o.emit(r)},zn=e=>{if(typeof e?.pipe!="function")throw new TypeError(`Expected a readable stream, got: \`${typeof e}\`.`)},qh=async({passThroughStream:e,stream:t,streams:r,ended:n,aborted:o,onFinished:i,unpipeEvent:s})=>{wr(e,bl);let a=new AbortController;try{await Promise.race([Kh(i,t,a),Jh({passThroughStream:e,stream:t,streams:r,ended:n,aborted:o,controller:a}),Zh({stream:t,streams:r,ended:n,aborted:o,unpipeEvent:s,controller:a})])}finally{a.abort(),wr(e,-bl)}r.size>0&&r.size===n.size+o.size&&(n.size===0&&o.size>0?Wn(e):Xh(e))},Kh=async(e,t,{signal:r})=>{try{await e,r.aborted||Wn(t)}catch(n){r.aborted||wl(t,n)}},Jh=async({passThroughStream:e,stream:t,streams:r,ended:n,aborted:o,controller:{signal:i}})=>{try{await(0,Vn.finished)(t,{signal:i,cleanup:!0,readable:!0,writable:!1}),r.has(t)&&n.add(t)}catch(s){if(i.aborted||!r.has(t))return;Sl(s)?o.add(t):xl(e,s)}},Zh=async({stream:e,streams:t,ended:r,aborted:n,unpipeEvent:o,controller:{signal:i}})=>{if(await(0,lt.once)(e,o,{signal:i}),!e.readable)return(0,lt.once)(i,"abort",{signal:i});t.delete(e),r.delete(e),n.delete(e)},Xh=e=>{e.writable&&e.end()},wl=(e,t)=>{Sl(t)?Wn(e):xl(e,t)},Sl=e=>e?.code==="ERR_STREAM_PREMATURE_CLOSE",Wn=e=>{(e.readable||e.writable)&&e.destroy()},xl=(e,t)=>{e.destroyed||(e.once("error",Qh),e.destroy(t))},Qh=()=>{},wr=(e,t)=>{let r=e.getMaxListeners();r!==0&&r!==Number.POSITIVE_INFINITY&&e.setMaxListeners(r+t)},yl=2,bl=1;var Gn=require("node:stream/promises");var We=(e,t)=>{e.pipe(t),eg(e,t),tg(e,t)},eg=async(e,t)=>{if(!(W(e)||W(t))){try{await(0,Gn.finished)(e,{cleanup:!0,readable:!0,writable:!1})}catch{}Hn(t)}},Hn=e=>{e.writable&&e.end()},tg=async(e,t)=>{if(!(W(e)||W(t))){try{await(0,Gn.finished)(t,{cleanup:!0,readable:!1,writable:!0})}catch{}Yn(e)}},Yn=e=>{e.readable&&e.destroy()};var $l=(e,t,r)=>{let n=new Map;for(let[o,{stdioItems:i,direction:s}]of Object.entries(t)){for(let{stream:a}of i.filter(({type:c})=>z.has(c)))rg(e,a,s,o);for(let{stream:a}of i.filter(({type:c})=>!z.has(c)))og({subprocess:e,stream:a,direction:s,fdNumber:o,pipeGroups:n,controller:r})}for(let[o,i]of n.entries()){let s=i.length===1?i[0]:xe(i);We(s,o)}},rg=(e,t,r,n)=>{r==="output"?We(e.stdio[n],t):We(t,e.stdio[n]);let o=ng[n];o!==void 0&&(e[o]=t),e.stdio[n]=t},ng=["stdin","stdout","stderr"],og=({subprocess:e,stream:t,direction:r,fdNumber:n,pipeGroups:o,controller:i})=>{if(t===void 0)return;ig(t,i);let[s,a]=r==="output"?[t,e.stdio[n]]:[e.stdio[n],t],c=o.get(s)??[];o.set(s,[...c,a])},ig=(e,{signal:t})=>{W(e)&&ye(e,sg,t)},sg=2;var Tl=require("node:events");var $e=[];$e.push("SIGHUP","SIGINT","SIGTERM");process.platform!=="win32"&&$e.push("SIGALRM","SIGABRT","SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&$e.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT");var xr=e=>!!e&&typeof e=="object"&&typeof e.removeListener=="function"&&typeof e.emit=="function"&&typeof e.reallyExit=="function"&&typeof e.listeners=="function"&&typeof e.kill=="function"&&typeof e.pid=="number"&&typeof e.on=="function",qn=Symbol.for("signal-exit emitter"),Kn=globalThis,ag=Object.defineProperty.bind(Object),Jn=class{emitted={afterExit:!1,exit:!1};listeners={afterExit:[],exit:[]};count=0;id=Math.random();constructor(){if(Kn[qn])return Kn[qn];ag(Kn,qn,{value:this,writable:!1,enumerable:!1,configurable:!1})}on(t,r){this.listeners[t].push(r)}removeListener(t,r){let n=this.listeners[t],o=n.indexOf(r);o!==-1&&(o===0&&n.length===1?n.length=0:n.splice(o,1))}emit(t,r,n){if(this.emitted[t])return!1;this.emitted[t]=!0;let o=!1;for(let i of this.listeners[t])o=i(r,n)===!0||o;return t==="exit"&&(o=this.emit("afterExit",r,n)||o),o}},$r=class{},cg=e=>({onExit(t,r){return e.onExit(t,r)},load(){return e.load()},unload(){return e.unload()}}),Zn=class extends $r{onExit(){return()=>{}}load(){}unload(){}},Xn=class extends $r{#t=Qn.platform==="win32"?"SIGINT":"SIGHUP";#r=new Jn;#e;#n;#i;#o={};#s=!1;constructor(t){super(),this.#e=t,this.#o={};for(let r of $e)this.#o[r]=()=>{let n=this.#e.listeners(r),{count:o}=this.#r,i=t;if(typeof i.__signal_exit_emitter__=="object"&&typeof i.__signal_exit_emitter__.count=="number"&&(o+=i.__signal_exit_emitter__.count),n.length===o){this.unload();let s=this.#r.emit("exit",null,r),a=r==="SIGHUP"?this.#t:r;s||t.kill(t.pid,a)}};this.#i=t.reallyExit,this.#n=t.emit}onExit(t,r){if(!xr(this.#e))return()=>{};this.#s===!1&&this.load();let n=r?.alwaysLast?"afterExit":"exit";return this.#r.on(n,t),()=>{this.#r.removeListener(n,t),this.#r.listeners.exit.length===0&&this.#r.listeners.afterExit.length===0&&this.unload()}}load(){if(!this.#s){this.#s=!0,this.#r.count+=1;for(let t of $e)try{let r=this.#o[t];r&&this.#e.on(t,r)}catch{}this.#e.emit=(t,...r)=>this.#c(t,...r),this.#e.reallyExit=t=>this.#a(t)}}unload(){this.#s&&(this.#s=!1,$e.forEach(t=>{let r=this.#o[t];if(!r)throw new Error("Listener not defined for signal: "+t);try{this.#e.removeListener(t,r)}catch{}}),this.#e.emit=this.#n,this.#e.reallyExit=this.#i,this.#r.count-=1)}#a(t){return xr(this.#e)?(this.#e.exitCode=t||0,this.#r.emit("exit",this.#e.exitCode,null),this.#i.call(this.#e,this.#e.exitCode)):0}#c(t,...r){let n=this.#n;if(t==="exit"&&xr(this.#e)){typeof r[0]=="number"&&(this.#e.exitCode=r[0]);let o=n.call(this.#e,t,...r);return this.#r.emit("exit",this.#e.exitCode,null),o}else return n.call(this.#e,t,...r)}},Qn=globalThis.process,{onExit:El,load:p2,unload:m2}=cg(xr(Qn)?new Xn(Qn):new Zn);var Al=(e,{cleanup:t,detached:r},{signal:n})=>{if(!t||r)return;let o=El(()=>{e.kill()});(0,Tl.addAbortListener)(n,()=>{o()})};var Ol=({source:e,sourcePromise:t,boundOptions:r,createNested:n},...o)=>{let i=Ot(),{destination:s,destinationStream:a,destinationError:c,from:l,unpipeSignal:f}=lg(r,n,o),{sourceStream:u,sourceError:d}=ug(e,l),{options:p,fileDescriptors:h}=X.get(e);return{sourcePromise:t,sourceStream:u,sourceOptions:p,sourceError:d,destination:s,destinationStream:a,destinationError:c,unpipeSignal:f,fileDescriptors:h,startTime:i}},lg=(e,t,r)=>{try{let{destination:n,pipeOptions:{from:o,to:i,unpipeSignal:s}={}}=fg(e,t,...r),a=Lt(n,i);return{destination:n,destinationStream:a,from:o,unpipeSignal:s}}catch(n){return{destinationError:n}}},fg=(e,t,r,...n)=>{if(Array.isArray(r))return{destination:t(kl,e)(r,...n),pipeOptions:e};if(typeof r=="string"||r instanceof URL||Mr(r)){if(Object.keys(e).length>0)throw new TypeError('Please use .pipe("file", ..., options) or .pipe(execa("file", ..., options)) instead of .pipe(options)("file", ...).');let[o,i,s]=gt(r,...n);return{destination:t(kl)(o,i,s),pipeOptions:s}}if(X.has(r)){if(Object.keys(e).length>0)throw new TypeError("Please use .pipe(options)`command` or .pipe($(options)`command`) instead of .pipe(options)($`command`).");return{destination:r,pipeOptions:n[0]}}throw new TypeError(`The first argument must be a template string, an options object, or an Execa subprocess: ${r}`)},kl=({options:e})=>({options:{...e,stdin:"pipe",piped:!0}}),ug=(e,t)=>{try{return{sourceStream:_e(e,t)}}catch(r){return{sourceError:r}}};var vl=({sourceStream:e,sourceError:t,destinationStream:r,destinationError:n,fileDescriptors:o,sourceOptions:i,startTime:s})=>{let a=dg({sourceStream:e,sourceError:t,destinationStream:r,destinationError:n});if(a!==void 0)throw eo({error:a,fileDescriptors:o,sourceOptions:i,startTime:s})},dg=({sourceStream:e,sourceError:t,destinationStream:r,destinationError:n})=>{if(t!==void 0&&n!==void 0)return n;if(n!==void 0)return Yn(e),n;if(t!==void 0)return Hn(r),t},eo=({error:e,fileDescriptors:t,sourceOptions:r,startTime:n})=>Be({error:e,command:Il,escapedCommand:Il,fileDescriptors:t,options:r,startTime:n,isSync:!1}),Il="source.pipe(destination)";var Rl=async e=>{let[{status:t,reason:r,value:n=r},{status:o,reason:i,value:s=i}]=await e;if(s.pipedFrom.includes(n)||s.pipedFrom.push(n),o==="rejected")throw s;if(t==="rejected")throw n;return s};var Cl=require("node:stream/promises");var Dl=(e,t,r)=>{let n=Er.has(t)?mg(e,t):pg(e,t);return ye(e,gg,r.signal),ye(t,yg,r.signal),hg(t),n},pg=(e,t)=>{let r=xe([e]);return We(r,t),Er.set(t,r),r},mg=(e,t)=>{let r=Er.get(t);return r.add(e),r},hg=async e=>{try{await(0,Cl.finished)(e,{cleanup:!0,readable:!1,writable:!0})}catch{}Er.delete(e)},Er=new WeakMap,gg=2,yg=1;var Pl=require("node:util");var Ml=(e,t)=>e===void 0?[]:[bg(e,t)],bg=async(e,{sourceStream:t,mergedStream:r,fileDescriptors:n,sourceOptions:o,startTime:i})=>{await(0,Pl.aborted)(e,t),await r.remove(t);let s=new Error("Pipe canceled by `unpipeSignal` option.");throw eo({error:s,fileDescriptors:n,sourceOptions:o,startTime:i})};var Tr=(e,...t)=>{if(R(t[0]))return Tr.bind(void 0,{...e,boundOptions:{...e.boundOptions,...t[0]}});let{destination:r,...n}=Ol(e,...t),o=wg({...n,destination:r});return o.pipe=Tr.bind(void 0,{...e,source:r,sourcePromise:o,boundOptions:{}}),o},wg=async({sourcePromise:e,sourceStream:t,sourceOptions:r,sourceError:n,destination:o,destinationStream:i,destinationError:s,unpipeSignal:a,fileDescriptors:c,startTime:l})=>{let f=Sg(e,o);vl({sourceStream:t,sourceError:n,destinationStream:i,destinationError:s,fileDescriptors:c,sourceOptions:r,startTime:l});let u=new AbortController;try{let d=Dl(t,i,u);return await Promise.race([Rl(f),...Ml(a,{sourceStream:t,mergedStream:d,sourceOptions:r,fileDescriptors:c,startTime:l})])}finally{u.abort()}},Sg=(e,t)=>Promise.allSettled([e,t]);var Bl=require("node:timers/promises");var _l=require("node:events"),Ll=require("node:stream");var Ar=({subprocessStdout:e,subprocess:t,binary:r,shouldEncode:n,encoding:o,preserveNewlines:i})=>{let s=new AbortController;return xg(t,s),Fl({stream:e,controller:s,binary:r,shouldEncode:!e.readableObjectMode&&n,encoding:o,shouldSplit:!e.readableObjectMode,preserveNewlines:i})},xg=async(e,t)=>{try{await e}catch{}finally{t.abort()}},to=({stream:e,onStreamEnd:t,lines:r,encoding:n,stripFinalNewline:o,allMixed:i})=>{let s=new AbortController;$g(t,s,e);let a=e.readableObjectMode&&!i;return Fl({stream:e,controller:s,binary:n==="buffer",shouldEncode:!a,encoding:n,shouldSplit:!a&&r,preserveNewlines:!o})},$g=async(e,t,r)=>{try{await e}catch{r.destroy()}finally{t.abort()}},Fl=({stream:e,controller:t,binary:r,shouldEncode:n,encoding:o,shouldSplit:i,preserveNewlines:s})=>{let a=(0,_l.on)(e,"data",{signal:t.signal,highWaterMark:Ul,highWatermark:Ul});return Eg({onStdoutChunk:a,controller:t,binary:r,shouldEncode:n,encoding:o,shouldSplit:i,preserveNewlines:s})},ro=(0,Ll.getDefaultHighWaterMark)(!0),Ul=ro,Eg=async function*({onStdoutChunk:e,controller:t,binary:r,shouldEncode:n,encoding:o,shouldSplit:i,preserveNewlines:s}){let a=Tg({binary:r,shouldEncode:n,encoding:o,shouldSplit:i,preserveNewlines:s});try{for await(let[c]of e)yield*Se(c,a,0)}catch(c){if(!t.signal.aborted)throw c}finally{yield*ot(a)}},Tg=({binary:e,shouldEncode:t,encoding:r,shouldSplit:n,preserveNewlines:o})=>[dr(e,r,!t),ur(e,o,!n,{})].filter(Boolean);var Nl=async({stream:e,onStreamEnd:t,fdNumber:r,encoding:n,buffer:o,maxBuffer:i,lines:s,allMixed:a,stripFinalNewline:c,verboseInfo:l,streamInfo:f})=>{let u=Ag({stream:e,onStreamEnd:t,fdNumber:r,encoding:n,allMixed:a,verboseInfo:l,streamInfo:f});if(!o){await Promise.all([kg(e),u]);return}let d=Cn(c,r),p=to({stream:e,onStreamEnd:t,lines:s,encoding:n,stripFinalNewline:d,allMixed:a}),[h]=await Promise.all([Og({stream:e,iterable:p,fdNumber:r,encoding:n,maxBuffer:i,lines:s}),u]);return h},Ag=async({stream:e,onStreamEnd:t,fdNumber:r,encoding:n,allMixed:o,verboseInfo:i,streamInfo:{fileDescriptors:s}})=>{if(!hr({stdioItems:s[r]?.stdioItems,encoding:n,verboseInfo:i,fdNumber:r}))return;let a=to({stream:e,onStreamEnd:t,lines:!0,encoding:n,stripFinalNewline:!0,allMixed:o});await Kc(a,e,r,i)},kg=async e=>{await(0,Bl.setImmediate)(),e.readableFlowing===null&&e.resume()},Og=async({stream:e,stream:{readableObjectMode:t},iterable:r,fdNumber:n,encoding:o,maxBuffer:i,lines:s})=>{try{return t||s?await er(r,{maxBuffer:i}):o==="buffer"?new Uint8Array(await tr(r,{maxBuffer:i})):await nr(r,{maxBuffer:i})}catch(a){return jl(Ha({error:a,stream:e,readableObjectMode:t,lines:s,encoding:o,fdNumber:n}))}},no=async e=>{try{return await e}catch(t){return jl(t)}},jl=({bufferedData:e})=>No(e)?new Uint8Array(e):e;var Vl=require("node:stream/promises"),ft=async(e,t,r,{isSameDirection:n,stopOnExit:o=!1}={})=>{let i=Ig(e,r),s=new AbortController;try{await Promise.race([...o?[r.exitPromise]:[],(0,Vl.finished)(e,{cleanup:!0,signal:s.signal})])}catch(a){i.stdinCleanedUp||Cg(a,t,r,n)}finally{s.abort()}},Ig=(e,{originalStreams:[t],subprocess:r})=>{let n={stdinCleanedUp:!1};return e===t&&vg(e,r,n),n},vg=(e,t,r)=>{let{_destroy:n}=e;e._destroy=(...o)=>{Rg(t,r),n.call(e,...o)}},Rg=({exitCode:e,signalCode:t},r)=>{(e!==null||t!==null)&&(r.stdinCleanedUp=!0)},Cg=(e,t,r,n)=>{if(!Dg(e,t,r,n))throw e},Dg=(e,t,r,n=!0)=>r.propagating?zl(e)||kr(e):(r.propagating=!0,oo(r,t)===n?zl(e):kr(e)),oo=({fileDescriptors:e},t)=>t!=="all"&&e[t].direction==="input",kr=e=>e?.code==="ERR_STREAM_PREMATURE_CLOSE",zl=e=>e?.code==="EPIPE";var Wl=({subprocess:e,encoding:t,buffer:r,maxBuffer:n,lines:o,stripFinalNewline:i,verboseInfo:s,streamInfo:a})=>e.stdio.map((c,l)=>io({stream:c,fdNumber:l,encoding:t,buffer:r[l],maxBuffer:n[l],lines:o[l],allMixed:!1,stripFinalNewline:i,verboseInfo:s,streamInfo:a})),io=async({stream:e,fdNumber:t,encoding:r,buffer:n,maxBuffer:o,lines:i,allMixed:s,stripFinalNewline:a,verboseInfo:c,streamInfo:l})=>{if(!e)return;let f=ft(e,t,l);if(oo(l,t)){await f;return}let[u]=await Promise.all([Nl({stream:e,onStreamEnd:f,fdNumber:t,encoding:r,buffer:n,maxBuffer:o,lines:i,allMixed:s,stripFinalNewline:a,verboseInfo:c,streamInfo:l}),f]);return u};var Gl=({stdout:e,stderr:t},{all:r})=>r&&(e||t)?xe([e,t].filter(Boolean)):void 0,Hl=({subprocess:e,encoding:t,buffer:r,maxBuffer:n,lines:o,stripFinalNewline:i,verboseInfo:s,streamInfo:a})=>io({...Pg(e,r),fdNumber:"all",encoding:t,maxBuffer:n[1]+n[2],lines:o[1]||o[2],allMixed:Mg(e),stripFinalNewline:i,verboseInfo:s,streamInfo:a}),Pg=({stdout:e,stderr:t,all:r},[,n,o])=>{let i=n||o;return i?n?o?{stream:r,buffer:i}:{stream:e,buffer:i}:{stream:t,buffer:i}:{stream:r,buffer:i}},Mg=({all:e,stdout:t,stderr:r})=>e&&t&&r&&t.readableObjectMode!==r.readableObjectMode;var Zl=require("node:events");var Yl=e=>ve(e,"ipc"),ql=(e,t)=>{let r=kt(e);J({type:"ipc",verboseMessage:r,fdNumber:"ipc",verboseInfo:t})};var Kl=async({subprocess:e,buffer:t,maxBuffer:r,ipc:n,ipcOutput:o,verboseInfo:i})=>{if(!n)return o;let s=Yl(i),a=ne(t,"ipc"),c=ne(r,"ipc");for await(let l of Bn({anyProcess:e,channel:e.channel,isSubprocess:!1,ipc:n,shouldAwait:!1,reference:!0}))a&&(Ya(e,o,c),o.push(l)),s&&ql(l,i);return o},Jl=async(e,t)=>(await Promise.allSettled([e]),t);var Xl=async({subprocess:e,options:{encoding:t,buffer:r,maxBuffer:n,lines:o,timeoutDuration:i,cancelSignal:s,gracefulCancel:a,forceKillAfterDelay:c,stripFinalNewline:l,ipc:f,ipcInput:u},context:d,verboseInfo:p,fileDescriptors:h,originalStreams:b,onInternalError:m,controller:g})=>{let y=el(e,d),x={originalStreams:b,fileDescriptors:h,subprocess:e,exitPromise:y,propagating:!1},$=Wl({subprocess:e,encoding:t,buffer:r,maxBuffer:n,lines:o,stripFinalNewline:l,verboseInfo:p,streamInfo:x}),k=Hl({subprocess:e,encoding:t,buffer:r,maxBuffer:n,lines:o,stripFinalNewline:l,verboseInfo:p,streamInfo:x}),v=[],L=Kl({subprocess:e,buffer:r,maxBuffer:n,ipc:f,ipcOutput:v,verboseInfo:p}),P=Ug(b,e,x),U=_g(h,x);try{return await Promise.race([Promise.all([{},rl(y),Promise.all($),k,L,Sa(e,u),...P,...U]),m,Lg(e,g),...ha(e,i,d,g),...Is({subprocess:e,cancelSignal:s,gracefulCancel:a,context:d,controller:g}),...da({subprocess:e,cancelSignal:s,gracefulCancel:a,forceKillAfterDelay:c,context:d,controller:g})])}catch(me){return d.terminationReason??="other",Promise.all([{error:me},y,Promise.all($.map(_=>no(_))),no(k),Jl(L,v),Promise.allSettled(P),Promise.allSettled(U)])}},Ug=(e,t,r)=>e.map((n,o)=>n===t.stdio[o]?void 0:ft(n,o,r)),_g=(e,t)=>e.flatMap(({stdioItems:r},n)=>r.filter(({value:o,stream:i=o})=>Y(i,{checkOpen:!1})&&!W(i)).map(({type:o,value:i,stream:s=i})=>ft(s,n,t,{isSameDirection:z.has(o),stopOnExit:o==="native"}))),Lg=async(e,{signal:t})=>{let[r]=await(0,Zl.once)(e,"error",{signal:t});throw r};var Ql=()=>({readableDestroy:new WeakMap,writableFinal:new WeakMap,writableDestroy:new WeakMap}),ut=(e,t,r)=>{let n=e[r];n.has(t)||n.set(t,[]);let o=n.get(t),i=Z();return o.push(i),{resolve:i.resolve.bind(i),promises:o}},Ge=async({resolve:e,promises:t},r)=>{e();let[n]=await Promise.race([Promise.allSettled([!0,r]),Promise.all([!1,...t])]);return!n};var tf=require("node:stream"),rf=require("node:util");var so=require("node:stream/promises");var ao=async e=>{if(e!==void 0)try{await co(e)}catch{}},ef=async e=>{if(e!==void 0)try{await lo(e)}catch{}},co=async e=>{await(0,so.finished)(e,{cleanup:!0,readable:!1,writable:!0})},lo=async e=>{await(0,so.finished)(e,{cleanup:!0,readable:!0,writable:!1})},Or=async(e,t)=>{if(await e,t)throw t},Ir=(e,t,r)=>{r&&!kr(r)?e.destroy(r):t&&e.destroy()};var nf=({subprocess:e,concurrentStreams:t,encoding:r},{from:n,binary:o=!0,preserveNewlines:i=!0}={})=>{let s=o||N.has(r),{subprocessStdout:a,waitReadableDestroy:c}=fo(e,n,t),{readableEncoding:l,readableObjectMode:f,readableHighWaterMark:u}=uo(a,s),{read:d,onStdoutDataDone:p}=po({subprocessStdout:a,subprocess:e,binary:s,encoding:r,preserveNewlines:i}),h=new tf.Readable({read:d,destroy:(0,rf.callbackify)(ho.bind(void 0,{subprocessStdout:a,subprocess:e,waitReadableDestroy:c})),highWaterMark:u,objectMode:f,encoding:l});return mo({subprocessStdout:a,onStdoutDataDone:p,readable:h,subprocess:e}),h},fo=(e,t,r)=>{let n=_e(e,t),o=ut(r,n,"readableDestroy");return{subprocessStdout:n,waitReadableDestroy:o}},uo=({readableEncoding:e,readableObjectMode:t,readableHighWaterMark:r},n)=>n?{readableEncoding:e,readableObjectMode:t,readableHighWaterMark:r}:{readableEncoding:e,readableObjectMode:!0,readableHighWaterMark:ro},po=({subprocessStdout:e,subprocess:t,binary:r,encoding:n,preserveNewlines:o})=>{let i=Z(),s=Ar({subprocessStdout:e,subprocess:t,binary:r,shouldEncode:!r,encoding:n,preserveNewlines:o});return{read(){Fg(this,s,i)},onStdoutDataDone:i}},Fg=async(e,t,r)=>{try{let{value:n,done:o}=await t.next();o?r.resolve():e.push(n)}catch{}},mo=async({subprocessStdout:e,onStdoutDataDone:t,readable:r,subprocess:n,subprocessStdin:o})=>{try{await lo(e),await n,await ao(o),await t,r.readable&&r.push(null)}catch(i){await ao(o),of(r,i)}},ho=async({subprocessStdout:e,subprocess:t,waitReadableDestroy:r},n)=>{await Ge(r,t)&&(of(e,n),await Or(t,n))},of=(e,t)=>{Ir(e,e.readable,t)};var sf=require("node:stream"),go=require("node:util");var af=({subprocess:e,concurrentStreams:t},{to:r}={})=>{let{subprocessStdin:n,waitWritableFinal:o,waitWritableDestroy:i}=yo(e,r,t),s=new sf.Writable({...bo(n,e,o),destroy:(0,go.callbackify)(So.bind(void 0,{subprocessStdin:n,subprocess:e,waitWritableFinal:o,waitWritableDestroy:i})),highWaterMark:n.writableHighWaterMark,objectMode:n.writableObjectMode});return wo(n,s),s},yo=(e,t,r)=>{let n=Lt(e,t),o=ut(r,n,"writableFinal"),i=ut(r,n,"writableDestroy");return{subprocessStdin:n,waitWritableFinal:o,waitWritableDestroy:i}},bo=(e,t,r)=>({write:Bg.bind(void 0,e),final:(0,go.callbackify)(Ng.bind(void 0,e,t,r))}),Bg=(e,t,r,n)=>{e.write(t,r)?n():e.once("drain",n)},Ng=async(e,t,r)=>{await Ge(r,t)&&(e.writable&&e.end(),await t)},wo=async(e,t,r)=>{try{await co(e),t.writable&&t.end()}catch(n){await ef(r),cf(t,n)}},So=async({subprocessStdin:e,subprocess:t,waitWritableFinal:r,waitWritableDestroy:n},o)=>{await Ge(r,t),await Ge(n,t)&&(cf(e,o),await Or(t,o))},cf=(e,t)=>{Ir(e,e.writable,t)};var lf=require("node:stream"),ff=require("node:util");var uf=({subprocess:e,concurrentStreams:t,encoding:r},{from:n,to:o,binary:i=!0,preserveNewlines:s=!0}={})=>{let a=i||N.has(r),{subprocessStdout:c,waitReadableDestroy:l}=fo(e,n,t),{subprocessStdin:f,waitWritableFinal:u,waitWritableDestroy:d}=yo(e,o,t),{readableEncoding:p,readableObjectMode:h,readableHighWaterMark:b}=uo(c,a),{read:m,onStdoutDataDone:g}=po({subprocessStdout:c,subprocess:e,binary:a,encoding:r,preserveNewlines:s}),y=new lf.Duplex({read:m,...bo(f,e,u),destroy:(0,ff.callbackify)(jg.bind(void 0,{subprocessStdout:c,subprocessStdin:f,subprocess:e,waitReadableDestroy:l,waitWritableFinal:u,waitWritableDestroy:d})),readableHighWaterMark:b,writableHighWaterMark:f.writableHighWaterMark,readableObjectMode:h,writableObjectMode:f.writableObjectMode,encoding:p});return mo({subprocessStdout:c,onStdoutDataDone:g,readable:y,subprocess:e,subprocessStdin:f}),wo(f,y,c),y},jg=async({subprocessStdout:e,subprocessStdin:t,subprocess:r,waitReadableDestroy:n,waitWritableFinal:o,waitWritableDestroy:i},s)=>{await Promise.all([ho({subprocessStdout:e,subprocess:r,waitReadableDestroy:n},s),So({subprocessStdin:t,subprocess:r,waitWritableFinal:o,waitWritableDestroy:i},s)])};var xo=(e,t,{from:r,binary:n=!1,preserveNewlines:o=!1}={})=>{let i=n||N.has(t),s=_e(e,r),a=Ar({subprocessStdout:s,subprocess:e,binary:i,shouldEncode:!0,encoding:t,preserveNewlines:o});return zg(a,s,e)},zg=async function*(e,t,r){try{yield*e}finally{t.readable&&t.destroy(),await r}};var df=(e,{encoding:t})=>{let r=Ql();e.readable=nf.bind(void 0,{subprocess:e,concurrentStreams:r,encoding:t}),e.writable=af.bind(void 0,{subprocess:e,concurrentStreams:r}),e.duplex=uf.bind(void 0,{subprocess:e,concurrentStreams:r,encoding:t}),e.iterable=xo.bind(void 0,e,t),e[Symbol.asyncIterator]=xo.bind(void 0,e,t,{})};var pf=(e,t)=>{for(let[r,n]of Wg){let o=n.value.bind(t);Reflect.defineProperty(e,r,{...n,value:o})}},Vg=(async()=>{})().constructor.prototype,Wg=["then","catch","finally"].map(e=>[e,Reflect.getOwnPropertyDescriptor(Vg,e)]);var gf=(e,t,r,n)=>{let{file:o,commandArguments:i,command:s,escapedCommand:a,startTime:c,verboseInfo:l,options:f,fileDescriptors:u}=Gg(e,t,r),{subprocess:d,promise:p}=Yg({file:o,commandArguments:i,options:f,startTime:c,verboseInfo:l,command:s,escapedCommand:a,fileDescriptors:u});return d.pipe=Tr.bind(void 0,{source:d,sourcePromise:p,boundOptions:{},createNested:n}),pf(d,p),X.set(d,{options:f,fileDescriptors:u}),d},Gg=(e,t,r)=>{let{command:n,escapedCommand:o,startTime:i,verboseInfo:s}=It(e,t,r),{file:a,commandArguments:c,options:l}=Kt(e,t,r),f=Hg(l),u=gl(f,s);return{file:a,commandArguments:c,command:n,escapedCommand:o,startTime:i,verboseInfo:s,options:f,fileDescriptors:u}},Hg=({timeout:e,signal:t,...r})=>{if(t!==void 0)throw new TypeError('The "signal" option has been renamed to "cancelSignal" instead.');return{...r,timeoutDuration:e}},Yg=({file:e,commandArguments:t,options:r,startTime:n,verboseInfo:o,command:i,escapedCommand:s,fileDescriptors:a})=>{let c;try{c=(0,hf.spawn)(...Jt(e,t,r))}catch(h){return pl({error:h,command:i,escapedCommand:s,fileDescriptors:a,options:r,startTime:n,verboseInfo:o})}let l=new AbortController;(0,mf.setMaxListeners)(Number.POSITIVE_INFINITY,l.signal);let f=[...c.stdio];$l(c,a,l),Al(c,r,l);let u={},d=Z();c.kill=As.bind(void 0,{kill:c.kill.bind(c),options:r,onInternalError:d,context:u,controller:l}),c.all=Gl(c,r),df(c,r),ll(c,r);let p=qg({subprocess:c,options:r,startTime:n,verboseInfo:o,fileDescriptors:a,originalStreams:f,command:i,escapedCommand:s,context:u,onInternalError:d,controller:l});return{subprocess:c,promise:p}},qg=async({subprocess:e,options:t,startTime:r,verboseInfo:n,fileDescriptors:o,originalStreams:i,command:s,escapedCommand:a,context:c,onInternalError:l,controller:f})=>{let[u,[d,p],h,b,m]=await Xl({subprocess:e,options:t,context:c,verboseInfo:n,fileDescriptors:o,originalStreams:i,onInternalError:l,controller:f});f.abort(),l.resolve();let g=h.map(($,k)=>se($,t,k)),y=se(b,t,"all"),x=Kg({errorInfo:u,exitCode:d,signal:p,stdio:g,all:y,ipcOutput:m,context:c,options:t,command:s,escapedCommand:a,startTime:r});return Ne(x,n,t)},Kg=({errorInfo:e,exitCode:t,signal:r,stdio:n,all:o,ipcOutput:i,context:s,options:a,command:c,escapedCommand:l,startTime:f})=>"error"in e?nt({error:e.error,command:c,escapedCommand:l,timedOut:s.terminationReason==="timeout",isCanceled:s.terminationReason==="cancel"||s.terminationReason==="gracefulCancel",isGracefullyCanceled:s.terminationReason==="gracefulCancel",isMaxBuffer:e.error instanceof Q,isForcefullyTerminated:s.isForcefullyTerminated,exitCode:t,signal:r,stdio:n,all:o,ipcOutput:i,options:a,startTime:f,isSync:!1}):ir({command:c,escapedCommand:l,stdio:n,all:o,ipcOutput:i,options:a,startTime:f});var vr=(e,t)=>{let r=Object.fromEntries(Object.entries(t).map(([n,o])=>[n,Jg(n,e[n],o)]));return{...e,...r}},Jg=(e,t,r)=>Zg.has(e)&&R(t)&&R(r)?{...t,...r}:r,Zg=new Set(["env",...Br]);var pe=(e,t,r,n)=>{let o=(s,a,c)=>pe(s,a,r,c),i=(...s)=>Xg({mapArguments:e,deepOptions:r,boundOptions:t,setBoundExeca:n,createNested:o},...s);return n!==void 0&&n(i,o,t),i},Xg=({mapArguments:e,deepOptions:t={},boundOptions:r={},setBoundExeca:n,createNested:o},i,...s)=>{if(R(i))return o(e,vr(r,i),n);let{file:a,commandArguments:c,options:l,isSync:f}=Qg({mapArguments:e,firstArgument:i,nextArguments:s,deepOptions:t,boundOptions:r});return f?il(a,c,l):gf(a,c,l,o)},Qg=({mapArguments:e,firstArgument:t,nextArguments:r,deepOptions:n,boundOptions:o})=>{let i=Yo(t)?qo(t,r):[t,...r],[s,a,c]=gt(...i),l=vr(vr(n,o),c),{file:f=s,commandArguments:u=a,options:d=l,isSync:p=!1}=e({file:s,commandArguments:a,options:l});return{file:f,commandArguments:u,options:d,isSync:p}};var yf=({file:e,commandArguments:t})=>wf(e,t),bf=({file:e,commandArguments:t})=>({...wf(e,t),isSync:!0}),wf=(e,t)=>{if(t.length>0)throw new TypeError(`The command and its arguments must be passed as a single string: ${e} ${t}.`);let[r,...n]=ey(e);return{file:r,commandArguments:n}},ey=e=>{if(typeof e!="string")throw new TypeError(`The command must be a string: ${String(e)}.`);let t=e.trim();if(t==="")return[];let r=[];for(let n of t.split(ty)){let o=r.at(-1);o&&o.endsWith("\\")?r[r.length-1]=`${o.slice(0,-1)} ${n}`:r.push(n)}return r},ty=/ +/g;var Sf=(e,t,r)=>{e.sync=t(ry,r),e.s=e.sync},xf=({options:e})=>$f(e),ry=({options:e})=>({...$f(e),isSync:!0}),$f=e=>({options:{...ny(e),...e}}),ny=({input:e,inputFile:t,stdio:r})=>e===void 0&&t===void 0&&r===void 0?{stdin:"inherit"}:{},Ef={preferLocal:!0};var q=pe(()=>({})),NE=pe(()=>({isSync:!0})),jE=pe(yf),zE=pe(bf),VE=pe(ga),WE=pe(xf,{},Ef,Sf),{sendMessage:GE,getOneMessage:HE,getEachMessage:YE,getCancelSignal:qE}=fl();var He=require("@raycast/api");function Rr(e,{lenient:t=!1}={}){if(typeof e!="string")throw new TypeError("Expected a string");if(e=e.trim(),e.includes(" "))return!1;try{return new URL(e),!0}catch{return t?Rr(`https://${e}`):!1}}var dt=require("fs");var Cr=require("child_process"),Ee=process.platform==="win32",ae=process.platform==="darwin",{downloadPath:eT,homebrewPath:Tf,autoLoadUrlFromClipboard:tT,autoLoadUrlFromSelectedText:rT,enableBrowserExtensionSupport:nT,forceIpv4:oT,ytdlPath:$o,ffmpegPath:Eo,ffprobePath:To}=(0,He.getPreferenceValues)();async function Af(){let e=(await q("where winget")).stdout.trim().split(`
`)[0];return(0,dt.existsSync)(e)||await(0,He.showToast)({style:He.Toast.Style.Failure,title:"Winget path not found",message:"Please set the correct path in preferences."}),e}var kf=()=>{if($o&&(0,dt.existsSync)($o))return $o;try{return ae?"/opt/homebrew/bin/yt-dlp":Ee?(0,Cr.execSync)("where yt-dlp").toString().trim().split(`
`)[0]:"/usr/bin/yt-dlp"}catch(e){return console.error(e),""}},Of=()=>{if(Eo&&(0,dt.existsSync)(Eo))return Eo;try{return ae?"/opt/homebrew/bin/ffmpeg":Ee?(0,Cr.execSync)("where ffmpeg").toString().trim().split(`
`)[0]:"/usr/bin/ffmpeg"}catch(e){return console.error(e),""}},If=()=>{if(To&&(0,dt.existsSync)(To))return To;try{return ae?"/opt/homebrew/bin/ffprobe":Ee?(0,Cr.execSync)("where ffprobe").toString().trim().split(`
`)[0]:"/usr/bin/ffprobe"}catch(e){return console.error(e),""}};function Ao(e){let t=e.split(":");if(t.length===2){let[r,n]=t;return parseInt(r)*60+parseInt(n)}else if(t.length===3){let[r,n,o]=t;return parseInt(r)*60*60+parseInt(n)*60+parseInt(o)}throw new Error("Invalid input")}function ko(e){try{return e&&Ao(e),!0}catch{return!1}}function Ye(e){return Rr(e,{lenient:!0})}function oy(e){return e?`${Math.floor(e)} kbps`:""}function iy(e,t){let r=e||t;return r?r<1024?`${r} B`:r<1024**2?`${(r/1024).toFixed(2)} KiB`:r<1024**3?`${(r/1024**2).toFixed(2)} MiB`:`${(r/1024**3).toFixed(2)} GiB`:""}var vf=({vcodec:e,acodec:t})=>({hasVcodec:!!e&&e!=="none",hasAcodec:!!t&&t!=="none"}),Rf=e=>{let t="Video",r="Audio Only",n=[],o=[];if(!e)return{[t]:n,[r]:o};for(let i of e.formats.slice().reverse()){let{hasAcodec:s,hasVcodec:a}=vf(i);if(a)n.push(i);else if(s&&!a)o.push(i);else continue}return{[t]:n,[r]:o}},Cf=e=>{let{hasAcodec:t}=vf(e),r=t?"":"+bestaudio",n=`#${e.ext}`;return e.format_id+r+n},Df=e=>[e.resolution,e.ext,oy(e.tbr),iy(e.filesize)].filter(t=>!!t).join(" | ");function Pf(e){let r=Ee?["<",">",":",'"',"/","\\","|","?","*"]:[":"],n=e.trim();for(let s of r)n=n.replaceAll(s,"");n=Array.from(n).filter(s=>s.charCodeAt(0)>=32).join(""),Ee&&(n=n.replace(/[. ]+$/,"")),n=n.replace(/\s+/g," "),n=n.slice(0,200);let o=/[.!?]/g,i=[...n.matchAll(o)].map(s=>s.index).filter(s=>s!==void 0&&s<=200);return i.length>0&&(n=n.slice(0,i[i.length-1])),n.trim()||"untitled"}var Mf=require("react"),T=require("@raycast/api");var Te=require("react/jsx-runtime"),sy=e=>`
# \u{1F6A8} Error: \`${e}\` is not installed
This extension depends on a command-line utility that is not detected on your system. You must install it continue.

If you have homebrew installed, simply press **\u23CE** to have this extension install it for you. Since \`${e}\` is a heavy library, 
**it can take up to 2 minutes to install**.

**Please do not close Raycast while the installation is in progress.**

To install homebrew, visit [this link](https://brew.sh)
`,ay=e=>`# \u{1F6A8} Error: \`${e}\` is not installed

Please press **\u23CE** to have this extension install it for you. Since \`yt-dlp\` is a heavy library, **it can take up to 2 minutes to install**. \`yt-dlp\` includes \`ffmpeg\` and \`ffprobe\` binaries

## Windows Beta Manual Installation Guide

You can use the built-in Windows package manager, \`winget\`.

\`\`\`bash
winget install --id=yt-dlp.yt-dlp -e
\`\`\`
`;function Oo({executable:e,onRefresh:t}){return(0,Te.jsx)(T.Detail,{actions:(0,Te.jsx)(cy,{onRefresh:t}),markdown:ae?sy(e):ay(e)})}function cy({onRefresh:e}){let[t,r]=(0,Mf.useState)(!1);return(0,Te.jsxs)(T.ActionPanel,{children:[!t&&ae&&(0,Te.jsx)(T.Action,{title:"Install with Homebrew",icon:T.Icon.Download,onAction:async()=>{if(t)return;r(!0);let n=new T.Toast({style:T.Toast.Style.Animated,title:"Installing..."});await n.show();try{await q(Tf,["install","yt-dlp","ffmpeg"]),await n.hide(),e()}catch(o){n.hide(),console.error(o);let i=o instanceof Error,a=o instanceof oe&&o.code==="ENOENT";await(0,T.showToast)({style:T.Toast.Style.Failure,title:i?a?"Cannot find Homebrew":o.name:"Installation Failed",message:i?a?"Please make sure your `brew` PATH is configured correctly in extension preferences. If you don't have Homebrew installed, you can download it from https://brew.sh.":o.message:"An unknown error occurred while trying to install",primaryAction:{title:a?"Open Extension Preferences":"Copy to Clipboard",onAction:()=>{a?(0,T.openExtensionPreferences)():T.Clipboard.copy(i?o.message:"An unknown error occurred while trying to install")}},secondaryAction:a?{title:"Open Installation Guide in Browser",onAction:()=>{(0,T.open)("https://brew.sh")}}:void 0})}r(!1)}}),!t&&Ee&&(0,Te.jsx)(T.Action,{title:"Install with Winget",icon:T.Icon.Download,onAction:async()=>{let n=await Af();if(t)return;r(!0);let o=new T.Toast({style:T.Toast.Style.Animated,title:"Installing..."});await o.show();try{await q(n,["install","--accept-source-agreements","--accept-package-agreements","--id=yt-dlp.yt-dlp","-e"]),await o.hide(),e()}catch(i){o.hide(),console.error(i);let s=i instanceof Error,a=i instanceof oe,c=a&&i.code==="ENOENT";a&&i.exitCode===2316632107?await(0,T.showToast)({style:T.Toast.Style.Success,title:"yt-dlp is already installed",message:"Please configure the path in extension preferences"}):await(0,T.showToast)({style:T.Toast.Style.Failure,title:s?c?"Cannot find Winget":i.name:"Installation Failed",message:s?c?"Please make sure your `winget` PATH is configured correctly in extension preferences. If you don't have Winget installed, you can download it from https://winget.run.":i.message:"An unknown error occurred while trying to install",primaryAction:{title:c?"Open Extension Preferences":"Copy to Clipboard",onAction:()=>{c?(0,T.openExtensionPreferences)():T.Clipboard.copy(s?i.message:"An unknown error occurred while trying to install")}},secondaryAction:c?{title:"Open Installation Guide in Browser",onAction:()=>{(0,T.open)("https://winget.run")}}:void 0})}r(!1)}})]})}var qe=require("react"),I=require("@raycast/api");var Ke=require("react/jsx-runtime"),{homebrewPath:Io}=(0,I.getPreferenceValues)();function vo(){let{pop:e}=(0,I.useNavigation)(),[t,r]=(0,qe.useState)({"yt-dlp":"",ffmpeg:""}),[n,o]=(0,qe.useState)({"yt-dlp":"",ffmpeg:""}),[i,s]=(0,qe.useState)(""),a=Object.values(n).every(c=>!c);return(0,qe.useEffect)(()=>{if(i)return;let c=new I.Toast({style:I.Toast.Style.Animated,title:"Checking versions..."});c.show(),Promise.all([ly(),fy()]).then(([l,f])=>{c.hide(),r(l),o(f)}).catch(l=>{let f=l instanceof Error?l.message:"An unknown error occurred";c.style=I.Toast.Style.Failure,c.title="Failed to check versions",c.message=f,l instanceof Error&&(c.primaryAction={title:"Copy to Clipboard",onAction:()=>{I.Clipboard.copy(f)}})})},[i]),(0,Ke.jsx)(I.Detail,{markdown:["## Versions",Object.entries(t).map(([c,l])=>`${c}: ${l===""?"Checking...":l} ${n[c]?`(outdated: ${n[c]})`:"(up to date)"}`).join(`

`),i].filter(c=>!!c).join(`

`),actions:(0,Ke.jsxs)(I.ActionPanel,{children:[a?void 0:(0,Ke.jsx)(I.Action,{icon:I.Icon.Download,title:"Upgrade",onAction:async()=>{let c=new I.Toast({style:I.Toast.Style.Animated,title:"Upgrading..."});c.show();try{s("Upgrading... Please do not close Raycast while the upgrade is in progress."),await uy(),c.hide()}catch(l){c.style=I.Toast.Style.Failure,c.title="Failed to upgrade",c.message=l instanceof Error?l.message:"An unknown error occurred",l instanceof Error&&(c.primaryAction={title:"Copy to Clipboard",onAction:()=>{I.Clipboard.copy(l.message)}})}finally{s("")}}}),(0,Ke.jsx)(I.Action,{icon:I.Icon.ArrowLeft,title:"Back",onAction:e})]})})}async function ly(){let{stdout:e}=await q(Io,["info","--json=v2","yt-dlp","ffmpeg"]),t=JSON.parse(e);return Object.fromEntries(t.formulae.map(({name:n,versions:o})=>[n,o.stable]))}async function fy(){let{stdout:e}=await q(Io,["outdated","--json=v2","yt-dlp","ffmpeg"]),t=JSON.parse(e);return Object.fromEntries(t.formulae.map(({name:n,current_version:o})=>[n,o]))}async function uy(){return q(Io,["upgrade","yt-dlp","ffmpeg"])}var M=require("react/jsx-runtime"),{downloadPath:dy,autoLoadUrlFromClipboard:py,autoLoadUrlFromSelectedText:my,enableBrowserExtensionSupport:hy,forceIpv4:gy}=(0,w.getPreferenceValues)();function _f(){let[e,t]=(0,V.useState)(0),[r,n]=(0,V.useState)(""),o=(0,V.useMemo)(()=>kf(),[e]),i=(0,V.useMemo)(()=>Of(),[e]),s=(0,V.useMemo)(()=>If(),[e]),{handleSubmit:a,values:c,itemProps:l,setValue:f,setValidationError:u}=_o({initialValues:{url:""},onSubmit:async m=>{if(!m.format)return;let g=["-o",Ro.default.join(dy,`${d?.title||"video"} (%(id)s).%(ext)s`)],[y,x]=m.format.split("#");g.push("--ffmpeg-location",i),g.push("--format",y),g.push("--recode-video",x);let $=await(0,w.showToast)({title:"Downloading Video",style:w.Toast.Style.Animated,message:"0%"});g.push("--progress"),g.push("--print","after_move:filepath");let k=(0,Uf.spawn)(o,[...g,m.url]),v="";k.stdout.on("data",L=>{let P=L.toString(),U=Number(/\[download\]\s+(\d+(\.\d+)?)%.*/.exec(P)?.[1]);if(U){let me=Number($.message?.replace("%",""));U<me&&($.title="Formatting Video"),$.message=`${Math.floor(U)}%`}(ae?P.startsWith("/"):P.match(/^[a-zA-Z]:\\/))&&(v=P.trim())}),k.stderr.on("data",L=>{let P=L.toString();P.startsWith("WARNING:")&&n(P),P.startsWith("ERROR:")&&($.title="Download Failed",$.style=w.Toast.Style.Failure),$.message=P}),k.on("close",()=>{$.style!==w.Toast.Style.Failure&&($.title="Video Downloaded",$.style=w.Toast.Style.Success,$.message=d?.title,v&&($.primaryAction={title:"Open in Finder",shortcut:{modifiers:["cmd","shift"],key:"o"},onAction:()=>{(0,w.open)(Ro.default.dirname(v))}},$.secondaryAction={title:"Copy to Clipboard",shortcut:{modifiers:["cmd","shift"],key:"c"},onAction:()=>{w.Clipboard.copy({file:v}),(0,w.showHUD)("Copied to Clipboard")}}))})},validation:{url:m=>{if(!m)return"URL is required";if(!Ye(m))return"Invalid URL"},startTime:m=>{if(m&&!ko(m))return"Invalid time format"},endTime:m=>{if(m){if(!ko(m))return"Invalid time format";if(d&&Ao(m)>d?.duration)return"End time is greater than video duration"}}}}),{data:d,isLoading:p}=Uo(async m=>{if(!m||!Ye(m))return;let g=await q(o,[gy?"--force-ipv4":"","--dump-json","--format-sort=resolution,ext,tbr",m].filter(x=>!!x)),y=JSON.parse(g.stdout);return{...y,title:Pf(y.title)}},[c.url],{onError(m){(0,w.showToast)({style:w.Toast.Style.Failure,title:"Video not found with the provided URL",message:m.message,primaryAction:{title:"Copy to Clipboard",onAction:()=>{w.Clipboard.copy(m.message)}}})}});(0,V.useEffect)(()=>{d&&d.live_status!=="not_live"&&d.live_status!==void 0&&u("url","Live streams are not supported")},[d]),(0,V.useEffect)(()=>{(async()=>{if(py){let m=await w.Clipboard.readText();if(m&&Ye(m)){f("url",m);return}}if(my)try{let m=await(0,w.getSelectedText)();if(m&&Ye(m)){f("url",m);return}}catch{}if(hy)try{let m=(await w.BrowserExtension.getTabs()).find(g=>g.active)?.url;m&&Ye(m)&&f("url",m)}catch{}})()},[]);let h=(0,V.useMemo)(()=>Dr.default.existsSync(o)?Dr.default.existsSync(i)?Dr.default.existsSync(s)?null:"ffprobe":"ffmpeg":"yt-dlp",[e]),b=(0,V.useMemo)(()=>Rf(d),[d]);return h?(0,M.jsx)(Oo,{executable:h,onRefresh:()=>t(e+1)}):(0,M.jsxs)(w.Form,{isLoading:p,actions:(0,M.jsxs)(w.ActionPanel,{children:[(0,M.jsx)(w.ActionPanel.Section,{children:(0,M.jsx)(w.Action.SubmitForm,{icon:w.Icon.Download,title:"Download Video",onSubmit:m=>{n(""),a({...m,copyToClipboard:!1})}})}),ae&&(0,M.jsx)(w.ActionPanel.Section,{children:(0,M.jsx)(w.Action.Push,{icon:w.Icon.Hammer,title:"Update Libraries",target:(0,M.jsx)(vo,{})})})]}),searchBarAccessory:(0,M.jsx)(w.Form.LinkAccessory,{text:"Supported Sites",target:"https://github.com/yt-dlp/yt-dlp/blob/master/supportedsites.md"}),children:[(0,M.jsx)(w.Form.Description,{title:"Title",text:d?.title??"Video not found"}),(0,M.jsx)(w.Form.TextField,{...l.url,autoFocus:!0,title:"URL",placeholder:"https://www.youtube.com/watch?v=ykaj0pS4A1A"}),r&&(0,M.jsx)(w.Form.Description,{text:r}),d&&(0,M.jsx)(w.Form.Dropdown,{...l.format,title:"Format",children:Object.entries(b).map(([m,g])=>(0,M.jsx)(w.Form.Dropdown.Section,{title:m,children:g.map(y=>(0,M.jsx)(w.Form.Dropdown.Item,{value:Cf(y),title:Df(y)},y.format_id))},m))})]})}
